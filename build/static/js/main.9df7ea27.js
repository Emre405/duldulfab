/*! For license information please see main.9df7ea27.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,p(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,N=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)N.call(t,s)&&!S.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:k.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+T(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),I(a,t,s,"",function(e){return e})):null!=a&&(_(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+T(o=e[c],c);l+=I(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,s,u=i+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],s=0;return I(e,r,"","",function(e){return t.call(n,e,s++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},D={transition:null},R={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=p({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!S.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!p)if(null!==r(c))p=!0,D(N);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function N(e,n){p=!1,g&&(g=!1,v(_),_=-1),m=!0;var i=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),x(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,E=null,_=-1,C=5,T=-1;function I(){return!(t.unstable_now()-T<C)}function j(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?k():(S=!1,E=null)}}else S=!1}if("function"===typeof b)k=function(){b(j)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=j,k=function(){A.postMessage(null)}}else k=function(){y(j,0)};function D(e){E=e,S||(S=!0,k())}function R(e,n){_=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,D(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(_),_=-1):g=!0,R(w,i-a))):(e.sortIndex=o,n(c,e),p||m||(p=!0,D(N))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(m,e)||!d.call(f,e)&&(h.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),N=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var V=!1;function U(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case N:return"Portal";case E:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function K(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ie(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,ke=null,Se=null;function Ee(e){if(e=bs(e)){if("function"!==typeof Ne)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),Ne(e.stateNode,e.type,t))}}function _e(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Ie(){}var je=!1;function Pe(e,t,n){if(je)return e(t,n);je=!0;try{return Te(e,t,n)}finally{je=!1,(null!==ke||null!==Se)&&(Ie(),Ce())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var De=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){De=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){De=!1}function Oe(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ve=null,Ue={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,s,i,a,o,l){Le=!1,Me=null,Oe.apply(Ue,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ke(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return qe(s),e;if(a===r)return qe(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=s.unstable_scheduleCallback,Qe=s.unstable_cancelCallback,Ye=s.unstable_shouldYield,Xe=s.unstable_requestPaint,Je=s.unstable_now,$e=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=dt(o):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~s)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Nt,kt,St,Et,_t=!1,Ct=[],Tt=null,It=null,jt=null,Pt=new Map,At=new Map,Dt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Lt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&Nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Mt(e){var t=vs(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ke(n)))return e.blockedOn=t,void Et(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&Nt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){_t=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==It&&Ft(It)&&(It=null),null!==jt&&Ft(jt)&&(jt=null),Pt.forEach(Vt),At.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==It&&zt(It,e),null!==jt&&zt(jt,e),Pt.forEach(t),At.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var Kt=x.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var s=bt,i=Kt.transition;Kt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=s,Kt.transition=i}}function Wt(e,t,n,r){var s=bt,i=Kt.transition;Kt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=s,Kt.transition=i}}function Gt(e,t,n,r){if(qt){var s=Yt(e,t,n,r);if(null===s)qr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,s),!0;case"dragenter":return It=Lt(It,e,t,n,r,s),!0;case"mouseover":return jt=Lt(jt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Pt.set(i,Lt(Pt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,At.set(i,Lt(At.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==s;){var i=bs(s);if(null!==i&&wt(i),null===(i=Yt(e,t,n,r))&&qr(e,t,r,Qt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vs(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ke(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,s="value"in Jt?Jt.value:Jt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=sn(fn),pn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),yn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),xn=sn(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Sn}var _n=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(_n),Tn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),jn=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=sn(Pn),Dn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!Rn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Vn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Hn(e,t,n,r){_e(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Gn=null;function Qn(e){Fr(e,0)}function Yn(e){if(G(xs(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Gn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ir(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var a=ur(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Sr={};function Er(e){if(kr[e])return kr[e];if(!Nr[e])return e;var t,n=Nr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return kr[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);var _r=Er("animationend"),Cr=Er("animationiteration"),Tr=Er("animationstart"),Ir=Er("transitionend"),jr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){jr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Rr=Pr[Dr];Ar(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Ar(_r,"onAnimationEnd"),Ar(Cr,"onAnimationIteration"),Ar(Tr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function Vr(e,t){var n=t[ps];void 0===n&&(n=t[ps]=new Set);var r=e+"__bubble";n.has(r)||(Kr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Kr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Ur("selectionchange",!1,t))}}function Kr(e,t,n,r){switch(Xt(t)){case 1:var s=Ht;break;case 4:s=Wt;break;default:s=Gt}n=s.bind(null,t,n,e),s=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=vs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Pe(function(){var r=i,s=we(n),a=[];e:{var o=jr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case _r:case Cr:case Tr:l=yn;break;case Ir:l=jn;break;case"scroll":l=hn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,m=r;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=Ae(m,h))&&u.push(Hr(m,p,f)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[ms])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,p="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,p="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:xs(l),f=null==c?o:xs(c),(o=new u(p,m+"leave",l,n,s)).target=d,o.relatedTarget=f,p=null,vs(s)===r&&((u=new u(h,m+"enter",c,n,s)).target=f,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,m=0,f=u=l;f;f=Gr(f))m++;for(f=0,p=h;p;p=Gr(p))f++;for(;0<m-f;)u=Gr(u),m--;for(;0<f-m;)h=Gr(h),f--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(a,o,l,u,!1),null!==c&&null!==d&&Qr(a,d,c,u,!0)}if("select"===(l=(o=r?xs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(qn(o))if(Jn)g=ar;else{g=sr;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?xs(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,s);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":xr(a,n,s)}var v;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):($t="value"in(Jt=s)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Wr(r,b)).length&&(b=new xn(b,e,null,n,s),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Rn&&Un(e,t)?(e=en(),Zt=$t=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(s=new xn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Fr(a,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Ae(e,n))&&r.unshift(Hr(e,i,s)),null!=(i=Ae(e,t))&&r.push(Hr(e,i,s))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Ae(n,i))&&a.unshift(Hr(n,l,o)):s||null!=(l=Ae(n,i))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Bt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),hs="__reactFiber$"+ds,fs="__reactProps$"+ds,ms="__reactContainer$"+ds,ps="__reactEvents$"+ds,gs="__reactListeners$"+ds,ys="__reactHandles$"+ds;function vs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[hs])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[hs]||e[ms])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[fs]||null}var Ns=[],ks=-1;function Ss(e){return{current:e}}function Es(e){0>ks||(e.current=Ns[ks],Ns[ks]=null,ks--)}function _s(e,t){ks++,Ns[ks]=e.current,e.current=t}var Cs={},Ts=Ss(Cs),Is=Ss(!1),js=Cs;function Ps(e,t){var n=e.type.contextTypes;if(!n)return Cs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function As(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ds(){Es(Is),Es(Ts)}function Rs(e,t,n){if(Ts.current!==Cs)throw Error(i(168));_s(Ts,t),_s(Is,n)}function Os(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,K(e)||"Unknown",s));return M({},n,r)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,js=Ts.current,_s(Ts,e),_s(Is,Is.current),!0}function Ms(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Os(e,t,js),r.__reactInternalMemoizedMergedChildContext=e,Es(Is),Es(Ts),_s(Ts,e)):Es(Is),_s(Is,n)}var Fs=null,Vs=!1,Us=!1;function zs(e){null===Fs?Fs=[e]:Fs.push(e)}function Bs(){if(!Us&&null!==Fs){Us=!0;var e=0,t=bt;try{var n=Fs;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,Vs=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),Ge(Ze,Bs),s}finally{bt=t,Us=!1}}return null}var Ks=[],qs=0,Hs=null,Ws=0,Gs=[],Qs=0,Ys=null,Xs=1,Js="";function $s(e,t){Ks[qs++]=Ws,Ks[qs++]=Hs,Hs=e,Ws=t}function Zs(e,t,n){Gs[Qs++]=Xs,Gs[Qs++]=Js,Gs[Qs++]=Ys,Ys=e;var r=Xs;e=Js;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Xs=1<<32-at(t)+s|n<<s|r,Js=i+e}else Xs=1<<i|n<<s|r,Js=e}function ei(e){null!==e.return&&($s(e,1),Zs(e,1,0))}function ti(e){for(;e===Hs;)Hs=Ks[--qs],Ks[qs]=null,Ws=Ks[--qs],Ks[qs]=null;for(;e===Ys;)Ys=Gs[--Qs],Gs[Qs]=null,Js=Gs[--Qs],Gs[Qs]=null,Xs=Gs[--Qs],Gs[Qs]=null}var ni=null,ri=null,si=!1,ii=null;function ai(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ys?{id:Xs,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!si)return ui(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)ai(e,t),t=cs(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=cs(e.nextSibling)}function fi(){ri=ni=null,si=!1}function mi(e){null===ii?ii=[e]:ii.push(e)}var pi=x.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===A&&vi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case N:return(t=Uc(t,e.mode,n)).return=e,t;case A:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Mc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case N:return n.key===s?u(e,t,n,r):null;case A:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||O(n))return null!==s?null:d(e,t,n,r,null);yi(e,n)}return null}function m(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case A:return m(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function p(s,i,o,l){for(var c=null,u=null,d=i,p=i=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var y=f(s,d,o[p],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),i=a(y,i,p),null===u?c=y:u.sibling=y,u=y,d=g}if(p===o.length)return n(s,d),si&&$s(s,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(s,o[p],l))&&(i=a(d,i,p),null===u?c=d:u.sibling=d,u=d);return si&&$s(s,p),c}for(d=r(s,d);p<o.length;p++)null!==(g=m(d,s,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),i=a(g,i,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),si&&$s(s,p),c}function g(s,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,p=o,g=o=0,y=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(y=p,p=null):y=p.sibling;var b=f(s,p,v.value,c);if(null===b){null===p&&(p=y);break}e&&p&&null===b.alternate&&t(s,p),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,p=y}if(v.done)return n(s,p),si&&$s(s,g),u;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return si&&$s(s,g),u}for(p=r(s,p);!v.done;g++,v=l.next())null!==(v=m(p,s,g,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(s,e)}),si&&$s(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&vi(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=gi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((i=Mc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Lc(a.type,a.key,a.props,null,r.mode,l)).ref=gi(r,i,a),l.return=r,r=l)}return o(r);case N:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Uc(a,r.mode,l)).return=r,r=i}return o(r);case A:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return p(r,i,a,l);if(O(a))return g(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Vc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var xi=bi(!0),wi=bi(!1),Ni=Ss(null),ki=null,Si=null,Ei=null;function _i(){Ei=Si=ki=null}function Ci(e){var t=Ni.current;Es(Ni),e._currentValue=t}function Ti(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ii(e,t){ki=e,Ei=Si=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function ji(e){var t=e._currentValue;if(Ei!==e)if(e={context:e,memoizedValue:t,next:null},null===Si){if(null===ki)throw Error(i(308));Si=e,ki.dependencies={lanes:0,firstContext:e}}else Si=Si.next=e;return t}var Pi=null;function Di(e){null===Pi?Pi=[e]:Pi.push(e)}function Ri(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Di(t)):(n.next=s.next,s.next=n),t.interleaved=n,Oi(e,r)}function Oi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Li=!1;function Mi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&jl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Oi(e,n)}return null===(s=r.interleaved)?(t.next=t,Di(r)):(t.next=s.next,s.next=t),r.interleaved=t,Oi(e,n)}function zi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ki(e,t,n,r){var s=e.updateQueue;Li=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(h=t,f=n,p.tag){case 1:if("function"===typeof(m=p.payload)){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=p.payload)?m.call(f,d,h):m)||void 0===h)break e;d=M({},d,h);break e;case 2:Li=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Fl|=a,e.lanes=a,e.memoizedState=d}}function qi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Hi={},Wi=Ss(Hi),Gi=Ss(Hi),Qi=Ss(Hi);function Yi(e){if(e===Hi)throw Error(i(174));return e}function Xi(e,t){switch(_s(Qi,t),_s(Gi,e),_s(Wi,Hi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Es(Wi),_s(Wi,t)}function Ji(){Es(Wi),Es(Gi),Es(Qi)}function $i(e){Yi(Qi.current);var t=Yi(Wi.current),n=le(t,e.type);t!==n&&(_s(Gi,e),_s(Wi,n))}function Zi(e){Gi.current===e&&(Es(Wi),Es(Gi))}var ea=Ss(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var sa=x.ReactCurrentDispatcher,ia=x.ReactCurrentBatchConfig,aa=0,oa=null,la=null,ca=null,ua=!1,ha=!1,fa=0,ma=0;function pa(){throw Error(i(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ya(e,t,n,r,s,a){if(aa=a,oa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sa.current=null===e||null===e.memoizedState?eo:to,e=n(r,s),ha){a=0;do{if(ha=!1,fa=0,25<=a)throw Error(i(301));a+=1,ca=la=null,t.updateQueue=null,sa.current=no,e=n(r,s)}while(ha)}if(sa.current=Za,t=null!==la&&null!==la.next,aa=0,ca=la=oa=null,ua=!1,t)throw Error(i(300));return e}function va(){var e=0!==fa;return fa=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?oa.memoizedState=ca=e:ca=ca.next=e,ca}function xa(){if(null===la){var e=oa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?oa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(i(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?oa.memoizedState=ca=e:ca=ca.next=e}return ca}function wa(e,t){return"function"===typeof t?t(e):t}function Na(e){var t=xa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=la,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,oa.lanes|=d,Fl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,oa.lanes|=a,Fl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ka(e){var t=xa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(wo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function Ea(e,t){var n=oa,r=xa(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,wo=!0),r=r.queue,Ma(Ta.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Aa(9,Ca.bind(null,n,r,s,t),void 0,null),null===Pl)throw Error(i(349));0!==(30&aa)||_a(n,t,s)}return s}function _a(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ca(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&ja(e)}function Ta(e,t,n){return n(function(){Ia(t)&&ja(e)})}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function ja(e){var t=Oi(e,1);null!==t&&sc(t,e,1,-1)}function Pa(e){var t=ba();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,oa,e),[t.memoizedState,e]}function Aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Da(){return xa().memoizedState}function Ra(e,t,n,r){var s=ba();oa.flags|=e,s.memoizedState=Aa(1|t,n,void 0,void 0===r?null:r)}function Oa(e,t,n,r){var s=xa();r=void 0===r?null:r;var i=void 0;if(null!==la){var a=la.memoizedState;if(i=a.destroy,null!==r&&ga(r,a.deps))return void(s.memoizedState=Aa(t,n,i,r))}oa.flags|=e,s.memoizedState=Aa(1|t,n,i,r)}function La(e,t){return Ra(8390656,8,e,t)}function Ma(e,t){return Oa(2048,8,e,t)}function Fa(e,t){return Oa(4,2,e,t)}function Va(e,t){return Oa(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4,4,Ua.bind(null,t,e),n)}function Ba(){}function Ka(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(or(n,t)||(n=pt(),oa.lanes|=n,Fl|=n,e.baseState=!0),t)}function Wa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=n,ia.transition=r}}function Ga(){return xa().memoizedState}function Qa(e,t,n){var r=rc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e))Ja(t,n);else if(null!==(n=Ri(e,t,n,r))){sc(n,e,r,nc()),$a(n,t,r)}}function Ya(e,t,n){var r=rc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Ja(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,Di(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Ri(e,t,s,r))&&(sc(n,e,r,s=nc()),$a(n,t,r))}}function Xa(e){var t=e.alternate;return e===oa||null!==t&&t===oa}function Ja(e,t){ha=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $a(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Za={readContext:ji,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},eo={readContext:ji,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:ji,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ra(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ba();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qa.bind(null,oa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ba().memoizedState=e},useState:Pa,useDebugValue:Ba,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=Wa.bind(null,e[1]),ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oa,s=ba();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Pl)throw Error(i(349));0!==(30&aa)||_a(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,La(Ta.bind(null,r,a,e),[e]),r.flags|=2048,Aa(9,Ca.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ba(),t=Pl.identifierPrefix;if(si){var n=Js;t=":"+t+"R"+(n=(Xs&~(1<<32-at(Xs)-1)).toString(32)+n),0<(n=fa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ma++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},to={readContext:ji,useCallback:Ka,useContext:ji,useEffect:Ma,useImperativeHandle:za,useInsertionEffect:Fa,useLayoutEffect:Va,useMemo:qa,useReducer:Na,useRef:Da,useState:function(){return Na(wa)},useDebugValue:Ba,useDeferredValue:function(e){return Ha(xa(),la.memoizedState,e)},useTransition:function(){return[Na(wa)[0],xa().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Ga,unstable_isNewReconciler:!1},no={readContext:ji,useCallback:Ka,useContext:ji,useEffect:Ma,useImperativeHandle:za,useInsertionEffect:Fa,useLayoutEffect:Va,useMemo:qa,useReducer:ka,useRef:Da,useState:function(){return ka(wa)},useDebugValue:Ba,useDeferredValue:function(e){var t=xa();return null===la?t.memoizedState=e:Ha(t,la.memoizedState,e)},useTransition:function(){return[ka(wa)[0],xa().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Ga,unstable_isNewReconciler:!1};function ro(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function so(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nc(),s=rc(e),i=Vi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(sc(t,e,s,r),zi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nc(),s=rc(e),i=Vi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(sc(t,e,s,r),zi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nc(),r=rc(e),s=Vi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Ui(e,s,r))&&(sc(t,e,r,n),zi(t,e,r))}};function ao(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function oo(e,t,n){var r=!1,s=Cs,i=t.contextType;return"object"===typeof i&&null!==i?i=ji(i):(s=As(t)?js:Ts.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ps(e,s):Cs),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function lo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function co(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Mi(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=ji(i):(i=As(t)?js:Ts.current,s.context=Ps(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(so(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&io.enqueueReplaceState(s,s.state,null),Ki(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function uo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function ho(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var mo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Vi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Gl=r),fo(0,t)},n}function go(e,t,n){(n=Vi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){fo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){fo(0,t),"function"!==typeof r&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new mo;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function vo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Vi(-1,1)).tag=2,Ui(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var xo=x.ReactCurrentOwner,wo=!1;function No(e,t,n,r){t.child=null===e?wi(t,null,n,r):xi(t,e.child,n,r)}function ko(e,t,n,r,s){n=n.render;var i=t.ref;return Ii(t,s),r=ya(e,t,n,r,i,s),n=va(),null===e||wo?(si&&n&&ei(t),t.flags|=1,No(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function So(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Rc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Eo(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Wo(e,t,s)}return t.flags|=1,(e=Oc(i,r)).ref=t.ref,e.return=t,t.child=e}function Eo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Wo(e,t,s);0!==(131072&e.flags)&&(wo=!0)}}return To(e,t,n,r,s)}function _o(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_s(Ol,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_s(Ol,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,_s(Ol,Rl),Rl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,_s(Ol,Rl),Rl|=r;return No(e,t,s,n),t.child}function Co(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function To(e,t,n,r,s){var i=As(n)?js:Ts.current;return i=Ps(t,i),Ii(t,s),n=ya(e,t,n,r,i,s),r=va(),null===e||wo?(si&&r&&ei(t),t.flags|=1,No(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function Io(e,t,n,r,s){if(As(n)){var i=!0;Ls(t)}else i=!1;if(Ii(t,s),null===t.stateNode)Ho(e,t),oo(t,n,r),co(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ji(c):c=Ps(t,c=As(n)?js:Ts.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&lo(t,a,r,c),Li=!1;var h=t.memoizedState;a.state=h,Ki(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Is.current||Li?("function"===typeof u&&(so(t,n,u,r),l=t.memoizedState),(o=Li||ao(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:ro(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=ji(l):l=Ps(t,l=As(n)?js:Ts.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&lo(t,a,r,l),Li=!1,h=t.memoizedState,a.state=h,Ki(t,r,a,s);var m=t.memoizedState;o!==d||h!==m||Is.current||Li?("function"===typeof f&&(so(t,n,f,r),m=t.memoizedState),(c=Li||ao(t,n,c,r,h,m,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return jo(e,t,n,r,i,s)}function jo(e,t,n,r,s,i){Co(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ms(t,n,!1),Wo(e,t,i);r=t.stateNode,xo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=xi(t,e.child,null,i),t.child=xi(t,null,o,i)):No(e,t,o,i),t.memoizedState=r.state,s&&Ms(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Rs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rs(0,t.context,!1),Xi(e,t.containerInfo)}function Ao(e,t,n,r,s){return fi(),mi(s),t.flags|=256,No(e,t,n,r),t.child}var Do,Ro,Oo,Lo,Mo={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vo(e,t,n){var r,s=t.pendingProps,a=ea.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),_s(ea,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Fc(l,s,0,null),e=Mc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Fo(n),t.memoizedState=Mo,e):Uo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=ho(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Fc({mode:"visible",children:r.children},s,0,null),(a=Mc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&xi(t,e.child,null,o),t.child.memoizedState=Fo(o),t.memoizedState=Mo,a);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=ho(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),wo||l){if(null!==(r=Pl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Oi(e,s),sc(r,e,s,-1))}return yc(),zo(e,t,o,r=ho(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Gs[Qs++]=Xs,Gs[Qs++]=Js,Gs[Qs++]=Ys,Xs=e.id,Js=e.overflow,Ys=t),t=Uo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Oc(r,o):(o=Mc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Fo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,s}return e=(o=e.child).sibling,s=Oc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Uo(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&mi(r),xi(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ti(e.return,t,n)}function Ko(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function qo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(No(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_s(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ko(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ta(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ko(t,!0,n,null,i);break;case"together":Ko(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yo(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(t),null;case 1:case 17:return As(t.type)&&Ds(),Qo(t),null;case 3:return r=t.stateNode,Ji(),Es(Is),Es(Ts),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(lc(ii),ii=null))),Ro(e,t),Qo(t),null;case 5:Zi(t);var s=Yi(Qi.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Qo(t),null}if(e=Yi(Wi.current),di(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hs]=t,r[fs]=a,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(s=0;s<Or.length;s++)Vr(Or[s],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,a),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Vr("invalid",r);break;case"textarea":se(r,a),Vr("invalid",r)}for(var l in ve(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[fs]=r,Do(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),s=r;break;case"iframe":case"object":case"embed":Vr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Or.length;s++)Vr(Or[s],e);s=r;break;case"source":Vr("error",e),s=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),s=r;break;case"details":Vr("toggle",e),s=r;break;case"input":X(e,r),s=Y(e,r),Vr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Vr("invalid",e)}for(a in ve(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Vr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qo(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Yi(Qi.current),Yi(Wi.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(a=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Qo(t),null;case 13:if(Es(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,a=!1;else if(a=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hs]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qo(t),a=!1}else null!==ii&&(lc(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ll&&(Ll=3):yc())),null!==t.updateQueue&&(t.flags|=4),Qo(t),null);case 4:return Ji(),Ro(e,t),null===e&&Br(t.stateNode.containerInfo),Qo(t),null;case 10:return Ci(t.type._context),Qo(t),null;case 19:if(Es(ea),null===(a=t.memoizedState))return Qo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Go(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Go(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _s(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>ql&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!si)return Qo(t),null}else 2*Je()-a.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=ea.current,_s(ea,r?1&n|2:1&n),t):(Qo(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Qo(t),6&t.subtreeFlags&&(t.flags|=8192)):Qo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Xo(e,t){switch(ti(t),t.tag){case 1:return As(t.type)&&Ds(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ji(),Es(Is),Es(Ts),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zi(t),null;case 13:if(Es(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Es(ea),null;case 4:return Ji(),null;case 10:return Ci(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Do=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(){},Oo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Yi(Wi.current);var i,a=null;switch(n){case"input":s=Y(e,s),r=Y(e,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Lo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,$o=!1,Zo="function"===typeof WeakSet?WeakSet:Set,el=null;function tl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function nl(e,t,n){try{n()}catch(r){_c(e,t,r)}}var rl=!1;function sl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&nl(t,n,i)}s=s.next}while(s!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[fs],delete t[ps],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ll(e){return 5===e.tag||3===e.tag||4===e.tag}function cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ll(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}var hl=null,fl=!1;function ml(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:$o||tl(n,t);case 6:var r=hl,s=fl;hl=null,ml(e,t,n),fl=s,null!==(hl=r)&&(fl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(fl?(e=hl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Bt(e)):ls(hl,n.stateNode));break;case 4:r=hl,s=fl,hl=n.stateNode.containerInfo,fl=!0,ml(e,t,n),hl=r,fl=s;break;case 0:case 11:case 14:case 15:if(!$o&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&nl(n,t,a),s=s.next}while(s!==r)}ml(e,t,n);break;case 1:if(!$o&&(tl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){_c(n,t,o)}ml(e,t,n);break;case 21:ml(e,t,n);break;case 22:1&n.mode?($o=(r=$o)||null!==n.memoizedState,ml(e,t,n),$o=r):ml(e,t,n);break;default:ml(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zo),t.forEach(function(t){var r=jc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function yl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,fl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===hl)throw Error(i(160));pl(a,o,s),hl=null,fl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){_c(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yl(t,e),bl(e),4&r){try{sl(3,e,e.return),il(3,e)}catch(g){_c(e,e.return,g)}try{sl(5,e,e.return)}catch(g){_c(e,e.return,g)}}break;case 1:yl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return);break;case 5:if(yl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){_c(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(s,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):b(s,d,h,u)}switch(l){case"input":$(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;null!=m?ne(s,!!a.multiple,m,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[fs]=a}catch(g){_c(e,e.return,g)}}break;case 6:if(yl(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){_c(e,e.return,g)}}break;case 3:if(yl(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){_c(e,e.return,g)}break;case 4:default:yl(t,e),bl(e);break;case 13:yl(t,e),bl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Kl=Je())),4&r&&gl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($o=(u=$o)||d,yl(t,e),$o=u):yl(t,e),bl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(el=e,d=e.child;null!==d;){for(h=el=d;null!==el;){switch(m=(f=el).child,f.tag){case 0:case 11:case 14:case 15:sl(4,f,f.return);break;case 1:tl(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){_c(r,n,g)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){kl(h);continue}}null!==m?(m.return=f,el=m):kl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(g){_c(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){_c(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yl(t,e),bl(e),4&r&&gl(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ll(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),dl(e,cl(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;ul(e,cl(e),a);break;default:throw Error(i(161))}}catch(da){_c(e,e.return,da)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){el=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==el;){var s=el,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Jo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||$o;o=Jo;var c=$o;if(Jo=a,($o=l)&&!c)for(el=s;null!==el;)l=(a=el).child,22===a.tag&&null!==a.memoizedState?Sl(s):null!==l?(l.return=a,el=l):Sl(s);for(;null!==i;)el=i,wl(i,t,n),i=i.sibling;el=s,Jo=o,$o=c}Nl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,el=i):Nl(e)}}function Nl(e){for(;null!==el;){var t=el;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$o)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ro(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(i(163))}$o||512&t.flags&&al(t)}catch(f){_c(t,t.return,f)}}if(t===e){el=null;break}if(null!==(n=t.sibling)){n.return=t.return,el=n;break}el=t.return}}function kl(e){for(;null!==el;){var t=el;if(t===e){el=null;break}var n=t.sibling;if(null!==n){n.return=t.return,el=n;break}el=t.return}}function Sl(e){for(;null!==el;){var t=el;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(da){_c(t,n,da)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(da){_c(t,s,da)}}var i=t.return;try{al(t)}catch(da){_c(t,i,da)}break;case 5:var a=t.return;try{al(t)}catch(da){_c(t,a,da)}}}catch(da){_c(t,t.return,da)}if(t===e){el=null;break}var o=t.sibling;if(null!==o){o.return=t.return,el=o;break}el=t.return}}var El,_l=Math.ceil,Cl=x.ReactCurrentDispatcher,Tl=x.ReactCurrentOwner,Il=x.ReactCurrentBatchConfig,jl=0,Pl=null,Al=null,Dl=0,Rl=0,Ol=Ss(0),Ll=0,Ml=null,Fl=0,Vl=0,Ul=0,zl=null,Bl=null,Kl=0,ql=1/0,Hl=null,Wl=!1,Gl=null,Ql=null,Yl=!1,Xl=null,Jl=0,$l=0,Zl=null,ec=-1,tc=0;function nc(){return 0!==(6&jl)?Je():-1!==ec?ec:ec=Je()}function rc(e){return 0===(1&e.mode)?1:0!==(2&jl)&&0!==Dl?Dl&-Dl:null!==pi.transition?(0===tc&&(tc=pt()),tc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function sc(e,t,n,r){if(50<$l)throw $l=0,Zl=null,Error(i(185));yt(e,n,r),0!==(2&jl)&&e===Pl||(e===Pl&&(0===(2&jl)&&(Vl|=n),4===Ll&&cc(e,Dl)),ic(e,r),1===n&&0===jl&&0===(1&t.mode)&&(ql=Je()+500,Vs&&Bs()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===Pl?Dl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vs=!0,zs(e)}(uc.bind(null,e)):zs(uc.bind(null,e)),as(function(){0===(6&jl)&&Bs()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(ec=-1,tc=0,0!==(6&jl))throw Error(i(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=ht(e,e===Pl?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var s=jl;jl|=2;var a=gc();for(Pl===e&&Dl===t||(Hl=null,ql=Je()+500,mc(e,t));;)try{xc();break}catch(l){pc(e,l)}_i(),Cl.current=a,jl=s,null!==Al?t=0:(Pl=null,Dl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(s=mt(e))&&(r=s,t=oc(e,s))),1===t)throw n=Ml,mc(e,0),cc(e,r),ic(e,Je()),n;if(6===t)cc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=vc(e,r))&&(0!==(a=mt(e))&&(r=a,t=oc(e,a))),1===t))throw n=Ml,mc(e,0),cc(e,r),ic(e,Je()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:kc(e,Bl,Hl);break;case 3:if(cc(e,r),(130023424&r)===r&&10<(t=Kl+500-Je())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){nc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(kc.bind(null,e,Bl,Hl),t);break}kc(e,Bl,Hl);break;case 4:if(cc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){e.timeoutHandle=rs(kc.bind(null,e,Bl,Hl),r);break}kc(e,Bl,Hl);break;default:throw Error(i(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Bl,Bl=n,null!==t&&lc(t)),e}function lc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function cc(e,t){for(t&=~Ul,t&=~Vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&jl))throw Error(i(327));Sc();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,mc(e,0),cc(e,t),ic(e,Je()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,Bl,Hl),ic(e,Je()),null}function dc(e,t){var n=jl;jl|=1;try{return e(t)}finally{0===(jl=n)&&(ql=Je()+500,Vs&&Bs())}}function hc(e){null!==Xl&&0===Xl.tag&&0===(6&jl)&&Sc();var t=jl;jl|=1;var n=Il.transition,r=bt;try{if(Il.transition=null,bt=1,e)return e()}finally{bt=r,Il.transition=n,0===(6&(jl=t))&&Bs()}}function fc(){Rl=Ol.current,Es(Ol)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ds();break;case 3:Ji(),Es(Is),Es(Ts),ra();break;case 5:Zi(r);break;case 4:Ji();break;case 13:case 19:Es(ea);break;case 10:Ci(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Pl=e,Al=e=Oc(e.current,null),Dl=Rl=t,Ll=0,Ml=null,Ul=Vl=Fl=0,Bl=zl=null,null!==Pi){for(t=0;t<Pi.length;t++)if(null!==(r=(n=Pi[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Pi=null}return e}function pc(e,t){for(;;){var n=Al;try{if(_i(),sa.current=Za,ua){for(var r=oa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=oa=null,ha=!1,fa=0,Tl.current=null,null===n||null===n.return){Ll=1,Ml=t,Al=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=vo(o);if(null!==m){m.flags&=-257,bo(m,o,l,0,t),1&m.mode&&yo(a,u,t),c=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){yo(a,u,t),yc();break e}c=Error(i(426))}else if(si&&1&l.mode){var y=vo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),bo(y,o,l,0,t),mi(uo(c,l));break e}}a=c=uo(c,l),4!==Ll&&(Ll=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,po(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ql||!Ql.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,go(a,l,t));break e}}a=a.return}while(null!==a)}Nc(n)}catch(x){t=x,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function gc(){var e=Cl.current;return Cl.current=Za,null===e?Za:e}function yc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Pl||0===(268435455&Fl)&&0===(268435455&Vl)||cc(Pl,Dl)}function vc(e,t){var n=jl;jl|=2;var r=gc();for(Pl===e&&Dl===t||(Hl=null,mc(e,t));;)try{bc();break}catch(s){pc(e,s)}if(_i(),jl=n,Cl.current=r,null!==Al)throw Error(i(261));return Pl=null,Dl=0,Ll}function bc(){for(;null!==Al;)wc(Al)}function xc(){for(;null!==Al&&!Ye();)wc(Al)}function wc(e){var t=El(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?Nc(e):Al=t,Tl.current=null}function Nc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Rl)))return void(Al=n)}else{if(null!==(n=Xo(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ll=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ll&&(Ll=5)}function kc(e,t,n){var r=bt,s=Il.transition;try{Il.transition=null,bt=1,function(e,t,n,r){do{Sc()}while(null!==Xl);if(0!==(6&jl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Pl&&(Al=Pl=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Pc(tt,function(){return Sc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Il.transition,Il.transition=null;var o=bt;bt=1;var l=jl;jl|=4,Tl.current=null,function(e,t){if(es=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(Ai){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},qt=!1,el=t;null!==el;)if(e=(t=el).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,el=e;else for(;null!==el;){t=el;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,y=p.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ro(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(Ai){_c(t,t.return,Ai)}if(null!==(e=t.sibling)){e.return=t.return,el=e;break}el=t.return}p=rl,rl=!1}(e,n),vl(n,e),mr(ts),qt=!!es,ts=es=null,e.current=n,xl(n,e,s),Xe(),jl=l,bt=o,Il.transition=a}else e.current=n;if(Yl&&(Yl=!1,Xl=e,Jl=s),a=e.pendingLanes,0===a&&(Ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wl)throw Wl=!1,e=Gl,Gl=null,e;0!==(1&Jl)&&0!==e.tag&&Sc(),a=e.pendingLanes,0!==(1&a)?e===Zl?$l++:($l=0,Zl=e):$l=0,Bs()}(e,t,n,r)}finally{Il.transition=s,bt=r}return null}function Sc(){if(null!==Xl){var e=xt(Jl),t=Il.transition,n=bt;try{if(Il.transition=null,bt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Jl=0,0!==(6&jl))throw Error(i(331));var s=jl;for(jl|=4,el=e.current;null!==el;){var a=el,o=a.child;if(0!==(16&el.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(el=u;null!==el;){var d=el;switch(d.tag){case 0:case 11:case 15:sl(8,d,a)}var h=d.child;if(null!==h)h.return=d,el=h;else for(;null!==el;){var f=(d=el).sibling,m=d.return;if(ol(d),d===u){el=null;break}if(null!==f){f.return=m,el=f;break}el=m}}}var p=a.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}el=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,el=o;else e:for(;null!==el;){if(0!==(2048&(a=el).flags))switch(a.tag){case 0:case 11:case 15:sl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,el=v;break e}el=a.return}}var b=e.current;for(el=b;null!==el;){var x=(o=el).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,el=x;else e:for(o=b;null!==el;){if(0!==(2048&(l=el).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(N){_c(l,l.return,N)}if(l===o){el=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,el=w;break e}el=l.return}}if(jl=s,Bs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(N){}r=!0}return r}finally{bt=n,Il.transition=t}}return!1}function Ec(e,t,n){e=Ui(e,t=po(0,t=uo(n,t),1),1),t=nc(),null!==e&&(yt(e,1,t),ic(e,t))}function _c(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ql||!Ql.has(r))){t=Ui(t,e=go(t,e=uo(n,e),1),1),e=nc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Dl&n)===n&&(4===Ll||3===Ll&&(130023424&Dl)===Dl&&500>Je()-Kl?mc(e,0):Ul|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=nc();null!==(e=Oi(e,t))&&(yt(e,t,n),ic(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function jc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Tc(e,n)}function Pc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Rc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Mc(n.children,s,a,t);case S:o=8,s|=8;break;case E:return(e=Dc(12,n,t,2|s)).elementType=E,e.lanes=a,e;case I:return(e=Dc(13,n,t,s)).elementType=I,e.lanes=a,e;case j:return(e=Dc(19,n,t,s)).elementType=j,e.lanes=a,e;case D:return Fc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:o=10;break e;case C:o=9;break e;case T:o=11;break e;case P:o=14;break e;case A:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Dc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Mc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Vc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,s,i,a,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Dc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mi(i),e}function Kc(e){if(!e)return Cs;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(As(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(As(n))return Os(e,n,t)}return t}function qc(e,t,n,r,s,i,a,o,l){return(e=Bc(n,r,!0,e,0,i,0,o,l)).context=Kc(null),n=e.current,(i=Vi(r=nc(),s=rc(n))).callback=void 0!==t&&null!==t?t:null,Ui(n,i,s),e.current.lanes=s,yt(e,s,r),ic(e,r),e}function Hc(e,t,n,r){var s=t.current,i=nc(),a=rc(s);return n=Kc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Vi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ui(s,t,a))&&(sc(e,s,a,i),zi(e,s,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Is.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),fi();break;case 5:$i(t);break;case 1:As(t.type)&&Ls(t);break;case 4:Xi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;_s(Ni,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_s(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Vo(e,t,n):(_s(ea,1&ea.current),null!==(e=Wo(e,t,n))?e.sibling:null);_s(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),_s(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,_o(e,t,n)}return Wo(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,si&&0!==(1048576&t.flags)&&Zs(t,Ws,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ho(e,t),e=t.pendingProps;var s=Ps(t,Ts.current);Ii(t,n),s=ya(null,t,r,e,s,n);var a=va();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,As(r)?(a=!0,Ls(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Mi(t),s.updater=io,t.stateNode=s,s._reactInternals=t,co(t,r,e,n),t=jo(null,t,r,!0,a,n)):(t.tag=0,si&&a&&ei(t),No(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(r),e=ro(r,e),s){case 0:t=To(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=ko(null,t,r,e,n);break e;case 14:t=So(null,t,r,ro(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,To(e,t,r,s=t.elementType===r?s:ro(r,s),n);case 1:return r=t.type,s=t.pendingProps,Io(e,t,r,s=t.elementType===r?s:ro(r,s),n);case 3:e:{if(Po(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Fi(e,t),Ki(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ao(e,t,r,n,s=uo(Error(i(423)),t));break e}if(r!==s){t=Ao(e,t,r,n,s=uo(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=Wo(e,t,n);break e}No(e,t,r,n)}t=t.child}return t;case 5:return $i(t),null===e&&ci(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==a&&ns(r,a)&&(t.flags|=32),Co(e,t),No(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Vo(e,t,n);case 4:return Xi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xi(t,null,r,n):No(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,ko(e,t,r,s=t.elementType===r?s:ro(r,s),n);case 7:return No(e,t,t.pendingProps,n),t.child;case 8:case 12:return No(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,_s(Ni,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!Is.current){t=Wo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Vi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ti(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ti(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}No(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ii(t,n),r=r(s=ji(s)),t.flags|=1,No(e,t,r,n),t.child;case 14:return s=ro(r=t.type,t.pendingProps),So(e,t,r,s=ro(r.type,s),n);case 15:return Eo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ro(r,s),Ho(e,t),t.tag=1,As(r)?(e=!0,Ls(t)):e=!1,Ii(t,n),oo(t,r,s),co(t,r,s,n),jo(null,t,r,!0,e,n);case 19:return qo(e,t,n);case 22:return _o(e,t,n)}throw Error(i(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function eu(){}function tu(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Wc(a);o.call(e)}}Hc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Wc(a);i.call(e)}}var a=qc(t,r,e,0,null,!1,0,"",eu);return e._reactRootContainer=a,e[ms]=a.current,Br(8===e.nodeType?e.parentNode:e),hc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Wc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",eu);return e._reactRootContainer=l,e[ms]=l.current,Br(8===e.nodeType?e.parentNode:e),hc(function(){Hc(t,l,n,r)}),l}(n,t,e,s,r);return Wc(a)}Jc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Hc(e,t,null,null)},Jc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc(function(){Hc(null,e,null,null)}),t[ms]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Je()),0===(6&jl)&&(ql=Je()+500,Bs()))}break;case 13:hc(function(){var t=Oi(e,1);if(null!==t){var n=nc();sc(t,e,1,n)}}),Qc(e,1)}},Nt=function(e){if(13===e.tag){var t=Oi(e,134217728);if(null!==t)sc(t,e,134217728,nc());Qc(e,134217728)}},kt=function(e){if(13===e.tag){var t=rc(e),n=Oi(e,t);if(null!==n)sc(n,e,t,nc());Qc(e,t)}},St=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ne=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));G(r),$(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=dc,Ie=hc;var nu={usingClientEntryPoint:!1,Events:[bs,xs,ws,_e,Ce,dc]},ru={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},su={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{st=iu.inject(su),it=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(i(299));var n=!1,r="",s=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,s),e[ms]=t.current,Br(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(i(200));return tu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ms]=t.current,Br(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Jc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(i(200));return tu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(i(40));return!!e._reactRootContainer&&(hc(function(){tu(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0)},t.unstable_batchedUpdates=dc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return tu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),s=n(391);function i(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function l(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var f={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const m=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],p=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:c,iconNode:d}=e,p=i(e,m);return(0,r.createElement)("svg",u(u(u({ref:t},f),{},{width:s,height:s,stroke:n,strokeWidth:o?24*Number(a)/Number(s):a,className:h("lucide",l)},!c&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(p)&&{"aria-hidden":"true"}),p),[...d.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(c)?c:[c]])}),g=["className"],y=(e,t)=>{const n=(0,r.forwardRef)((n,s)=>{let{className:a}=n,o=i(n,g);return(0,r.createElement)(p,u({ref:s,iconNode:t,className:h("lucide-".concat((l=d(e),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),a)},o));var l});return n.displayName=d(e),n},v=y("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),b=y("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),x=y("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),w=y("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]),N=y("factory",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),k=y("chart-no-axes-column",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),S=y("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),E=y("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),_=y("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),C=y("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),T=y("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),I=y("leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),j=y("droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]),P=y("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),A=y("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),D=y("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),R=y("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),O=y("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),L=y("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),M=y("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),F=y("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),V=y("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),U=y("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),z=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},B={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(z(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new K;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class K extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q=function(e){return function(e){const t=z(e);return B.encodeByteArray(t,!0)}(e).replace(/\./g,"")},H=function(e){try{return B.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function W(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const G=()=>{try{return W().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&H(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Q=e=>{var t;return null===(t=G())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},Y=()=>{var e;return null===(e=G())||void 0===e?void 0:e.config},X=e=>{var t;return null===(t=G())||void 0===t?void 0:t["_".concat(e)]};class J{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function $(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Z(e){return(await fetch(e,{credentials:"include"})).ok}const ee={};let te=!1;function ne(e,t){if("undefined"===typeof window||"undefined"===typeof document||!$(window.location.host)||ee[e]===t||ee[e]||te)return;function n(e){return"__firebase__banner__".concat(e)}ee[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(ee))ee[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{te=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function re(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function se(){var e;const t=null===(e=G())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function ie(){return!se()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ae(){try{return"object"===typeof indexedDB}catch(e){return!1}}class oe extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,le.prototype.create)}}class le{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(ce,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new oe(n,i,t)}}const ce=/\{\$([^}]+)}/g;function ue(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(de(n)&&de(i)){if(!ue(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function de(e){return null!==e&&"object"===typeof e}function he(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function fe(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function me(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class pe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ge),void 0===r.error&&(r.error=ge),void 0===r.complete&&(r.complete=ge);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ge(){}function ye(e){return e&&e._delegate?e._delegate:e}class ve{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const be="[DEFAULT]";class xe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new J;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:be})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===be?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be;return this.component?this.component.multipleInstances?e:be:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class we{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ne=[];var ke;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ke||(ke={}));const Se={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Ee=ke.INFO,_e={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Ce=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=_e[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class Te{constructor(e){this.name=e,this._logLevel=Ee,this._logHandler=Ce,this._userLogHandler=null,Ne.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Se[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...t),this._logHandler(this,ke.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...t),this._logHandler(this,ke.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ke.INFO,...t),this._logHandler(this,ke.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ke.WARN,...t),this._logHandler(this,ke.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...t),this._logHandler(this,ke.ERROR,...t)}}let Ie,je;const Pe=new WeakMap,Ae=new WeakMap,De=new WeakMap,Re=new WeakMap,Oe=new WeakMap;let Le={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ae.get(e);if("objectStoreNames"===t)return e.objectStoreNames||De.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ve(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Me(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(je||(je=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ue(this),n),Ve(Pe.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ve(e.apply(Ue(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(Ue(this),t,...r);return De.set(i,t.sort?t.sort():[t]),Ve(i)}}function Fe(e){return"function"===typeof e?Me(e):(e instanceof IDBTransaction&&function(e){if(Ae.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});Ae.set(e,t)}(e),t=e,(Ie||(Ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Le):e);var t}function Ve(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(Ve(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Pe.set(t,e)}).catch(()=>{}),Oe.set(t,e),t}(e);if(Re.has(e))return Re.get(e);const t=Fe(e);return t!==e&&(Re.set(e,t),Oe.set(t,e)),t}const Ue=e=>Oe.get(e);const ze=["get","getKey","getAll","getAllKeys","count"],Be=["put","add","delete","clear"],Ke=new Map;function qe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ke.get(t))return Ke.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Be.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!ze.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return Ke.set(t,i),i}Le=(e=>u(u({},e),{},{get:(t,n,r)=>qe(t,n)||e.get(t,n,r),has:(t,n)=>!!qe(t,n)||e.has(t,n)}))(Le);class He{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const We="@firebase/app",Ge="0.14.1",Qe=new Te("@firebase/app"),Ye="@firebase/app-compat",Xe="@firebase/analytics-compat",Je="@firebase/analytics",$e="@firebase/app-check-compat",Ze="@firebase/app-check",et="@firebase/auth",tt="@firebase/auth-compat",nt="@firebase/database",rt="@firebase/data-connect",st="@firebase/database-compat",it="@firebase/functions",at="@firebase/functions-compat",ot="@firebase/installations",lt="@firebase/installations-compat",ct="@firebase/messaging",ut="@firebase/messaging-compat",dt="@firebase/performance",ht="@firebase/performance-compat",ft="@firebase/remote-config",mt="@firebase/remote-config-compat",pt="@firebase/storage",gt="@firebase/storage-compat",yt="@firebase/firestore",vt="@firebase/ai",bt="@firebase/firestore-compat",xt="firebase",wt="[DEFAULT]",Nt={[We]:"fire-core",[Ye]:"fire-core-compat",[Je]:"fire-analytics",[Xe]:"fire-analytics-compat",[Ze]:"fire-app-check",[$e]:"fire-app-check-compat",[et]:"fire-auth",[tt]:"fire-auth-compat",[nt]:"fire-rtdb",[rt]:"fire-data-connect",[st]:"fire-rtdb-compat",[it]:"fire-fn",[at]:"fire-fn-compat",[ot]:"fire-iid",[lt]:"fire-iid-compat",[ct]:"fire-fcm",[ut]:"fire-fcm-compat",[dt]:"fire-perf",[ht]:"fire-perf-compat",[ft]:"fire-rc",[mt]:"fire-rc-compat",[pt]:"fire-gcs",[gt]:"fire-gcs-compat",[yt]:"fire-fst",[bt]:"fire-fst-compat",[vt]:"fire-vertex","fire-js":"fire-js",[xt]:"fire-js-all"},kt=new Map,St=new Map,Et=new Map;function _t(e,t){try{e.container.addComponent(t)}catch(n){Qe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ct(e){const t=e.name;if(Et.has(t))return Qe.debug("There were multiple attempts to register component ".concat(t,".")),!1;Et.set(t,e);for(const n of kt.values())_t(n,e);for(const n of St.values())_t(n,e);return!0}function Tt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function It(e){return null!==e&&void 0!==e&&void 0!==e.settings}const jt=new le("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Pt{constructor(e,t,n){this._isDeleted=!1,this._options=u({},e),this._config=u({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ve("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jt.create("app-deleted",{appName:this._name})}}const At="12.1.0";function Dt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=u({name:wt,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!==typeof s||!s)throw jt.create("bad-app-name",{appName:String(s)});if(n||(n=Y()),!n)throw jt.create("no-options");const i=kt.get(s);if(i){if(ue(n,i.options)&&ue(r,i.config))return i;throw jt.create("duplicate-app",{appName:s})}const a=new we(s);for(const l of Et.values())a.addComponent(l);const o=new Pt(n,r,a);return kt.set(s,o),o}function Rt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;const t=kt.get(e);if(!t&&e===wt&&Y())return Dt();if(!t)throw jt.create("no-app",{appName:e});return t}function Ot(e,t,n){var r;let s=null!==(r=Nt[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Qe.warn(e.join(" "))}Ct(new ve("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const Lt="firebase-heartbeat-store";let Mt=null;function Ft(){return Mt||(Mt=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Ve(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Ve(a.result),e.oldVersion,e.newVersion,Ve(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Lt)}catch(n){console.warn(n)}}}).catch(e=>{throw jt.create("idb-open",{originalErrorMessage:e.message})})),Mt}async function Vt(e,t){try{const n=(await Ft()).transaction(Lt,"readwrite"),r=n.objectStore(Lt);await r.put(t,Ut(e)),await n.done}catch(n){if(n instanceof oe)Qe.warn(n.message);else{const e=jt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Qe.warn(e.message)}}}function Ut(e){return"".concat(e.name,"!").concat(e.options.appId)}class zt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Kt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Bt();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Qe.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Bt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),qt(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),qt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=q(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Qe.warn(t),""}}}function Bt(){return(new Date).toISOString().substring(0,10)}class Kt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ae()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Ft()).transaction(Lt),n=await t.objectStore(Lt).get(Ut(e));return await t.done,n}catch(t){if(t instanceof oe)Qe.warn(t.message);else{const e=jt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Qe.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Vt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Vt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function qt(e){return q(JSON.stringify({version:2,heartbeats:e})).length}var Ht;Ht="",Ct(new ve("platform-logger",e=>new He(e),"PRIVATE")),Ct(new ve("heartbeat",e=>new zt(e),"PRIVATE")),Ot(We,Ge,Ht),Ot(We,Ge,"esm2020"),Ot("fire-js","");const Wt=["providerId"],Gt=["uid","auth","stsTokenManager"],Qt=["providerId","signInMethod"];function Yt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Xt=Yt,Jt=new le("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$t=new Te("@firebase/auth");function Zt(e){if($t.logLevel<=ke.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];$t.error("Auth (".concat(At,"): ").concat(e),...n)}}function en(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw sn(e,...n)}function tn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sn(e,...n)}function nn(e,t,n){const r=u(u({},Xt()),{},{[t]:n});return new le("auth","Firebase",r).create(t,{appName:e.name})}function rn(e){return nn(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Jt.create(e,...n)}function an(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw sn(t,...r)}}function on(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Zt(t),new Error(t)}function ln(e,t){e||on(t)}function cn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function un(){return"http:"===dn()||"https:"===dn()}function dn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function hn(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(un()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class fn{constructor(e,t){this.shortDelay=e,this.longDelay=t,ln(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(re())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return hn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mn(e,t){ln(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class pn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void on("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void on("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void on("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},yn=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vn=new fn(3e4,6e4);function bn(e,t){return e.tenantId&&!t.tenantId?u(u({},t),{},{tenantId:e.tenantId}):t}async function xn(e,t,n,r){return wn(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=he(u({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=u({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&$(e.emulatorConfig.host)&&(l.credentials="include"),pn.fetch()(await kn(e,e.config.apiHost,n,a),l)})}async function wn(e,t,n){e._canInitEmulator=!1;const r=u(u({},gn),t);try{const t=new En(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw _n(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw _n(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw _n(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw _n(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw nn(e,o,a);en(e,o)}}catch(s){if(s instanceof oe)throw s;en(e,"network-request-failed",{message:String(s)})}}async function Nn(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await xn(e,t,n,r,s);return"mfaPendingCredential"in i&&en(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function kn(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r),i=e,a=i.config.emulator?mn(e.config,s):"".concat(e.config.apiScheme,"://").concat(s);if(yn.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function Sn(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class En{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(tn(this.auth,"network-request-failed")),vn.get())})}}function _n(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=tn(e,t,r);return s.customData._tokenResponse=n,s}function Cn(e){return void 0!==e&&void 0!==e.enterprise}class Tn{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Sn(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function In(e,t){return xn(e,"GET","/v2/recaptchaConfig",bn(e,t))}async function jn(e,t){return xn(e,"POST","/v1/accounts:lookup",t)}function Pn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function An(e){return 1e3*Number(e)}function Dn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Zt("JWT malformed, contained fewer than 3 sections"),null;try{const e=H(n);return e?JSON.parse(e):(Zt("Failed to decode base64 JWT payload"),null)}catch(s){return Zt("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function Rn(e){const t=Dn(e);return an(t,"internal-error"),an("undefined"!==typeof t.exp,"internal-error"),an("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function On(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof oe&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Ln{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Mn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pn(this.lastLoginAt),this.creationTime=Pn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Fn(e){var t;const n=e.auth,r=await e.getIdToken(),s=await On(e,jn(n,{idToken:r}));an(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=null!==(t=i.providerUserInfo)&&void 0!==t&&t.length?Vn(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Mn(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Vn(e){return e.map(e=>{let{providerId:t}=e,n=i(e,Wt);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Un{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){an(e.idToken,"internal-error"),an("undefined"!==typeof e.idToken,"internal-error"),an("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Rn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){an(0!==e.length,"internal-error");const t=Rn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(an(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await wn(e,{},async()=>{const n=he({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=await kn(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&$(e.emulatorConfig.host)&&(o.credentials="include"),pn.fetch()(i,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new Un;return n&&(an("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(an("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(an("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Un,this.toJSON())}_performRefresh(){return on("not implemented")}}function zn(e,t){an("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Bn{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,s=i(e,Gt);this.providerId="firebase",this.proactiveRefresh=new Ln(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Mn(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await On(this,this.stsTokenManager.getToken(this.auth,e));return an(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ye(e),r=await n.getIdToken(t),s=Dn(r);an(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Pn(An(s.auth_time)),issuedAtTime:Pn(An(s.iat)),expirationTime:Pn(An(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ye(e);await Fn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(an(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>u({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Bn(u(u({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){an(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Fn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(It(this.auth.app))return Promise.reject(rn(this.auth));const e=await this.getIdToken();return await On(this,async function(e,t){return xn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return u(u({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>u({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,m=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:x,isAnonymous:w,providerData:N,stsTokenManager:k}=t;an(b&&k,e,"internal-error");const S=Un.fromJSON(this.name,k);an("string"===typeof b,e,"internal-error"),zn(d,e.name),zn(h,e.name),an("boolean"===typeof x,e,"internal-error"),an("boolean"===typeof w,e,"internal-error"),zn(f,e.name),zn(m,e.name),zn(p,e.name),zn(g,e.name),zn(y,e.name),zn(v,e.name);const E=new Bn({uid:b,auth:e,email:h,emailVerified:x,displayName:d,isAnonymous:w,photoURL:m,phoneNumber:f,tenantId:p,stsTokenManager:S,createdAt:y,lastLoginAt:v});return N&&Array.isArray(N)&&(E.providerData=N.map(e=>u({},e))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Un;r.updateFromServerResponse(t);const s=new Bn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Fn(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];an(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Vn(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null!==s&&void 0!==s&&s.length),a=new Un;a.updateFromIdToken(n);const o=new Bn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Mn(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==s&&void 0!==s&&s.length)};return Object.assign(o,l),o}}const Kn=new Map;function qn(e){ln(e instanceof Function,"Expected a class definition");let t=Kn.get(e);return t?(ln(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Kn.set(e,t),t)}class Hn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Hn.type="NONE";const Wn=Hn;function Gn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Qn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=Gn(this.userKey,r.apiKey,s),this.fullPersistenceKey=Gn("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await jn(this.auth,{idToken:e}).catch(()=>{});return t?Bn._fromGetAccountInfoResponse(this.auth,t,e):null}return Bn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Qn(qn(Wn),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||qn(Wn);const i=Gn(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const r=await jn(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Bn._fromGetAccountInfoResponse(e,r,t)}else n=Bn._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(t){}})),new Qn(s,e,n)):new Qn(s,e,n)}}function Yn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Zn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Xn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(tr(t))return"Blackberry";if(nr(t))return"Webos";if(Jn(t))return"Safari";if((t.includes("chrome/")||$n(t))&&!t.includes("edge/"))return"Chrome";if(er(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Xn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return/firefox\//i.test(e)}function Jn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:re()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return/crios\//i.test(e)}function Zn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return/iemobile/i.test(e)}function er(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return/android/i.test(e)}function tr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return/blackberry/i.test(e)}function nr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return/webos/i.test(e)}function rr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function sr(){return function(){const e=re();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re();return rr(e)||er(e)||nr(e)||tr(e)||/windows phone/i.test(e)||Zn(e)}function ar(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Yn(re());break;case"Worker":t="".concat(Yn(re()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(At,"/").concat(r)}class or{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(s){r(s)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class lr{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class cr{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dr(this),this.idTokenSubscription=new dr(this),this.beforeStateQueue=new or(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qn(t)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await Qn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await jn(this,{idToken:e}),n=await Bn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(It(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var s,i;await this.getOrInitRedirectPersistenceManager();const t=null===(s=this.redirectUser)||void 0===s?void 0:s._redirectEventId,a=null===(i=n)||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==a||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return an(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fn(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(It(this.app))return Promise.reject(rn(this));const t=e?ye(e):null;return t&&an(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&an(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return It(this.app)?Promise.reject(rn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return It(this.app)?Promise.reject(rn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return xn(e,"GET","/v2/passwordPolicy",bn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new lr(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new le("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return xn(e,"POST","/v2/accounts:revokeToken",bn(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qn(e)||this._popupRedirectResolver;an(t,this,"argument-error"),this.redirectPersistenceManager=await Qn.create(this,[qn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(an(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return an(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ar(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(It(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if($t.logLevel<=ke.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];$t.warn("Auth (".concat(At,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ur(e){return ye(e)}class dr{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new pe(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return an(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let hr={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fr(e){return hr.loadJS(e)}function mr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class pr{constructor(){this.enterprise=new gr}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class gr{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const yr="NO_RECAPTCHA";class vr{constructor(e){this.type="recaptcha-enterprise",this.auth=ur(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Cn(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(yr)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new pr).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{In(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Tn(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Cn(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=hr.recaptchaEnterpriseScript;0!==t.length&&(t+=s),fr(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function br(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new vr(e);let a;if(s)a=yr;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const o=u({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function xr(e,t,n,r,s){if("EMAIL_PASSWORD_PROVIDER"===s){var i;if(null!==(i=e._getRecaptchaConfig())&&void 0!==i&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await br(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await br(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const s=await br(e,t,n);return r(e,s).catch(async s=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(s.code==="auth/".concat("missing-recaptcha-token")||s.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const s=await br(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await br(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function wr(e){const t=ur(e),n=await In(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Tn(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new vr(t).verify()}}function Nr(e,t,n){const r=ur(e);an(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!(null===n||void 0===n||!n.disableWarnings),i=kr(t),{host:a,port:o}=function(e){const t=kr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Sr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Sr(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(i,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return an(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void an(ue(c,r.config.emulator)&&ue(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,$(a)?(Z("".concat(i,"//").concat(a).concat(l)),ne("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function kr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Sr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Er{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return on("not implemented")}_getIdTokenResponse(e){return on("not implemented")}_linkToIdToken(e,t){return on("not implemented")}_getReauthenticationResolver(e){return on("not implemented")}}async function _r(e,t){return xn(e,"POST","/v1/accounts:signUp",t)}async function Cr(e,t){return Nn(e,"POST","/v1/accounts:signInWithPassword",bn(e,t))}class Tr extends Er{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Tr(e,t,"password")}static _fromEmailAndCode(e,t){return new Tr(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return xr(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Cr,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Nn(e,"POST","/v1/accounts:signInWithEmailLink",bn(e,t))}(e,{email:this._email,oobCode:this._password});default:en(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return xr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_r,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Nn(e,"POST","/v1/accounts:signInWithEmailLink",bn(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:en(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ir(e,t){return Nn(e,"POST","/v1/accounts:signInWithIdp",bn(e,t))}class jr extends Er{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):en("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=i(t,Qt);if(!n||!r)return null;const a=new jr(n,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return Ir(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ir(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ir(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=he(t)}return e}}async function Pr(e,t){return xn(e,"POST","/v1/accounts:sendVerificationCode",bn(e,t))}const Ar={USER_NOT_FOUND:"user-not-found"};class Dr extends Er{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Dr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Dr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Nn(e,"POST","/v1/accounts:signInWithPhoneNumber",bn(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Nn(e,"POST","/v1/accounts:signInWithPhoneNumber",bn(e,t));if(n.temporaryProof)throw _n(e,"account-exists-with-different-credential",n);return n}(e,u({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Nn(e,"POST","/v1/accounts:signInWithPhoneNumber",bn(e,u(u({},t),{},{operation:"REAUTH"})),Ar)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Dr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Rr{constructor(e){var t,n,r,s,i,a;const o=fe(me(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);an(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.lang)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=fe(me(e)).link,n=t?fe(me(t)).deep_link_id:null,r=fe(me(e)).deep_link_id;return(r?fe(me(r)).link:null)||r||n||t||e}(e);try{return new Rr(t)}catch(n){return null}}}class Or{constructor(){this.providerId=Or.PROVIDER_ID}static credential(e,t){return Tr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Rr.parseLink(t);return an(n,"argument-error"),Tr._fromEmailAndCode(e,n.code,n.tenantId)}}Or.PROVIDER_ID="password",Or.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Or.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Lr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mr extends Lr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fr extends Mr{constructor(){super("facebook.com")}static credential(e){return jr._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Fr.credential(t.oauthAccessToken)}catch(n){return null}}}Fr.FACEBOOK_SIGN_IN_METHOD="facebook.com",Fr.PROVIDER_ID="facebook.com";class Vr extends Mr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return jr._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Vr.credential(n,r)}catch(s){return null}}}Vr.GOOGLE_SIGN_IN_METHOD="google.com",Vr.PROVIDER_ID="google.com";class Ur extends Mr{constructor(){super("github.com")}static credential(e){return jr._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ur.credential(t.oauthAccessToken)}catch(n){return null}}}Ur.GITHUB_SIGN_IN_METHOD="github.com",Ur.PROVIDER_ID="github.com";class zr extends Mr{constructor(){super("twitter.com")}static credential(e,t){return jr._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return zr.credential(n,r)}catch(s){return null}}}zr.TWITTER_SIGN_IN_METHOD="twitter.com",zr.PROVIDER_ID="twitter.com";class Br{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await Bn._fromIdTokenResponse(e,n,r),i=Kr(n);return new Br({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Kr(n);return new Br({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Kr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class qr extends oe{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,qr.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new qr(e,t,n,r)}}function Hr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw qr._fromErrorAndOperation(e,n,t,r);throw n})}async function Wr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await On(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Br._forOperation(e,"link",r)}async function Gr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(It(r.app))return Promise.reject(rn(r));const s="reauthenticate";try{const i=await On(e,Hr(r,s,t,e),n);an(i.idToken,r,"internal-error");const a=Dn(i.idToken);an(a,r,"internal-error");const{sub:o}=a;return an(e.uid===o,r,"user-mismatch"),Br._forOperation(e,s,i)}catch(i){throw(null===i||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&en(r,"user-mismatch"),i}}async function Qr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(It(e.app))return Promise.reject(rn(e));const r="signIn",s=await Hr(e,r,t),i=await Br._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function Yr(e,t){return Qr(ur(e),t)}async function Xr(e){const t=ur(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Jr(e,t){return xn(e,"POST","/v2/accounts/mfaEnrollment:start",bn(e,t))}new WeakMap;const $r="__sak";class Zr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem($r,"1"),this.storage.removeItem($r),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class es extends Zr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ir(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);sr()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}es.type="LOCAL";const ts=es;function ns(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(s))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function rs(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class ss{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=rs(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return ns(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=rs(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=rs(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=ns(n);const s=setInterval(()=>{const e=ns(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}ss.type="COOKIE";class is extends Zr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}is.type="SESSION";const as=is;class os{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new os(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(null===i||void 0===i||!i.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}os.receivers=[];class cs{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=ls("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function us(){return window}function ds(){return"undefined"!==typeof us().WorkerGlobalScope&&"function"===typeof us().importScripts}const hs="firebaseLocalStorageDb",fs="firebaseLocalStorage",ms="fbase_key";class ps{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gs(e,t){return e.transaction([fs],t?"readwrite":"readonly").objectStore(fs)}function ys(){const e=indexedDB.open(hs,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(fs,{keyPath:ms})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(fs)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(hs);return new ps(e).toPromise()}(),t(await ys()))})})}async function vs(e,t,n){const r=gs(e,!0).put({[ms]:t,value:n});return new ps(r).toPromise()}function bs(e,t){const n=gs(e,!0).delete(t);return new ps(n).toPromise()}class xs{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ys()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ds()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=os._getInstance(ds()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new cs(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ys();return await vs(e,$r,"1"),await bs(e,$r),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>vs(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=gs(e,!1).get(t),r=await new ps(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>bs(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=gs(e,!1).getAll();return new ps(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}xs.type="LOCAL";const ws=xs;function Ns(e,t){return xn(e,"POST","/v2/accounts/mfaSignIn:start",bn(e,t))}mr("rcb"),new fn(3e4,6e4);const ks="recaptcha";async function Ss(e,t,n){if(!e._getRecaptchaConfig())try{await wr(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){an("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=xr(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===yr){an((null===n||void 0===n?void 0:n.type)===ks,e,"argument-error");return Jr(e,await Es(e,t,n))}return Jr(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;an("signin"===t.type,e,"internal-error");const i=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;an(i,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=xr(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===yr){an((null===n||void 0===n?void 0:n.type)===ks,e,"argument-error");return Ns(e,await Es(e,t,n))}return Ns(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=xr(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===yr){an((null===n||void 0===n?void 0:n.type)===ks,e,"argument-error");return Pr(e,await Es(e,t,n))}return Pr(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Es(e,t,n){an(n.type===ks,e,"argument-error");const r=await n.verify();an("string"===typeof r,e,"argument-error");const s=u({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class _s{constructor(e){this.providerId=_s.PROVIDER_ID,this.auth=ur(e)}verifyPhoneNumber(e,t){return Ss(this.auth,e,ye(t))}static credential(e,t){return Dr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return _s.credentialFromTaggedObject(t)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Dr._fromTokenResponse(n,r):null}}function Cs(e,t){return t?qn(t):(an(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}_s.PROVIDER_ID="phone",_s.PHONE_SIGN_IN_METHOD="phone";class Ts extends Er{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ir(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ir(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ir(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Is(e){return Qr(e.auth,new Ts(e),e.bypassAuthState)}function js(e){const{auth:t,user:n}=e;return an(n,t,"internal-error"),Gr(n,new Ts(e),e.bypassAuthState)}async function Ps(e){const{auth:t,user:n}=e;return an(n,t,"internal-error"),Wr(n,new Ts(e),e.bypassAuthState)}class As{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Is;case"linkViaPopup":case"linkViaRedirect":return Ps;case"reauthViaPopup":case"reauthViaRedirect":return js;default:en(this.auth,"internal-error")}}resolve(e){ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ds=new fn(2e3,1e4);class Rs extends As{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Rs.currentPopupAction&&Rs.currentPopupAction.cancel(),Rs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return an(e,this.auth,"internal-error"),e}async onExecution(){ln(1===this.filter.length,"Popup operations only handle one event");const e=ls();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tn(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Ds.get())};e()}}Rs.currentPopupAction=null;const Os=new Map;class Ls extends As{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Os.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Vs(t),r=Fs(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Os.set(this.auth._key(),e)}return this.bypassAuthState||Os.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ms(e,t){Os.set(e._key(),t)}function Fs(e){return qn(e._redirectPersistence)}function Vs(e){return Gn("pendingRedirect",e.config.apiKey,e.name)}async function Us(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(It(e.app))return Promise.reject(rn(e));const r=ur(e),s=Cs(r,t),i=new Ls(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class zs{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ks(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Ks(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(tn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bs(e))}saveEventToCache(e){this.cachedEventUids.add(Bs(e)),this.lastProcessedEventTime=Date.now()}}function Bs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ks(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const qs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hs=/^https?/;async function Ws(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return xn(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Gs(r))return}catch(n){}en(e,"unauthorized-domain")}function Gs(e){const t=cn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Hs.test(n))return!1;if(qs.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Qs=new fn(3e4,6e4);function Ys(){const e=us().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Xs(e){return new Promise((t,n)=>{var r,s;function i(){Ys(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ys(),n(tn(e,"network-request-failed"))},timeout:Qs.get()})}if(null!==(r=us().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(s=us().gapi)||void 0===s||!s.load){const t=mr("iframefcb");return us()[t]=()=>{gapi.load?i():n(tn(e,"network-request-failed"))},fr("".concat(hr.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}i()}}).catch(e=>{throw Js=null,e})}let Js=null;const $s=new fn(5e3,15e3),Zs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ei=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ti(e){const t=e.config;an(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?mn(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:At},s=ei.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(he(r).slice(1))}async function ni(e){const t=await function(e){return Js=Js||Xs(e),Js}(e),n=us().gapi;return an(n,e,"internal-error"),t.open({where:document.body,url:ti(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zs,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=tn(e,"network-request-failed"),i=us().setTimeout(()=>{r(s)},$s.get());function a(){us().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const ri={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class si{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function ii(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=u(u({},ri),{},{width:r.toString(),height:s.toString(),top:i,left:a}),c=re().toLowerCase();n&&(o=$n(c)?"_blank":n),Xn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return rr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:re())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new si(null);const h=window.open(t||"",o,d);an(h,e,"popup-blocked");try{h.focus()}catch(f){}return new si(h)}const ai="__/auth/handler",oi="emulator/auth/handler",li=encodeURIComponent("fac");async function ci(e,t,n,r,s,i){an(e.config.authDomain,e,"auth-domain-config-required"),an(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:At,eventId:s};if(t instanceof Lr){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof Mr){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(li,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ai);return mn(t,oi)}(e),"?").concat(he(o).slice(1)).concat(c)}const ui="webStorageSupport";const di=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=as,this._completeRedirectFn=Us,this._overrideRedirectResult=Ms}async _openPopup(e,t,n,r){var s;ln(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return ii(e,await ci(e,t,n,cn(),r),ls())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){us().location.href=e}(await ci(e,t,n,cn(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ln(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await ni(e),n=new zs(e);return t.register("authEvent",t=>{an(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ui,{type:ui},n=>{var r;const s=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[ui];void 0!==s&&t(!!s),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ws(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ir()||Jn()||rr()}};var hi="@firebase/auth",fi="1.11.0";class mi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){an(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const pi=X("authIdTokenMaxAge")||300;let gi=null;var yi;hr={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=tn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},yi="Browser",Ct(new ve("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;an(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:yi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ar(yi)},c=new cr(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qn);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ct(new ve("auth-internal",e=>(e=>new mi(e))(ur(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Ot(hi,fi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(yi)),Ot(hi,fi,"esm2020");Ot("firebase","12.1.0","app");var vi,bi,xi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},wi={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=g(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new p(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new p(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new p(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),p=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,m(n,2*s+2*i),n[2*s+2*i+1]+=l*g,m(n,2*s+2*i+1),n[2*s+2*i+1]+=f*p,m(n,2*s+2*i+1),n[2*s+2*i+2]+=l*p,m(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,bi=wi.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},vi=wi.Integer=r}).apply("undefined"!==typeof xi?xi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Ni,ki,Si,Ei,_i,Ci,Ti,Ii,ji="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Pi={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ji&&ji];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function N(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){s.setTimeout(()=>{throw e},0)}function S(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new _,e=>e.reset());class _{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,T=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},j=()=>{const e=s.Promise.resolve(void 0);C=()=>{e.then(P)}};var P=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){k(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function A(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}A.prototype.s=!1,A.prototype.ma=function(){this.s||(this.s=!0,this.N())},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function O(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,D);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function V(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function K(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=K(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new V(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,s){if(r&&r.once)return Q(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)W(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!1,r,s)}function G(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[q]=l=new z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Q(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!0,r,s)}function Y(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Y(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=K(i=e.g[t],n,r,s))&&(U(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=K(t,n,r,s)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[q]=null)):U(e)}}}function J(e){return e in H?H[e]:H[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){A.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var s=t;w(t=new D(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,A),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends A{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){A.call(this),this.h=e,this.g={}}d(le,A);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&X(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function me(){}function pe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){D.call(this,"d")}function be(){D.call(this,"c")}d(ve,D),d(be,D);var xe={},we=null;function Ne(){return we=we||new ne}function ke(e){D.call(this,xe.La,e)}function Se(e){const t=Ne();re(t,new ke(t))}function Ee(e,t){D.call(this,xe.STAT_EVENT,e),this.stat=t}function _e(e){const t=Ne();re(t,new Ee(t,e))}function Ce(e,t){D.call(this,xe.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function je(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}xe.La="serverreachability",d(ke,D),xe.STAT_EVENT="statevent",d(Ee,D),xe.Ma="timingevent",d(Ce,D),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Pe,Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(Re,me),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Pe=new Re;var Me={},Fe={};function Ve(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),Ke(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=W(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function Ke(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function He(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Xt(n)}rn(n),_e(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!m(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(et(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(He(o),Ke(o)),r.g=a}else nn(r);0<n.i.length&&$t(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(u){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=h||7==t||Se(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Wt(this.g);e="";var i=r.length,a=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),We(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,_e(12),Ge(this),We(this);break e}je(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==h&&(this.s=4,_e(14),n=!1),je(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,_e(15),je(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}je(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,_e(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(d),d.M=!0,_e(11))}}else je(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),We(this)}else je(this.i,this.l,o,null),Qe(this,o);4==h&&Ge(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,Ke(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=N(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),Ge(this),We(this)}}}catch(h){}},Oe.prototype.cancel=function(){this.J=!0,Ge(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Se(),_e(17)),Ge(this),this.s=2,We(this)):qe(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function at(e){return new it(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(Nt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(kt(this,t),Et(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,xt)),e.join("")};var pt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,xt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Nt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function kt(e,t){Nt(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return Nt(e),t=_t(e,t),e.g.has(t)}function Et(e,t,n){kt(e,t),0<n.length&&(e.i=null,e.g.set(_t(e,t),h(n)),e.h+=n.length)}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Tt(){this.g=new fe}function It(e,t,n){const r=n||"";try{rt(e,function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function jt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function At(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Rt(e)}function Rt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){Nt(this),this.i=null,e=_t(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Nt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Nt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Nt(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(_t(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Nt(this),this.i=null,St(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(jt,me),jt.prototype.g=function(){return new Pt(this.l,this.j)},jt.prototype.i=(pt={},function(){return pt}),d(Pt,ne),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Rt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;At(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Rt(this),3==this.readyState&&At(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ft=/^https?$/i,Vt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),Kt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(st)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Ft.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Ht(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{Kt(e)}}}function Kt(e,t){if(e.g){qt(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function qt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Jt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ke(t)}dn(e)}function Xt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Jt(e){Xt(e),e.u&&(s.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function $t(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||j(),T||(C(),T=!0),I.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,r,t)}function en(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),a=!1;else try{It(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||j(),T||(C(),T=!0),I.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ue(n,e)}function on(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=Ne(),new Ce(r,n)),$t(e)}else nn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Ie;if(s.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ct(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ct(0,0,!1,t)})}(r.toString(),n)}else _e(2);e.G=0,e.l&&e.l.sa(t),dn(e),Jt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof it?at(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new it(null);r&&ot(a,r),t&&(a.g=t),i&&lt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new jt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function mn(){}function pn(){}function gn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?pe(this.o):pe(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Ut(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Vt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Ut(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Kt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(pt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(pt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),$t(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Oe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),w(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,s,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Ot(i)))+"&"+t:this.m&&Lt(n,this.m,i)),et(this.h,s),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),s.T=!0,Ve(s,n,null)):Ve(s,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Je(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),Xt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Xt(this),rn(this),_e(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=mn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Yt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&$t(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,gn.aa.N.call(this)},d(yn,ve),d(vn,be),d(bn,mn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new yn(e))},bn.prototype.sa=function(e){re(this.g,new vn)},bn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Ii=Pi.createWebChannelTransport=function(){return new pn},Ti=Pi.getStatEventTarget=function(){return Ne()},Ci=Pi.Event=xe,_i=Pi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,Ei=Pi.ErrorCode=Ae,De.COMPLETE="complete",Si=Pi.EventType=De,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,ki=Pi.WebChannel=ge,Pi.FetchXmlHttpFactory=jt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,Ni=Pi.XhrIo=Mt}).apply("undefined"!==typeof ji?ji:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Ai="@firebase/firestore",Di="4.9.0";class Ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ri.UNAUTHENTICATED=new Ri(null),Ri.GOOGLE_CREDENTIALS=new Ri("google-credentials-uid"),Ri.FIRST_PARTY=new Ri("first-party-uid"),Ri.MOCK_USER=new Ri("mock-user");let Oi="12.0.0";const Li=new Te("@firebase/firestore");function Mi(){return Li.logLevel}function Fi(e){if(Li.logLevel<=ke.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(zi);Li.debug("Firestore (".concat(Oi,"): ").concat(e),...s)}}function Vi(e){if(Li.logLevel<=ke.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(zi);Li.error("Firestore (".concat(Oi,"): ").concat(e),...s)}}function Ui(e){if(Li.logLevel<=ke.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(zi);Li.warn("Firestore (".concat(Oi,"): ").concat(e),...s)}}function zi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Bi(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Ki(e,r,n)}function Ki(e,t,n){let r="FIRESTORE (".concat(Oi,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Vi(r),new Error(r)}function qi(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||Ki(t,s,r)}function Hi(e,t){return e}const Wi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gi extends oe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Qi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Yi{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Xi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ri.UNAUTHENTICATED))}shutdown(){}}class Ji{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $i{constructor(e){this.t=e,this.currentUser=Ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qi(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qi,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Fi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Fi("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qi)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Fi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(qi("string"==typeof t.accessToken,31837,{l:t}),new Yi(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qi(null===e||"string"==typeof e,2055,{h:e}),new Ri(e)}}class Zi{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ri.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ea{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Zi(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ta{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class na{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,It(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){qi(void 0===this.o,3512);const n=e=>{null!=e.error&&Fi("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Fi("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Fi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Fi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ta(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(qi("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new ta(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ra(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class sa{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=ra(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function ia(e,t){return e<t?-1:e>t?1:0}function aa(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),s=t.charAt(r);if(n!==s)return ca(n)===ca(s)?ia(n,s):ca(n)?1:-1}return ia(e.length,t.length)}const oa=55296,la=57343;function ca(e){const t=e.charCodeAt(0);return t>=oa&&t<=la}function ua(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const da="__name__";class ha{constructor(e,t,n){void 0===t?t=0:t>e.length&&Bi(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Bi(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ha.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ha?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ha.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return ia(e.length,t.length)}static compareSegments(e,t){const n=ha.isNumericId(e),r=ha.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ha.extractNumericId(e).compare(ha.extractNumericId(t)):aa(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vi.fromString(e.substring(4,e.length-2))}}class fa extends ha{construct(e,t,n){return new fa(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new Gi(Wi.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new fa(e)}static emptyPath(){return new fa([])}}const ma=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pa extends ha{construct(e,t,n){return new pa(e,t,n)}static isValidIdentifier(e){return ma.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pa.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===da}static keyField(){return new pa([da])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Gi(Wi.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Gi(Wi.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Gi(Wi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Gi(Wi.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pa(t)}static emptyPath(){return new pa([])}}class ga{constructor(e){this.path=e}static fromPath(e){return new ga(fa.fromString(e))}static fromName(e){return new ga(fa.fromString(e).popFirst(5))}static empty(){return new ga(fa.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fa.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fa.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ga(new fa(e.slice()))}}function ya(e,t,n){if(!n)throw new Gi(Wi.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function va(e){if(!ga.isDocumentKey(e))throw new Gi(Wi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ba(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function xa(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Bi(12329,{type:typeof e})}function wa(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Gi(Wi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xa(e);throw new Gi(Wi.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Na(e,t){const n={typeString:e};return t&&(n.value=t),n}function ka(e,t){if(!ba(e))throw new Gi(Wi.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(s&&typeof a!==s){n="JSON field '".concat(r,"' must be a ").concat(s,".");break}if(void 0!==i&&a!==i.value){n="Expected '".concat(r,"' field to equal '").concat(i.value,"'");break}}if(n)throw new Gi(Wi.INVALID_ARGUMENT,n);return!0}const Sa=-62135596800,Ea=1e6;class _a{static now(){return _a.fromMillis(Date.now())}static fromDate(e){return _a.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Ea);return new _a(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Gi(Wi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Gi(Wi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sa)throw new Gi(Wi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Gi(Wi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ea}_compareTo(e){return this.seconds===e.seconds?ia(this.nanoseconds,e.nanoseconds):ia(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_a._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ka(e,_a._jsonSchema))return new _a(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sa;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_a._jsonSchemaVersion="firestore/timestamp/1.0",_a._jsonSchema={type:Na("string",_a._jsonSchemaVersion),seconds:Na("number"),nanoseconds:Na("number")};class Ca{static fromTimestamp(e){return new Ca(e)}static min(){return new Ca(new _a(0,0))}static max(){return new Ca(new _a(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ta=-1;class Ia{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Ia.UNKNOWN_ID=-1;function ja(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Ca.fromTimestamp(1e9===r?new _a(n+1,0):new _a(n,r));return new Aa(s,ga.empty(),t)}function Pa(e){return new Aa(e.readTime,e.key,Ta)}class Aa{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Aa(Ca.min(),ga.empty(),Ta)}static max(){return new Aa(Ca.max(),ga.empty(),Ta)}}function Da(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ga.comparator(e.documentKey,t.documentKey),0!==n?n:ia(e.largestBatchId,t.largestBatchId))}const Ra="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Oa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function La(e){if(e.code!==Wi.FAILED_PRECONDITION||e.message!==Ra)throw e;Fi("LocalStore","Unexpectedly lost primary lease")}class Ma{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Bi(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ma((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ma?t:Ma.resolve(t)}catch(e){return Ma.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ma.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ma.reject(t)}static resolve(e){return new Ma((t,n)=>{t(e)})}static reject(e){return new Ma((t,n)=>{n(e)})}static waitFor(e){return new Ma((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Ma.resolve(!1);for(const n of e)t=t.next(e=>e?Ma.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Ma((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Ma((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function Fa(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Va(e){return"IndexedDbTransactionError"===e.name}class Ua{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ua.ce=-1;const za=-1;function Ba(e){return null==e}function Ka(e){return 0===e&&1/e==-1/0}function qa(e){return"number"==typeof e&&Number.isInteger(e)&&!Ka(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Ha="\x01";function Wa(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Qa(t)),t=Ga(e.get(n),t);return Qa(t)}function Ga(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case Ha:n+="\x01\x11";break;default:n+=t}}return n}function Qa(e){return e+Ha+"\x01"}const Ya="remoteDocuments",Xa="owner",Ja="mutationQueues",$a="mutations";const Za="documentMutations",eo="remoteDocumentsV14",to="remoteDocumentGlobal",no="targets",ro="targetDocuments",so="targetGlobal",io="collectionParents",ao="clientMetadata",oo="bundles",lo="namedQueries",co="indexConfiguration",uo="indexState",ho="indexEntries",fo="documentOverlays",mo="globals",po=[Ja,$a,Za,Ya,no,Xa,so,ro,ao,to,io,oo,lo],go=[Ja,$a,Za,eo,no,Xa,so,ro,ao,to,io,oo,lo,fo],yo=go,vo=[...yo,co,uo,ho];function bo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function xo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class No{constructor(e,t){this.comparator=e,this.root=t||So.EMPTY}insert(e,t){return new No(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,So.BLACK,null,null))}remove(e){return new No(this.comparator,this.root.remove(e,this.comparator).copy(null,null,So.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ko(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ko(this.root,e,this.comparator,!1)}getReverseIterator(){return new ko(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ko(this.root,e,this.comparator,!0)}}class ko{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class So{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:So.RED,this.left=null!=r?r:So.EMPTY,this.right=null!=s?s:So.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new So(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return So.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return So.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,So.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,So.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Bi(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Bi(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Bi(27949);return e+(this.isRed()?0:1)}}So.EMPTY=null,So.RED=!0,So.BLACK=!1,So.EMPTY=new class{constructor(){this.size=0}get key(){throw Bi(57766)}get value(){throw Bi(16141)}get color(){throw Bi(16727)}get left(){throw Bi(29726)}get right(){throw Bi(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new So(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Eo{constructor(e){this.comparator=e,this.data=new No(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _o(this.data.getIterator())}getIteratorFrom(e){return new _o(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Eo))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Eo(this.comparator);return t.data=e,t}}class _o{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Co{constructor(e){this.fields=e,e.sort(pa.comparator)}static empty(){return new Co([])}unionWith(e){let t=new Eo(pa.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Co(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ua(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class To extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Io{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new To("Invalid base64 string: "+e):e}}(e);return new Io(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Io(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ia(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Io.EMPTY_BYTE_STRING=new Io("");const jo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Po(e){if(qi(!!e,39018),"string"==typeof e){let t=0;const n=jo.exec(e);if(qi(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ao(e.seconds),nanos:Ao(e.nanos)}}function Ao(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Do(e){return"string"==typeof e?Io.fromBase64String(e):Io.fromUint8Array(e)}const Ro="server_timestamp",Oo="__type__",Lo="__previous_value__",Mo="__local_write_time__";function Fo(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Oo])||void 0===t?void 0:t.stringValue)===Ro}function Vo(e){const t=e.mapValue.fields[Lo];return Fo(t)?Vo(t):t}function Uo(e){const t=Po(e.mapValue.fields[Mo].timestampValue);return new _a(t.seconds,t.nanos)}class zo{constructor(e,t,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Bo="(default)";class Ko{constructor(e,t){this.projectId=e,this.database=t||Bo}static empty(){return new Ko("","")}get isDefaultDatabase(){return this.database===Bo}isEqual(e){return e instanceof Ko&&e.projectId===this.projectId&&e.database===this.database}}const qo="__type__",Ho="__max__",Wo={mapValue:{fields:{__type__:{stringValue:Ho}}}},Go="__vector__",Qo="value";function Yo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Fo(e)?4:dl(e)?9007199254740991:cl(e)?10:11:Bi(28295,{value:e})}function Xo(e,t){if(e===t)return!0;const n=Yo(e);if(n!==Yo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Uo(e).isEqual(Uo(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Po(e.timestampValue),r=Po(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Do(e.bytesValue).isEqual(Do(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ao(e.geoPointValue.latitude)===Ao(t.geoPointValue.latitude)&&Ao(e.geoPointValue.longitude)===Ao(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ao(e.integerValue)===Ao(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ao(e.doubleValue),r=Ao(t.doubleValue);return n===r?Ka(n)===Ka(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ua(e.arrayValue.values||[],t.arrayValue.values||[],Xo);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(bo(n)!==bo(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Xo(n[s],r[s])))return!1;return!0}(e,t);default:return Bi(52216,{left:e})}}function Jo(e,t){return void 0!==(e.values||[]).find(e=>Xo(e,t))}function $o(e,t){if(e===t)return 0;const n=Yo(e),r=Yo(t);if(n!==r)return ia(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ia(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ao(e.integerValue||e.doubleValue),r=Ao(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Zo(e.timestampValue,t.timestampValue);case 4:return Zo(Uo(e),Uo(t));case 5:return aa(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Do(e),r=Do(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=ia(n[s],r[s]);if(0!==e)return e}return ia(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ia(Ao(e.latitude),Ao(t.latitude));return 0!==n?n:ia(Ao(e.longitude),Ao(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return el(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,s,i){const a=e.fields||{},o=t.fields||{},l=null===(n=a[Qo])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Qo])||void 0===r?void 0:r.arrayValue,u=ia((null===l||void 0===l||null===(s=l.values)||void 0===s?void 0:s.length)||0,(null===c||void 0===c||null===(i=c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:el(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Wo.mapValue&&t===Wo.mapValue)return 0;if(e===Wo.mapValue)return 1;if(t===Wo.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=aa(r[a],i[a]);if(0!==e)return e;const t=$o(n[r[a]],s[i[a]]);if(0!==t)return t}return ia(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Bi(23264,{he:n})}}function Zo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ia(e,t);const n=Po(e),r=Po(t),s=ia(n.seconds,r.seconds);return 0!==s?s:ia(n.nanos,r.nanos)}function el(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=$o(n[s],r[s]);if(e)return e}return ia(n.length,r.length)}function tl(e){return nl(e)}function nl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Po(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Do(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ga.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=nl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(nl(e.fields[s]));return n+"}"}(e.mapValue):Bi(61005,{value:e})}function rl(e){switch(Yo(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Vo(e);return t?16+rl(t):16;case 5:return 2*e.stringValue.length;case 6:return Do(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+rl(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return xo(e.fields,(e,n)=>{t+=e.length+rl(n)}),t}(e.mapValue);default:throw Bi(13486,{value:e})}}function sl(e){return!!e&&"integerValue"in e}function il(e){return!!e&&"arrayValue"in e}function al(e){return!!e&&"nullValue"in e}function ol(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ll(e){return!!e&&"mapValue"in e}function cl(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[qo])||void 0===t?void 0:t.stringValue)===Go}function ul(e){if(e.geoPointValue)return{geoPointValue:u({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:u({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return xo(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ul(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ul(e.arrayValue.values[n]);return t}return u({},e)}function dl(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ho}class hl{constructor(e){this.value=e}static empty(){return new hl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ll(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ul(t)}setAll(e){let t=pa.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=ul(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());ll(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ll(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){xo(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new hl(ul(this.value))}}function fl(e){const t=[];return xo(e.fields,(e,n)=>{const r=new pa([e]);if(ll(n)){const e=fl(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Co(t)}class ml{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new ml(e,0,Ca.min(),Ca.min(),Ca.min(),hl.empty(),0)}static newFoundDocument(e,t,n,r){return new ml(e,1,t,Ca.min(),n,r,0)}static newNoDocument(e,t){return new ml(e,2,t,Ca.min(),Ca.min(),hl.empty(),0)}static newUnknownDocument(e,t){return new ml(e,3,t,Ca.min(),Ca.min(),hl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ca.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ca.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ml&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ml(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class pl{constructor(e,t){this.position=e,this.inclusive=t}}function gl(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?ga.comparator(ga.fromName(a.referenceValue),n.key):$o(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function yl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Xo(e.position[n],t.position[n]))return!1;return!0}class vl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function bl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class xl{}class wl extends xl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Il(e,t,n):"array-contains"===t?new Dl(e,n):"in"===t?new Rl(e,n):"not-in"===t?new Ol(e,n):"array-contains-any"===t?new Ll(e,n):new wl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new jl(e,n):new Pl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison($o(t,this.value)):null!==t&&Yo(this.value)===Yo(t)&&this.matchesComparison($o(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bi(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nl extends xl{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Nl(e,t)}matches(e){return kl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kl(e){return"and"===e.op}function Sl(e){return El(e)&&kl(e)}function El(e){for(const t of e.filters)if(t instanceof Nl)return!1;return!0}function _l(e){if(e instanceof wl)return e.field.canonicalString()+e.op.toString()+tl(e.value);if(Sl(e))return e.filters.map(e=>_l(e)).join(",");{const t=e.filters.map(e=>_l(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Cl(e,t){return e instanceof wl?function(e,t){return t instanceof wl&&e.op===t.op&&e.field.isEqual(t.field)&&Xo(e.value,t.value)}(e,t):e instanceof Nl?function(e,t){return t instanceof Nl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Cl(n,t.filters[r]),!0)}(e,t):void Bi(19439)}function Tl(e){return e instanceof wl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(tl(e.value))}(e):e instanceof Nl?function(e){return e.op.toString()+" {"+e.getFilters().map(Tl).join(" ,")+"}"}(e):"Filter"}class Il extends wl{constructor(e,t,n){super(e,t,n),this.key=ga.fromName(n.referenceValue)}matches(e){const t=ga.comparator(e.key,this.key);return this.matchesComparison(t)}}class jl extends wl{constructor(e,t){super(e,"in",t),this.keys=Al("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Pl extends wl{constructor(e,t){super(e,"not-in",t),this.keys=Al("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Al(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ga.fromName(e.referenceValue))}class Dl extends wl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return il(t)&&Jo(t.arrayValue,this.value)}}class Rl extends wl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Jo(this.value.arrayValue,t)}}class Ol extends wl{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Jo(this.value.arrayValue,t)}}class Ll extends wl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!il(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Jo(this.value.arrayValue,e))}}class Ml{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Te=null}}function Fl(e){return new Ml(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Vl(e){const t=Hi(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>_l(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ba(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>tl(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>tl(e)).join(",")),t.Te=e}return t.Te}function Ul(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!bl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Cl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!yl(e.startAt,t.startAt)&&yl(e.endAt,t.endAt)}function zl(e){return ga.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Bl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Kl(e,t,n,r,s,i,a,o){return new Bl(e,t,n,r,s,i,a,o)}function ql(e){return new Bl(e)}function Hl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wl(e){return null!==e.collectionGroup}function Gl(e){const t=Hi(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Eo(pa.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new vl(r,n))}),e.has(pa.keyField().canonicalString())||t.Ie.push(new vl(pa.keyField(),n))}return t.Ie}function Ql(e){const t=Hi(e);return t.Ee||(t.Ee=Yl(t,Gl(e))),t.Ee}function Yl(e,t){if("F"===e.limitType)return Fl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new vl(e.field,t)});const n=e.endAt?new pl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new pl(e.startAt.position,e.startAt.inclusive):null;return Fl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Xl(e,t,n){return new Bl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Jl(e,t){return Ul(Ql(e),Ql(t))&&e.limitType===t.limitType}function $l(e){return"".concat(Vl(Ql(e)),"|lt:").concat(e.limitType)}function Zl(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Tl(e)).join(", "),"]")),Ba(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>tl(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>tl(e)).join(",")),"Target(".concat(t,")")}(Ql(e)),"; limitType=").concat(e.limitType,")")}function ec(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ga.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Gl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=gl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Gl(e),t))&&!(e.endAt&&!function(e,t,n){const r=gl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Gl(e),t))}(e,t)}function tc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function nc(e){return(t,n)=>{let r=!1;for(const s of Gl(e)){const e=rc(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function rc(e,t,n){const r=e.field.isKeyField()?ga.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?$o(r,s):Bi(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Bi(19790,{direction:e.dir})}}class sc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){xo(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return wo(this.inner)}size(){return this.innerSize}}const ic=new No(ga.comparator);function ac(){return ic}const oc=new No(ga.comparator);function lc(){let e=oc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function cc(e){let t=oc;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function uc(){return hc()}function dc(){return hc()}function hc(){return new sc(e=>e.toString(),(e,t)=>e.isEqual(t))}const fc=new No(ga.comparator),mc=new Eo(ga.comparator);function pc(){let e=mc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const gc=new Eo(ia);function yc(){return gc}function vc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ka(t)?"-0":t}}function bc(e){return{integerValue:""+e}}function xc(e,t){return qa(t)?bc(t):vc(e,t)}class wc{constructor(){this._=void 0}}function Nc(e,t,n){return e instanceof Ec?function(e,t){const n={fields:{[Oo]:{stringValue:Ro},[Mo]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Fo(t)&&(t=Vo(t)),t&&(n.fields[Lo]=t),{mapValue:n}}(n,t):e instanceof _c?Cc(e,t):e instanceof Tc?Ic(e,t):function(e,t){const n=Sc(e,t),r=Pc(n)+Pc(e.Ae);return sl(n)&&sl(e.Ae)?bc(r):vc(e.serializer,r)}(e,t)}function kc(e,t,n){return e instanceof _c?Cc(e,t):e instanceof Tc?Ic(e,t):n}function Sc(e,t){return e instanceof jc?function(e){return sl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ec extends wc{}class _c extends wc{constructor(e){super(),this.elements=e}}function Cc(e,t){const n=Ac(t);for(const r of e.elements)n.some(e=>Xo(e,r))||n.push(r);return{arrayValue:{values:n}}}class Tc extends wc{constructor(e){super(),this.elements=e}}function Ic(e,t){let n=Ac(t);for(const r of e.elements)n=n.filter(e=>!Xo(e,r));return{arrayValue:{values:n}}}class jc extends wc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Pc(e){return Ao(e.integerValue||e.doubleValue)}function Ac(e){return il(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Dc{constructor(e,t){this.version=e,this.transformResults=t}}class Rc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rc}static exists(e){return new Rc(void 0,e)}static updateTime(e){return new Rc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Lc{}function Mc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Gc(e.key,Rc.none()):new Bc(e.key,e.data,Rc.none());{const n=e.data,r=hl.empty();let s=new Eo(pa.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Kc(e.key,r,new Co(s.toArray()),Rc.none())}}function Fc(e,t,n){e instanceof Bc?function(e,t,n){const r=e.value.clone(),s=Hc(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Kc?function(e,t,n){if(!Oc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Hc(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(qc(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Vc(e,t,n,r){return e instanceof Bc?function(e,t,n,r){if(!Oc(e.precondition,t))return n;const s=e.value.clone(),i=Wc(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Kc?function(e,t,n,r){if(!Oc(e.precondition,t))return n;const s=Wc(e.fieldTransforms,r,t),i=t.data;return i.setAll(qc(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Oc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Uc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Sc(r.transform,e||null);null!=s&&(null===n&&(n=hl.empty()),n.set(r.field,s))}return n||null}function zc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ua(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof _c&&t instanceof _c||e instanceof Tc&&t instanceof Tc?ua(e.elements,t.elements,Xo):e instanceof jc&&t instanceof jc?Xo(e.Ae,t.Ae):e instanceof Ec&&t instanceof Ec}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Bc extends Lc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Kc extends Lc{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Hc(e,t,n){const r=new Map;qi(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,kc(a,o,n[s]))}return r}function Wc(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Nc(e,i,t))}return r}class Gc extends Lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qc extends Lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Yc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Fc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Vc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Vc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=dc();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Mc(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Ca.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pc())}isEqual(e){return this.batchId===e.batchId&&ua(this.mutations,e.mutations,(e,t)=>zc(e,t))&&ua(this.baseMutations,e.baseMutations,(e,t)=>zc(e,t))}}class Xc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){qi(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=fc;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Xc(e,t,n,r)}}class Jc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class $c{constructor(e,t){this.count=e,this.unchangedNames=t}}var Zc,eu;function tu(e){switch(e){case Wi.OK:return Bi(64938);case Wi.CANCELLED:case Wi.UNKNOWN:case Wi.DEADLINE_EXCEEDED:case Wi.RESOURCE_EXHAUSTED:case Wi.INTERNAL:case Wi.UNAVAILABLE:case Wi.UNAUTHENTICATED:return!1;case Wi.INVALID_ARGUMENT:case Wi.NOT_FOUND:case Wi.ALREADY_EXISTS:case Wi.PERMISSION_DENIED:case Wi.FAILED_PRECONDITION:case Wi.ABORTED:case Wi.OUT_OF_RANGE:case Wi.UNIMPLEMENTED:case Wi.DATA_LOSS:return!0;default:return Bi(15467,{code:e})}}function nu(e){if(void 0===e)return Vi("GRPC error has no .code"),Wi.UNKNOWN;switch(e){case Zc.OK:return Wi.OK;case Zc.CANCELLED:return Wi.CANCELLED;case Zc.UNKNOWN:return Wi.UNKNOWN;case Zc.DEADLINE_EXCEEDED:return Wi.DEADLINE_EXCEEDED;case Zc.RESOURCE_EXHAUSTED:return Wi.RESOURCE_EXHAUSTED;case Zc.INTERNAL:return Wi.INTERNAL;case Zc.UNAVAILABLE:return Wi.UNAVAILABLE;case Zc.UNAUTHENTICATED:return Wi.UNAUTHENTICATED;case Zc.INVALID_ARGUMENT:return Wi.INVALID_ARGUMENT;case Zc.NOT_FOUND:return Wi.NOT_FOUND;case Zc.ALREADY_EXISTS:return Wi.ALREADY_EXISTS;case Zc.PERMISSION_DENIED:return Wi.PERMISSION_DENIED;case Zc.FAILED_PRECONDITION:return Wi.FAILED_PRECONDITION;case Zc.ABORTED:return Wi.ABORTED;case Zc.OUT_OF_RANGE:return Wi.OUT_OF_RANGE;case Zc.UNIMPLEMENTED:return Wi.UNIMPLEMENTED;case Zc.DATA_LOSS:return Wi.DATA_LOSS;default:return Bi(39323,{code:e})}}(eu=Zc||(Zc={}))[eu.OK=0]="OK",eu[eu.CANCELLED=1]="CANCELLED",eu[eu.UNKNOWN=2]="UNKNOWN",eu[eu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",eu[eu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",eu[eu.NOT_FOUND=5]="NOT_FOUND",eu[eu.ALREADY_EXISTS=6]="ALREADY_EXISTS",eu[eu.PERMISSION_DENIED=7]="PERMISSION_DENIED",eu[eu.UNAUTHENTICATED=16]="UNAUTHENTICATED",eu[eu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",eu[eu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",eu[eu.ABORTED=10]="ABORTED",eu[eu.OUT_OF_RANGE=11]="OUT_OF_RANGE",eu[eu.UNIMPLEMENTED=12]="UNIMPLEMENTED",eu[eu.INTERNAL=13]="INTERNAL",eu[eu.UNAVAILABLE=14]="UNAVAILABLE",eu[eu.DATA_LOSS=15]="DATA_LOSS";let ru=null;function su(){return new TextEncoder}const iu=new vi([4294967295,4294967295],0);function au(e){const t=su().encode(e),n=new bi;return n.update(t),new Uint8Array(n.digest())}function ou(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new vi([n,r],0),new vi([s,i],0)]}class lu{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new cu("Invalid padding: ".concat(t));if(n<0)throw new cu("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new cu("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new cu("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=vi.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(vi.fromNumber(n)));return 1===r.compare(iu)&&(r=new vi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=au(e),[n,r]=ou(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new lu(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=au(e),[n,r]=ou(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class uu{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new uu(Ca.min(),r,new No(ia),ac(),pc())}}class du{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new du(n,t,pc(),pc(),pc())}}class hu{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class fu{constructor(e,t){this.targetId=e,this.Ce=t}}class mu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Io.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class pu{constructor(){this.ve=0,this.Fe=vu(),this.Me=Io.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pc(),t=pc(),n=pc();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Bi(38017,{changeType:s})}}),new du(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=vu()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qi(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class gu{constructor(e){this.Ge=e,this.ze=new Map,this.je=ac(),this.Je=yu(),this.He=yu(),this.Ye=new No(ia)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Bi(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(zl(i))if(0===n){const e=new ga(i.path);this.et(t,e,ml.newNoDocument(e,Ca.min()))}else qi(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var s;const n=this.ut(e),i=n?this.ct(n,e,r):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(s=ru)||void 0===s||s.lt(function(e,t,n,r,s,i,a,o,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===s,hashCount:null!==(i=null===d||void 0===d?void 0:d.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(a=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=Do(n).toUint8Array()}catch(e){if(e instanceof To)return Ui("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new lu(i,r,s)}catch(e){return Ui(e instanceof cu?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Ge.ht(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const s=this.ot(r);if(s){if(n.current&&zl(s.target)){const t=new ga(s.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,ml.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=pc();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new uu(e,t,this.Ye,this.je,n);return this.je=ac(),this.Je=yu(),this.He=yu(),this.Ye=new No(ia),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new pu,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Eo(ia),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Eo(ia),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Fi("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new pu),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function yu(){return new No(ga.comparator)}function vu(){return new No(ga.comparator)}const bu={asc:"ASCENDING",desc:"DESCENDING"},xu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wu={and:"AND",or:"OR"};class Nu{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ku(e,t){return e.useProto3Json||Ba(t)?t:{value:t}}function Su(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Eu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function _u(e,t){return Su(e,t.toTimestamp())}function Cu(e){return qi(!!e,49232),Ca.fromTimestamp(function(e){const t=Po(e);return new _a(t.seconds,t.nanos)}(e))}function Tu(e,t){return Iu(e,t).canonicalString()}function Iu(e,t){const n=function(e){return new fa(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ju(e){const t=fa.fromString(e);return qi(Xu(t),10190,{key:t.toString()}),t}function Pu(e,t){return Tu(e.databaseId,t.path)}function Au(e,t){const n=ju(t);if(n.get(1)!==e.databaseId.projectId)throw new Gi(Wi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Gi(Wi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ga(Lu(n))}function Du(e,t){return Tu(e.databaseId,t)}function Ru(e){const t=ju(e);return 4===t.length?fa.emptyPath():Lu(t)}function Ou(e){return new fa(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Lu(e){return qi(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Mu(e,t,n){return{name:Pu(e,t),fields:n.value.mapValue.fields}}function Fu(e,t){let n;if(t instanceof Bc)n={update:Mu(e,t.key,t.value)};else if(t instanceof Gc)n={delete:Pu(e,t.key)};else if(t instanceof Kc)n={update:Mu(e,t.key,t.data),updateMask:Yu(t.fieldMask)};else{if(!(t instanceof Qc))return Bi(16599,{Vt:t.type});n={verify:Pu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ec)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof _c)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Tc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jc)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Bi(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:_u(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Bi(27497)}(e,t.precondition)),n}function Vu(e,t){return{documents:[Du(e,t.path)]}}function Uu(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Du(e,s);const i=function(e){if(0!==e.length)return Qu(Nl.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Wu(e.field),direction:Ku(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=ku(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:s}}function zu(e){let t=Ru(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){qi(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Bu(e);return t instanceof Nl&&Sl(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new vl(Gu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Ba(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new pl(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new pl(n,t)}(n.endAt)),Kl(t,s,a,i,o,"F",l,c)}function Bu(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Gu(e.unaryFilter.field);return wl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Gu(e.unaryFilter.field);return wl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Gu(e.unaryFilter.field);return wl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Gu(e.unaryFilter.field);return wl.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Bi(61313);default:return Bi(60726)}}(e):void 0!==e.fieldFilter?function(e){return wl.create(Gu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Bi(58110);default:return Bi(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Nl.create(e.compositeFilter.filters.map(e=>Bu(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Bi(1026)}}(e.compositeFilter.op))}(e):Bi(30097,{filter:e})}function Ku(e){return bu[e]}function qu(e){return xu[e]}function Hu(e){return wu[e]}function Wu(e){return{fieldPath:e.canonicalString()}}function Gu(e){return pa.fromServerFormat(e.fieldPath)}function Qu(e){return e instanceof wl?function(e){if("=="===e.op){if(ol(e.value))return{unaryFilter:{field:Wu(e.field),op:"IS_NAN"}};if(al(e.value))return{unaryFilter:{field:Wu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ol(e.value))return{unaryFilter:{field:Wu(e.field),op:"IS_NOT_NAN"}};if(al(e.value))return{unaryFilter:{field:Wu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wu(e.field),op:qu(e.op),value:e.value}}}(e):e instanceof Nl?function(e){const t=e.getFilters().map(e=>Qu(e));return 1===t.length?t[0]:{compositeFilter:{op:Hu(e.op),filters:t}}}(e):Bi(54877,{filter:e})}function Yu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Xu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ju{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ca.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ca.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Io.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Ju(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $u{constructor(e){this.yt=e}}function Zu(e){const t=zu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Xl(t,t.limit,"L"):t}class ed{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ao(e.integerValue));else if("doubleValue"in e){const n=Ao(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Ka(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Po(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Do(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?dl(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):cl(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Bi(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const s=Qo,i=(null===(n=r[s].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Ao(i)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),ga.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ed.Kt=new ed;class td{constructor(){this.Cn=new nd}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ma.resolve()}getCollectionParents(e,t){return Ma.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ma.resolve()}deleteFieldIndex(e,t){return Ma.resolve()}deleteAllFieldIndexes(e){return Ma.resolve()}createTargetIndexes(e,t){return Ma.resolve()}getDocumentsMatchingTarget(e,t){return Ma.resolve(null)}getIndexType(e,t){return Ma.resolve(0)}getFieldIndexes(e,t){return Ma.resolve([])}getNextCollectionGroupToUpdate(e){return Ma.resolve(null)}getMinOffset(e,t){return Ma.resolve(Aa.min())}getMinOffsetFromCollectionGroup(e,t){return Ma.resolve(Aa.min())}updateCollectionGroup(e,t,n){return Ma.resolve()}updateIndexEntries(e,t){return Ma.resolve()}}class nd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Eo(fa.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Eo(fa.comparator)).toArray()}}new Uint8Array(0);const rd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sd=41943040;class id{static withCacheSize(e){return new id(e,id.DEFAULT_COLLECTION_PERCENTILE,id.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}id.DEFAULT_COLLECTION_PERCENTILE=10,id.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,id.DEFAULT=new id(sd,id.DEFAULT_COLLECTION_PERCENTILE,id.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),id.DISABLED=new id(-1,0,0);class ad{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ad(0)}static cr(){return new ad(-1)}}const od="LruGarbageCollector",ld=1048576;function cd(e,t){let[n,r]=e,[s,i]=t;const a=ia(n,s);return 0===a?ia(r,i):a}class ud{constructor(e){this.Ir=e,this.buffer=new Eo(cd),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();cd(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class dd{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Fi(od,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Va(e)?Fi(od,"Ignoring IndexedDB error during garbage collection: ",e):await La(e)}await this.Vr(3e5)})}}class hd{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ma.resolve(Ua.ce);const n=new ud(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fi("LruGarbageCollector","Garbage collection skipped; disabled"),Ma.resolve(rd)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Fi("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),rd):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Fi("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Mi()<=ke.DEBUG&&Fi("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Ma.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function fd(e,t){return new hd(e,t)}class md{constructor(){this.changes=new sc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ml.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ma.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class pd{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class gd{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Vc(n.mutation,e,Co.empty(),_a.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,pc()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pc();const r=uc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=lc();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=uc();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,pc()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=ac();const i=hc(),a=hc();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Kc)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Vc(a.mutation,t,a.mutation.getFieldMask(),_a.now())):i.set(t.key,Co.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new pd(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=hc();let r=new No((e,t)=>e-t),s=pc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||Co.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||pc()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=dc();l.forEach(e=>{if(!s.has(e)){const r=Mc(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Ma.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ga.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Ma.resolve(uc());let a=Ta,o=s;return i.next(t=>Ma.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?Ma.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,pc())).next(e=>({batchId:a,changes:cc(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ga(t)).next(e=>{let t=lc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=lc();return this.indexManager.getCollectionParents(e,s).next(a=>Ma.forEach(a,a=>{const o=function(e,t){return new Bl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ml.newInvalidDocument(r)))});let n=lc();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Vc(i.mutation,r,Co.empty(),_a.now()),ec(t,r)&&(n=n.insert(e,r))}),n})}}class yd{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ma.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Cu(e.createTime)}}(t)),Ma.resolve()}getNamedQuery(e,t){return Ma.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Zu(e.bundledQuery),readTime:Cu(e.readTime)}}(t)),Ma.resolve()}}class vd{constructor(){this.overlays=new No(ga.comparator),this.qr=new Map}getOverlay(e,t){return Ma.resolve(this.overlays.get(t))}getOverlays(e,t){const n=uc();return Ma.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Ma.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Ma.resolve()}getOverlaysForCollection(e,t,n){const r=uc(),s=t.length+1,i=new ga(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ma.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new No((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=uc(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=uc(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Ma.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Jc(t,n));let s=this.qr.get(t);void 0===s&&(s=pc(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}class bd{constructor(){this.sessionToken=Io.EMPTY_BYTE_STRING}getSessionToken(e){return Ma.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ma.resolve()}}class xd{constructor(){this.Qr=new Eo(wd.$r),this.Ur=new Eo(wd.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new wd(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new wd(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new ga(new fa([])),n=new wd(t,e),r=new wd(t,e+1),s=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),s.push(e.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ga(new fa([])),n=new wd(t,e),r=new wd(t,e+1);let s=pc();return this.Ur.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new wd(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class wd{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ga.comparator(e.key,t.key)||ia(e.Yr,t.Yr)}static Kr(e,t){return ia(e.Yr,t.Yr)||ga.comparator(e.key,t.key)}}class Nd{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Eo(wd.$r)}checkEmpty(e){return Ma.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Yc(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Zr=this.Zr.add(new wd(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ma.resolve(i)}lookupMutationBatch(e,t){return Ma.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),s=r<0?0:r;return Ma.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ma.resolve(0===this.mutationQueue.length?za:this.tr-1)}getAllMutationBatches(e){return Ma.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new wd(t,0),r=new wd(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);s.push(t)}),Ma.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Eo(ia);return t.forEach(e=>{const t=new wd(e,0),r=new wd(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Ma.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;ga.isDocumentKey(s)||(s=s.child(""));const i=new wd(new ga(s),0);let a=new Eo(ia);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},i),Ma.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){qi(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Ma.forEach(t.mutations,r=>{const s=new wd(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new wd(t,0),r=this.Zr.firstAfterOrEqual(n);return Ma.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ma.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class kd{constructor(e){this.ri=e,this.docs=new No(ga.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ma.resolve(n?n.document.mutableCopy():ml.newInvalidDocument(t))}getEntries(e,t){let n=ac();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ml.newInvalidDocument(e))}),Ma.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=ac();const i=t.path,a=new ga(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Da(Pa(a),n)<=0||(r.has(a.key)||ec(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return Ma.resolve(s)}getAllFromCollectionGroup(e,t,n,r){Bi(9500)}ii(e,t){return Ma.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Sd(this)}getSize(e){return Ma.resolve(this.size)}}class Sd extends md{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Ma.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Ed{constructor(e){this.persistence=e,this.si=new sc(e=>Vl(e),Ul),this.lastRemoteSnapshotVersion=Ca.min(),this.highestTargetId=0,this.oi=0,this._i=new xd,this.targetCount=0,this.ai=ad.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Ma.resolve()}getLastRemoteSnapshotVersion(e){return Ma.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ma.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ma.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ma.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ad(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ma.resolve()}updateTargetData(e,t){return this.Pr(t),Ma.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ma.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.si.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Ma.waitFor(s).next(()=>r)}getTargetCount(e){return Ma.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ma.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ma.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Ma.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ma.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ma.resolve(n)}containsKey(e,t){return Ma.resolve(this._i.containsKey(t))}}class _d{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ua(0),this.li=!1,this.li=!0,this.hi=new bd,this.referenceDelegate=e(this),this.Pi=new Ed(this),this.indexManager=new td,this.remoteDocumentCache=function(e){return new kd(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new $u(t),this.Ii=new yd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Nd(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Fi("MemoryPersistence","Starting transaction:",e);const r=new Cd(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Ma.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Cd extends Oa{constructor(e){super(),this.currentSequenceNumber=e}}class Td{constructor(e){this.persistence=e,this.Ri=new xd,this.Vi=null}static mi(e){return new Td(e)}get fi(){if(this.Vi)return this.Vi;throw Bi(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ma.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ma.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ma.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ma.forEach(this.fi,n=>{const r=ga.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Ca.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ma.or([()=>Ma.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Id{constructor(e,t){this.persistence=e,this.pi=new sc(e=>Wa(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=fd(this,t)}static mi(e,t){return new Id(e,t)}Ei(){}di(e){return Ma.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Ma.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Ma.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,s.removeEntry(r,Ca.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ma.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ma.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ma.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ma.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rl(e.data.value)),t}br(e,t,n){return Ma.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Ma.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class jd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=pc(),r=pc();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new jd(e,t.fromCache,n,r)}}class Pd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ad{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=ie()?8:Fa(re())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ys(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ws(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Pd;return this.Ss(e,t,n).next(r=>{if(s.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>s.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Mi()<=ke.DEBUG&&Fi("QueryEngine","SDK will not create cache indexes for query:",Zl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ma.resolve()):(Mi()<=ke.DEBUG&&Fi("QueryEngine","Query:",Zl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Mi()<=ke.DEBUG&&Fi("QueryEngine","The SDK decides to create cache indexes for query:",Zl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ql(t))):Ma.resolve())}ys(e,t){if(Hl(t))return Ma.resolve(null);let n=Ql(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Xl(t,null,"F"),n=Ql(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=pc(...r);return this.ps.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,r);return this.Cs(t,i,s,n.readTime)?this.ys(e,Xl(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,r){return Hl(t)||r.isEqual(Ca.min())?Ma.resolve(null):this.ps.getDocuments(e,n).next(s=>{const i=this.Ds(t,s);return this.Cs(t,i,n,r)?Ma.resolve(null):(Mi()<=ke.DEBUG&&Fi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zl(t)),this.vs(e,i,t,ja(r,Ta)).next(e=>e))})}Ds(e,t){let n=new Eo(nc(e));return t.forEach((t,r)=>{ec(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return Mi()<=ke.DEBUG&&Fi("QueryEngine","Using full collection scan to execute query:",Zl(t)),this.ps.getDocumentsMatchingQuery(e,t,Aa.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Dd="LocalStore";class Rd{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new No(ia),this.xs=new sc(e=>Vl(e),Ul),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gd(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Od(e,t,n,r){return new Rd(e,t,n,r)}async function Ld(e,t){const n=Hi(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=pc();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:s,addedBatchIds:i}))})})}function Md(e){const t=Hi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Fd(e,t,n){let r=pc(),s=pc();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=ac();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Ca.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Fi(Dd,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{ks:r,qs:s}})}function Vd(e,t){const n=Hi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=za),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Ud(e,t){const n=Hi(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(s=>s?(r=s,Ma.resolve(r)):n.Pi.allocateTargetId(e).next(s=>(r=new Ju(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function zd(e,t,n){const r=Hi(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Va(e))throw e;Fi(Dd,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function Bd(e,t,n){const r=Hi(e);let s=Ca.min(),i=pc();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Hi(e),s=r.xs.get(n);return void 0!==s?Ma.resolve(r.Ms.get(s)):r.Pi.getTargetData(t,n)}(r,e,Ql(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?s:Ca.min(),n?i:pc())).next(e=>(Kd(r,tc(t),e),{documents:e,Qs:i})))}function Kd(e,t,n){let r=e.Os.get(t)||Ca.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class qd{constructor(){this.activeTargetIds=yc()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hd{constructor(){this.Mo=new qd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Wd{Oo(e){}shutdown(){}}const Gd="ConnectivityMonitor";class Qd{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Fi(Gd,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Fi(Gd,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Yd=null;function Xd(){return null===Yd?Yd=268435456+Math.round(2147483648*Math.random()):Yd++,"0x"+Yd.toString(16)}const Jd="RestConnection",$d={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Zd{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Bo?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,s){const i=Xd(),a=this.zo(e,t.toUriEncodedString());Fi(Jd,"Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,s);const{host:l}=new URL(a),c=$(l);return this.Jo(e,a,o,n,c).then(t=>(Fi(Jd,"Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw Ui(Jd,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,s,i){return this.Go(e,t,n,r,s)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Oi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=$d[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class eh{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const th="WebChannelConnection";class nh extends Zd{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=Xd();return new Promise((s,a)=>{const o=new Ni;o.setWithCredentials(!0),o.listenOnce(Si.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Ei.NO_ERROR:const n=o.getResponseJson();Fi(th,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(n)),s(n);break;case Ei.TIMEOUT:Fi(th,"RPC '".concat(e,"' ").concat(i," timed out")),a(new Gi(Wi.DEADLINE_EXCEEDED,"Request time out"));break;case Ei.HTTP_ERROR:const r=o.getStatus();if(Fi(th,"RPC '".concat(e,"' ").concat(i," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Wi).indexOf(t)>=0?t:Wi.UNKNOWN}(n.status);a(new Gi(e,n.message))}else a(new Gi(Wi.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Gi(Wi.UNAVAILABLE,"Connection failed."));break;default:Bi(9055,{l_:e,streamId:i,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{Fi(th,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);Fi(th,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Xd(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Ii(),a=Ti(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");Fi(th,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const f=new eh({Yo:t=>{h?Fi(th,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Fi(th,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Fi(th,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,ki.EventType.OPEN,()=>{h||(Fi(th,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),m(u,ki.EventType.CLOSE,()=>{h||(h=!0,Fi(th,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),m(u,ki.EventType.ERROR,t=>{h||(h=!0,Ui(th,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Gi(Wi.UNAVAILABLE,"The operation could not be completed")))}),m(u,ki.EventType.MESSAGE,t=>{if(!h){var n;const s=t.data[0];qi(!!s,16349);const i=s,a=(null===i||void 0===i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){Fi(th,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Zc[e];if(void 0!==t)return nu(t)}(t),s=a.message;void 0===n&&(n=Wi.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.a_(new Gi(n,s)),u.close()}else Fi(th,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f.u_(s)}}),m(a,Ci.STAT_EVENT,t=>{t.stat===_i.PROXY?Fi(th,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===_i.NOPROXY&&Fi(th,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function rh(){return"undefined"!=typeof document?document:null}function sh(e){return new Nu(e,!0)}class ih{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Fi("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ah="PersistentStream";class oh{constructor(e,t,n,r,s,i,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ih(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Wi.RESOURCE_EXHAUSTED?(Vi(t.toString()),Vi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Wi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Gi(Wi.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Fi(ah,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Fi(ah,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lh extends oh{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Bi(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(qi(void 0===t||"string"==typeof t,58123),Io.fromBase64String(t||"")):(qi(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Io.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Wi.UNKNOWN:nu(e.code);return new Gi(t,e.message||"")}(a);n=new mu(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Au(e,r.document.name),i=Cu(r.document.updateTime),a=r.document.createTime?Cu(r.document.createTime):Ca.min(),o=new hl({mapValue:{fields:r.document.fields}}),l=ml.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new hu(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Au(e,r.document),i=r.readTime?Cu(r.readTime):Ca.min(),a=ml.newNoDocument(s,i),o=r.removedTargetIds||[];n=new hu([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Au(e,r.document),i=r.removedTargetIds||[];n=new hu([],i,s,null)}else{if(!("filter"in t))return Bi(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new $c(r,s),a=e.targetId;n=new fu(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ca.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ca.min():t.readTime?Cu(t.readTime):Ca.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Ou(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=zl(r)?{documents:Vu(e,r)}:{query:Uu(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Eu(e,t.resumeToken);const r=ku(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ca.min())>0){n.readTime=Su(e,t.snapshotVersion.toTimestamp());const r=ku(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bi(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Ou(this.serializer),t.removeTarget=e,this.q_(t)}}class ch extends oh{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return qi(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qi(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){qi(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(qi(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Cu(e.updateTime):Cu(t);return n.isEqual(Ca.min())&&(n=Cu(t)),new Dc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Cu(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Ou(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Fu(this.serializer,e))};this.q_(t)}}class uh{}class dh extends uh{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Gi(Wi.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Go(e,Iu(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Wi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Gi(Wi.UNKNOWN,e.toString())})}Ho(e,t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Ho(e,Iu(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Wi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Gi(Wi.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class hh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(Vi(t),this.aa=!1):Fi("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const fh="RemoteStore";class mh{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{kh(this)&&(Fi(fh,"Restarting streams for network reachability change."),await async function(e){const t=Hi(e);t.Ea.add(4),await gh(t),t.Ra.set("Unknown"),t.Ea.delete(4),await ph(t)}(this))})}),this.Ra=new hh(n,r)}}async function ph(e){if(kh(e))for(const t of e.da)await t(!0)}async function gh(e){for(const t of e.da)await t(!1)}function yh(e,t){const n=Hi(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Nh(n)?wh(n):Bh(n).O_()&&bh(n,t))}function vh(e,t){const n=Hi(e),r=Bh(n);n.Ia.delete(t),r.O_()&&xh(n,t),0===n.Ia.size&&(r.O_()?r.L_():kh(n)&&n.Ra.set("Unknown"))}function bh(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ca.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Bh(e).Y_(t)}function xh(e,t){e.Va.Ue(t),Bh(e).Z_(t)}function wh(e){e.Va=new gu({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Bh(e).start(),e.Ra.ua()}function Nh(e){return kh(e)&&!Bh(e).x_()&&e.Ia.size>0}function kh(e){return 0===Hi(e).Ea.size}function Sh(e){e.Va=void 0}async function Eh(e){e.Ra.set("Online")}async function _h(e){e.Ia.forEach((t,n)=>{bh(e,t)})}async function Ch(e,t){Sh(e),Nh(e)?(e.Ra.ha(t),wh(e)):e.Ra.set("Unknown")}async function Th(e,t,n){if(e.Ra.set("Online"),t instanceof mu&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Fi(fh,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Ih(e,n)}else if(t instanceof hu?e.Va.Ze(t):t instanceof fu?e.Va.st(t):e.Va.tt(t),!n.isEqual(Ca.min()))try{const t=await Md(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ia.get(r);s&&e.Ia.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Io.EMPTY_BYTE_STRING,r.snapshotVersion)),xh(e,t);const s=new Ju(r.target,t,n,r.sequenceNumber);bh(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Fi(fh,"Failed to raise snapshot:",t),await Ih(e,t)}}async function Ih(e,t,n){if(!Va(t))throw t;e.Ea.add(1),await gh(e),e.Ra.set("Offline"),n||(n=()=>Md(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Fi(fh,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await ph(e)})}function jh(e,t){return t().catch(n=>Ih(e,n,t))}async function Ph(e){const t=Hi(e),n=Kh(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:za;for(;Ah(t);)try{const e=await Vd(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Dh(t,e)}catch(e){await Ih(t,e)}Rh(t)&&Oh(t)}function Ah(e){return kh(e)&&e.Ta.length<10}function Dh(e,t){e.Ta.push(t);const n=Kh(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Rh(e){return kh(e)&&!Kh(e).x_()&&e.Ta.length>0}function Oh(e){Kh(e).start()}async function Lh(e){Kh(e).ra()}async function Mh(e){const t=Kh(e);for(const n of e.Ta)t.ea(n.mutations)}async function Fh(e,t,n){const r=e.Ta.shift(),s=Xc.from(r,t,n);await jh(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Ph(e)}async function Vh(e,t){t&&Kh(e).X_&&await async function(e,t){if(function(e){return tu(e)&&e!==Wi.ABORTED}(t.code)){const n=e.Ta.shift();Kh(e).B_(),await jh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Ph(e)}}(e,t),Rh(e)&&Oh(e)}async function Uh(e,t){const n=Hi(e);n.asyncQueue.verifyOperationInProgress(),Fi(fh,"RemoteStore received new credentials");const r=kh(n);n.Ea.add(3),await gh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await ph(n)}async function zh(e,t){const n=Hi(e);t?(n.Ea.delete(2),await ph(n)):t||(n.Ea.add(2),await gh(n),n.Ra.set("Unknown"))}function Bh(e){return e.ma||(e.ma=function(e,t,n){const r=Hi(e);return r.sa(),new lh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Eh.bind(null,e),t_:_h.bind(null,e),r_:Ch.bind(null,e),H_:Th.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Nh(e)?wh(e):e.Ra.set("Unknown")):(await e.ma.stop(),Sh(e))})),e.ma}function Kh(e){return e.fa||(e.fa=function(e,t,n){const r=Hi(e);return r.sa(),new ch(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Lh.bind(null,e),r_:Vh.bind(null,e),ta:Mh.bind(null,e),na:Fh.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Ph(e)):(await e.fa.stop(),e.Ta.length>0&&(Fi(fh,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class qh{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new qh(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Gi(Wi.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hh(e,t){if(Vi("AsyncQueue","".concat(t,": ").concat(e)),Va(e))return new Gi(Wi.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Wh{static emptySet(e){return new Wh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ga.comparator(t.key,n.key):(e,t)=>ga.comparator(e.key,t.key),this.keyedMap=lc(),this.sortedSet=new No(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Wh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Gh{constructor(){this.ga=new No(ga.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Bi(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Qh{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Qh(e,t,Wh.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Yh{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Xh{constructor(){this.queries=Jh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Hi(e),r=n.queries;n.queries=Jh(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Gi(Wi.ABORTED,"Firestore shutting down"))}}function Jh(){return new sc(e=>$l(e),Jl)}async function $h(e,t){const n=Hi(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new Yh,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Hh(e,"Initialization of query '".concat(Zl(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&nf(n)}async function Zh(e,t){const n=Hi(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ef(e,t){const n=Hi(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(s)&&(r=!0);t.wa=s}}r&&nf(n)}function tf(e,t,n){const r=Hi(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function nf(e){e.Ca.forEach(e=>{e.next()})}var rf,sf;(sf=rf||(rf={})).Ma="default",sf.Cache="cache";class af{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Qh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Qh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rf.Cache}}class of{constructor(e){this.key=e}}class lf{constructor(e){this.key=e}}class cf{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=pc(),this.mutatedKeys=pc(),this.eu=nc(e),this.tu=new Wh(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Gh,r=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=ec(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bi(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==i.length||l?{snapshot:new Qh(this.query,e.tu,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Gh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=pc(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new lf(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new of(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=pc();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Qh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const uf="SyncEngine";class df{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class hf{constructor(e){this.key=e,this.hu=!1}}class ff{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new sc(e=>$l(e),Jl),this.Iu=new Map,this.Eu=new Set,this.du=new No(ga.comparator),this.Au=new Map,this.Ru=new xd,this.Vu={},this.mu=new Map,this.fu=ad.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function mf(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Of(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await gf(r,t,n,!0),s}async function pf(e,t){const n=Of(e);await gf(n,t,!0,!1)}async function gf(e,t,n,r){const s=await Ud(e.localStore,Ql(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await yf(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&yh(e.remoteStore,s),o}async function yf(e,t,n,r,s){e.pu=(t,n,r)=>async function(e,t,n,r){let s=t.view.ru(n);s.Cs&&(s=await Bd(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return If(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const i=await Bd(e.localStore,t,!0),a=new cf(t,i.Qs),o=a.ru(i.documents),l=du.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);If(e,n,c.au);const u=new df(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function vf(e,t,n){const r=Hi(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(e=>!Jl(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await zd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&vh(r.remoteStore,s.targetId),Cf(r,s.targetId)}).catch(La)):(Cf(r,s.targetId),await zd(r.localStore,s.targetId,!0))}async function bf(e,t){const n=Hi(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vh(n.remoteStore,r.targetId))}async function xf(e,t){const n=Hi(e);try{const e=await function(e,t){const n=Hi(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Io.EMPTY_BYTE_STRING,Ca.min()).withLastLimboFreeSnapshotVersion(Ca.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&a.push(n.Pi.updateTargetData(e,c))});let o=ac(),l=pc();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Fd(e,i,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(Ca.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Ma.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(qi(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?qi(r.hu,14607):e.removedDocuments.size>0&&(qi(r.hu,42227),r.hu=!1))}),await Af(n,e,t)}catch(e){await La(e)}}function wf(e,t,n){const r=Hi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Hi(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.Sa)s.va(t)&&(r=!0)}),r&&nf(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Nf(e,t,n){const r=Hi(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let e=new No(ga.comparator);e=e.insert(i,ml.newNoDocument(i,Ca.min()));const n=pc().add(i),s=new uu(Ca.min(),new Map,new No(ia),e,n);await xf(r,s),r.du=r.du.remove(i),r.Au.delete(t),Pf(r)}else await zd(r.localStore,t,!1).then(()=>Cf(r,t,n)).catch(La)}async function kf(e,t){const n=Hi(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Hi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=Ma.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);qi(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=pc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);_f(n,r,null),Ef(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Af(n,e)}catch(e){await La(e)}}async function Sf(e,t,n){const r=Hi(e);try{const e=await function(e,t){const n=Hi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(qi(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);_f(r,t,n),Ef(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Af(r,e)}catch(n){await La(n)}}function Ef(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function _f(e,t,n){const r=Hi(e);let s=r.Vu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function Cf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Tf(e,t)})}function Tf(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(vh(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Pf(e))}function If(e,t,n){for(const r of n)r instanceof of?(e.Ru.addReference(r.key,t),jf(e,r)):r instanceof lf?(Fi(uf,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Tf(e,r.key)):Bi(19791,{wu:r})}function jf(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Fi(uf,"New document in limbo: "+n),e.Eu.add(r),Pf(e))}function Pf(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ga(fa.fromString(t)),r=e.fu.next();e.Au.set(r,new hf(n)),e.du=e.du.insert(n,r),yh(e.remoteStore,new Ju(Ql(ql(n.path)),r,"TargetPurposeLimboResolution",Ua.ce))}}async function Af(e,t,n){const r=Hi(e),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const s=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=jd.As(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(e,t){const n=Hi(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ma.forEach(t,t=>Ma.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ma.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Va(e))throw e;Fi(Dd,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,s)}}}(r.localStore,i))}async function Df(e,t){const n=Hi(e);if(!n.currentUser.isEqual(t)){Fi(uf,"User change. New user:",t.toKey());const e=await Ld(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Gi(Wi.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Af(n,e.Ls)}}function Rf(e,t){const n=Hi(e),r=n.Au.get(t);if(r&&r.hu)return pc().add(r.key);{let e=pc();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Of(e){const t=Hi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=xf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Nf.bind(null,t),t.Pu.H_=ef.bind(null,t.eventManager),t.Pu.yu=tf.bind(null,t.eventManager),t}function Lf(e){const t=Hi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Sf.bind(null,t),t}class Mf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Od(this.persistence,new Ad,e.initialUser,this.serializer)}Cu(e){return new _d(Td.mi,this.serializer)}Du(e){return new Hd}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mf.provider={build:()=>new Mf};class Ff extends Mf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){qi(this.persistence.referenceDelegate instanceof Id,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new dd(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?id.withCacheSize(this.cacheSizeBytes):id.DEFAULT;return new _d(e=>Id.mi(e,t),this.serializer)}}class Vf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>wf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Df.bind(null,this.syncEngine),await zh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Xh}createDatastore(e){const t=sh(e.databaseInfo.databaseId),n=function(e){return new nh(e)}(e.databaseInfo);return function(e,t,n,r){return new dh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new mh(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>wf(this.syncEngine,e,0),Qd.v()?new Qd:new Wd)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new ff(e,t,n,r,s,i);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Hi(e);Fi(fh,"RemoteStore shutting down."),t.Ea.add(5),await gh(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Vf.provider={build:()=>new Vf};class Uf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const zf="FirestoreClient";class Bf{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ri.UNAUTHENTICATED,this.clientId=sa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{Fi(zf,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Fi(zf,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Hh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Kf(e,t){e.asyncQueue.verifyOperationInProgress(),Fi(zf,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Ld(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function qf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Hf(e);Fi(zf,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Uh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Uh(t.remoteStore,n)),e._onlineComponents=t}async function Hf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Fi(zf,"Using user provided OfflineComponentProvider");try{await Kf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Wi.FAILED_PRECONDITION||e.code===Wi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ui("Error using user provided cache. Falling back to memory cache: "+n),await Kf(e,new Mf)}}else Fi(zf,"Using default OfflineComponentProvider"),await Kf(e,new Ff(void 0));return e._offlineComponents}async function Wf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Fi(zf,"Using user provided OnlineComponentProvider"),await qf(e,e._uninitializedComponentsProvider._online)):(Fi(zf,"Using default OnlineComponentProvider"),await qf(e,new Vf))),e._onlineComponents}function Gf(e){return Wf(e).then(e=>e.syncEngine)}async function Qf(e){const t=await Wf(e),n=t.eventManager;return n.onListen=mf.bind(null,t.syncEngine),n.onUnlisten=vf.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=pf.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=bf.bind(null,t.syncEngine),n}function Yf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Qi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Uf({next:o=>{i.Nu(),t.enqueueAndForget(()=>Zh(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new Gi(Wi.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new Gi(Wi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new af(ql(n.path),i,{includeMetadataChanges:!0,qa:!0});return $h(e,a)}(await Qf(e),e.asyncQueue,t,n,r)),r.promise}function Xf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Jf=new Map,$f="firestore.googleapis.com",Zf=!0;class em{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Gi(Wi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$f,this.ssl=Zf}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Zf;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=sd;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ld)throw new Gi(Wi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Gi(Wi.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Gi(Wi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Gi(Wi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Gi(Wi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tm{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new em({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Gi(Wi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Gi(Wi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new em(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Xi;switch(e.type){case"firstParty":return new ea(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Gi(Wi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Jf.get(e);t&&(Fi("ComponentProvider","Removing Datastore"),Jf.delete(e),t.terminate())}(this),Promise.resolve()}}function nm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=wa(e,tm);const s=$(t),i=e._getSettings(),a=u(u({},i),{},{emulatorOptions:e._getEmulatorOptions()}),o="".concat(t,":").concat(n);s&&(Z("https://".concat(o)),ne("Firestore",!0)),i.host!==$f&&i.host!==o&&Ui("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=u(u({},i),{},{host:o,ssl:s,emulatorOptions:r});if(!ue(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ri.MOCK_USER;else{var c;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=u({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[q(JSON.stringify({alg:"none",type:"JWT"})),q(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Gi(Wi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ri(s)}e._authCredentials=new Ji(new Yi(t,n))}}class rm{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new rm(this.firestore,e,this._query)}}class sm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new im(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sm(this.firestore,e,this._key)}toJSON(){return{type:sm._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(ka(t,sm._jsonSchema))return new sm(e,n||null,new ga(fa.fromString(t.referencePath)))}}sm._jsonSchemaVersion="firestore/documentReference/1.0",sm._jsonSchema={type:Na("string",sm._jsonSchemaVersion),referencePath:Na("string")};class im extends rm{constructor(e,t,n){super(e,t,ql(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sm(this.firestore,null,new ga(e))}withConverter(e){return new im(this.firestore,e,this._path)}}function am(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=ye(e),1===arguments.length&&(t=sa.newId()),ya("doc","path",t),e instanceof tm){const n=fa.fromString(t,...r);return va(n),new sm(e,null,new ga(n))}{if(!(e instanceof sm||e instanceof im))throw new Gi(Wi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(fa.fromString(t,...r));return va(n),new sm(e.firestore,e instanceof im?e.converter:null,new ga(n))}}const om="AsyncQueue";class lm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ih(this,"async_queue_retry"),this._c=()=>{const e=rh();e&&Fi(om,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=rh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=rh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Qi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Va(e))throw e;Fi(om,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Vi("INTERNAL UNHANDLED ERROR: ",cm(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=qh.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Bi(47125,{Pc:cm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function cm(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function um(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class dm extends tm{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new lm,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lm(e),this._firestoreClient=void 0,await e}}}function hm(e){if(e._terminated)throw new Gi(Wi.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||fm(e),e._firestoreClient}function fm(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new zo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Xf(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||null!==(n=s.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Bf(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class mm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mm(Io.fromBase64String(e))}catch(e){throw new Gi(Wi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new mm(Io.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mm._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ka(e,mm._jsonSchema))return mm.fromBase64String(e.bytes)}}mm._jsonSchemaVersion="firestore/bytes/1.0",mm._jsonSchema={type:Na("string",mm._jsonSchemaVersion),bytes:Na("string")};class pm{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Gi(Wi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pa(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gm{constructor(e){this._methodName=e}}class ym{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Gi(Wi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Gi(Wi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ia(this._lat,e._lat)||ia(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ym._jsonSchemaVersion}}static fromJSON(e){if(ka(e,ym._jsonSchema))return new ym(e.latitude,e.longitude)}}ym._jsonSchemaVersion="firestore/geoPoint/1.0",ym._jsonSchema={type:Na("string",ym._jsonSchemaVersion),latitude:Na("number"),longitude:Na("number")};class vm{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vm._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ka(e,vm._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new vm(e.vectorValues);throw new Gi(Wi.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vm._jsonSchemaVersion="firestore/vectorValue/1.0",vm._jsonSchema={type:Na("string",vm._jsonSchemaVersion),vectorValues:Na("object")};const bm=/^__.*__$/;class xm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Kc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bc(e,this.data,t,this.fieldTransforms)}}function wm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bi(40011,{Ac:e})}}class Nm{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Nm(u(u({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Dm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(wm(this.Ac)&&bm.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class km{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||sh(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Nm({Ac:e,methodName:t,Dc:n,path:pa.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sm(e){const t=e._freezeSettings(),n=sh(e._databaseId);return new km(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Em(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);Im("Data must be an object, but it was:",a,r);const o=Cm(r,a);let l,c;if(i.merge)l=new Co(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=jm(t,r,n);if(!a.contains(s))throw new Gi(Wi.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));Rm(e,s)||e.push(s)}l=new Co(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new xm(new hl(o),l,c)}function _m(e,t){if(Tm(e=ye(e)))return Im("Unsupported field value:",t,e),Cm(e,t);if(e instanceof gm)return function(e,t){if(!wm(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=_m(s,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ye(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=_a.fromDate(e);return{timestampValue:Su(t.serializer,n)}}if(e instanceof _a){const n=new _a(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Su(t.serializer,n)}}if(e instanceof ym)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof mm)return{bytesValue:Eu(t.serializer,e._byteString)};if(e instanceof sm){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Tu(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof vm)return function(e,t){return{mapValue:{fields:{[qo]:{stringValue:Go},[Qo]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return vc(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(xa(e)))}(e,t)}function Cm(e,t){const n={};return wo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):xo(e,(e,r)=>{const s=_m(r,t.mc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function Tm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof _a||e instanceof ym||e instanceof mm||e instanceof sm||e instanceof gm||e instanceof vm)}function Im(e,t,n){if(!Tm(n)||!ba(n)){const r=xa(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function jm(e,t,n){if((t=ye(t))instanceof pm)return t._internalPath;if("string"==typeof t)return Am(e,t);throw Dm("Field path arguments must be of type string or ",e,!1,void 0,n)}const Pm=new RegExp("[~\\*/\\[\\]]");function Am(e,t,n){if(t.search(Pm)>=0)throw Dm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new pm(...t.split("."))._internalPath}catch(r){throw Dm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Dm(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new Gi(Wi.INVALID_ARGUMENT,o+e+l)}function Rm(e,t){return e.some(e=>e.isEqual(t))}class Om{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new sm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Lm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Mm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Lm extends Om{data(){return super.data()}}function Mm(e,t){return"string"==typeof t?Am(e,t):t instanceof pm?t._internalPath:t._delegate._internalPath}function Fm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Gi(Wi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vm{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ao(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Do(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Bi(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return xo(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Qo].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Ao(e.doubleValue));return new vm(n)}convertGeoPoint(e){return new ym(Ao(e.latitude),Ao(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Vo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Uo(e));default:return null}}convertTimestamp(e){const t=Po(e);return new _a(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=fa.fromString(e);qi(Xu(n),9688,{name:e});const r=new Ko(n.get(1),n.get(3)),s=new ga(n.popFirst(5));return r.isEqual(t)||Vi("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function Um(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class zm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bm extends Om{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Km(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Mm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Gi(Wi.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Bm._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Bm._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bm._jsonSchema={type:Na("string",Bm._jsonSchemaVersion),bundleSource:Na("string","DocumentSnapshot"),bundleName:Na("string"),bundle:Na("string")};class Km extends Bm{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class qm{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new zm(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Km(this._firestore,this._userDataWriter,n.key,n,new zm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Gi(Wi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Km(e._firestore,e._userDataWriter,n.doc.key,n.doc,new zm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Km(e._firestore,e._userDataWriter,t.doc.key,t.doc,new zm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Hm(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Gi(Wi.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sa.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Hm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bi(61501,{type:e})}}qm._jsonSchemaVersion="firestore/querySnapshot/1.0",qm._jsonSchema={type:Na("string",qm._jsonSchemaVersion),bundleSource:Na("string","QuerySnapshot"),bundleName:Na("string"),bundle:Na("string")};class Wm extends Vm{constructor(e){super(),this.firestore=e}convertBytes(e){return new mm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sm(this.firestore,null,t)}}function Gm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=ye(e);let s={includeMetadataChanges:!1,source:"default"},i=0;"object"!=typeof n[i]||um(n[i])||(s=n[i++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(um(n[i])){var o,l,c;const e=n[i];n[i]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[i+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[i+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,d,h;if(e instanceof sm)d=wa(e.firestore,dm),h=ql(e._key.path),u={next:t=>{n[i]&&n[i](Ym(d,e,t))},error:n[i+1],complete:n[i+2]};else{const t=wa(e,rm);d=wa(t.firestore,dm),h=t._query;const r=new Wm(d);u={next:e=>{n[i]&&n[i](new qm(d,r,t,e))},error:n[i+1],complete:n[i+2]},Fm(e._query)}return function(e,t,n,r){const s=new Uf(r),i=new af(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>$h(await Qf(e),i)),()=>{s.Nu(),e.asyncQueue.enqueueAndForget(async()=>Zh(await Qf(e),i))}}(hm(d),h,a,u)}function Qm(e,t){return function(e,t){const n=new Qi;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Lf(e);try{const e=await function(e,t){const n=Hi(e),r=_a.now(),s=t.reduce((e,t)=>e.add(t.key),pc());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=ac(),l=pc();return n.Ns.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=Uc(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Kc(e.key,t,fl(t.value.mapValue),Rc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:cc(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new No(ia)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Af(r,e.changes),await Ph(r.remoteStore)}catch(e){const t=Hh(e,"Failed to persist write");n.reject(t)}}(await Gf(e),t,n)),n.promise}(hm(e),t)}function Ym(e,t,n){const r=n.docs.get(t._key),s=new Wm(e);return new Bm(e,s,t._key,r,new zm(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Oi=e}(At),Ct(new ve("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new dm(new $i(e.getProvider("auth-internal")),new na(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Gi(Wi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ko(e.options.projectId,t)}(i,r),i);return s=u({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ot(Ai,Di,e),Ot(Ai,Di,"esm2020")}();const Xm=Dt({apiKey:"AIzaSyA6x2AdGIpHAw5raa5dGpxZ3nSIuf_qx6M",authDomain:"duldulze.firebaseapp.com",projectId:"duldulze",storageBucket:"duldulze.firebaseapp.com",messagingSenderId:"262019588776",appId:"1:262019588776:web:399e3e44b1c7610367189d",measurementId:"G-LSST5V2948"}),Jm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt();const t=Tt(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Tt(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(ue(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;en(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:di,persistence:[ws,ts,as]}),r=X("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>pi)return;const r=null===t||void 0===t?void 0:t.token;gi!==r&&(gi=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){ye(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){ye(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=Q("auth");return i&&Nr(n,"http://".concat(i)),n}(Xm),$m=function(e,t){const n="object"==typeof e?e:Rt(),r="string"==typeof e?e:t||Bo,s=Tt(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(e=>{const t=Q(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&nm(s,...e)}return s}(Xm);var Zm=n(579);const ep=e=>{let{onLogin:t}=e;const[n,s]=(0,r.useState)(""),[i,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1);return(0,Zm.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-emerald-50 via-blue-50 to-teal-50",children:[(0,Zm.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,Zm.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-emerald-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"}),(0,Zm.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"}),(0,Zm.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-teal-400 rounded-full mix-blend-multiply filter blur-xl opacity-10 animate-pulse"})]}),(0,Zm.jsxs)("div",{className:"relative z-10 w-full max-w-md",children:[(0,Zm.jsxs)("div",{className:"text-center mb-8",children:[(0,Zm.jsx)("div",{className:"mx-auto w-20 h-20 bg-emerald-600 rounded-full flex items-center justify-center mb-4 shadow-lg",children:(0,Zm.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zm.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),(0,Zm.jsx)("h1",{className:"text-4xl font-bold text-emerald-800 mb-2",children:"D\xdcLD\xdcL"}),(0,Zm.jsx)("h2",{className:"text-xl font-semibold text-emerald-700 mb-1",children:"ZEYT\u0130NYA\u011eI FABR\u0130KASI"}),(0,Zm.jsx)("p",{className:"text-gray-600 text-sm",children:"Fabrika Y\xf6netim Sistemi"})]}),(0,Zm.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0),l("");try{await function(e,t,n){return It(e.app)?Promise.reject(rn(e)):Yr(ye(e),Or.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Xr(e),t})}(Jm,n,i),t()}catch(r){l("Giri\u015f ba\u015far\u0131s\u0131z! L\xfctfen e-posta ve \u015fifrenizi kontrol edin.")}u(!1)},className:"bg-white/80 backdrop-blur-sm p-8 rounded-2xl shadow-2xl border border-white/50",children:[(0,Zm.jsx)("h3",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Ho\u015f Geldiniz"}),o&&(0,Zm.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded-r-lg",children:(0,Zm.jsxs)("div",{className:"flex items-center",children:[(0,Zm.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Zm.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),o]})}),(0,Zm.jsxs)("div",{className:"mb-6",children:[(0,Zm.jsx)("label",{className:"block mb-2 text-sm font-semibold text-gray-700",children:"E-posta Adresi"}),(0,Zm.jsxs)("div",{className:"relative",children:[(0,Zm.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zm.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})}),(0,Zm.jsx)("input",{type:"email",value:n,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 bg-white/50 backdrop-blur-sm",placeholder:"ornek@email.com",required:!0,autoFocus:!0})]})]}),(0,Zm.jsxs)("div",{className:"mb-8",children:[(0,Zm.jsx)("label",{className:"block mb-2 text-sm font-semibold text-gray-700",children:"\u015eifre"}),(0,Zm.jsxs)("div",{className:"relative",children:[(0,Zm.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zm.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,Zm.jsx)("input",{type:"password",value:i,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 bg-white/50 backdrop-blur-sm",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0})]})]}),(0,Zm.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-emerald-700 hover:to-teal-700 focus:ring-4 focus:ring-emerald-500/50 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",disabled:c,children:c?(0,Zm.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Zm.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,Zm.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Zm.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Giri\u015f Yap\u0131l\u0131yor..."]}):(0,Zm.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Zm.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Zm.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Giri\u015f Yap"]})})]}),(0,Zm.jsx)("div",{className:"text-center mt-6",children:(0,Zm.jsx)("p",{className:"text-gray-600 text-sm",children:"G\xfcvenli giri\u015f i\xe7in Firebase Authentication kullan\u0131lmaktad\u0131r"})})]})]})},tp=["label","id"],np=["label","id"],rp={customers:[],transactions:[],workerExpenses:[],factoryOverhead:[],pomaceRevenues:[],tinPurchases:[],plasticPurchases:[],oilPurchases:[],oilSales:[],defaultPrices:{pricePerKg:3,tinPrices:{s16:80,s10:70,s5:60},plasticPrices:{s10:20,s5:15,s2:10},oilPurchasePrice:200,oilSalePrice:250}},sp=async e=>{if(!e)return console.log("No user ID, returning mock data"),rp;try{console.log("Reading data from Firestore for user:",e);const t=am($m,"userData",e),n=await function(e){e=wa(e,sm);const t=wa(e.firestore,dm);return Yf(hm(t),e._key).then(n=>Ym(t,e,n))}(t);if(n.exists())return console.log("Data found in Firestore"),n.data();{console.log("No data in Firestore, checking localStorage for migration");const t=localStorage.getItem("safDamlaData");if(t){const n=JSON.parse(t);return console.log("Migrating localStorage data to Firestore"),await ip(n,e),localStorage.removeItem("safDamlaData"),n}return console.log("No data found, returning mock data"),rp}}catch(t){console.error("Error reading data from Firestore:",t);const e=localStorage.getItem("safDamlaData");return e?JSON.parse(e):rp}},ip=async(e,t)=>{if(!t)return console.log("No user ID, falling back to localStorage"),void localStorage.setItem("safDamlaData",JSON.stringify(e));try{console.log("Writing data to Firestore for user:",t);const n=am($m,"userData",t);await function(e,t,n){e=wa(e,sm);const r=wa(e.firestore,dm),s=Um(e.converter,t,n);return Qm(r,[Em(Sm(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Rc.none())])}(n,e,{merge:!0}),console.log("Data successfully written to Firestore")}catch(n){console.error("Error writing data to Firestore:",n),localStorage.setItem("safDamlaData",JSON.stringify(e))}},ap=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=Number(e);if(isNaN(n)||""===e||null===e){return t?"\u20ba"===t?"0 \u20ba":"0":"0"}const r=new Intl.NumberFormat("tr-TR",{maximumFractionDigits:2}).format(n);return t?"".concat(r," ").concat(t):r},op=(e,t)=>{const n=Number(e),r=Number(t);if(n>0&&r>0){const e=(n/r).toFixed(2);return"".concat(ap(n)," kg zeytin / ").concat(ap(r)," litre ya\u011f = ").concat(e)}return"N/A"},lp=e=>Math.round(100*(e+Number.EPSILON))/100,cp=e=>{try{if(!e)return"";const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(r,"-").concat(s)}catch(t){return console.error("Error formatting date:",t),""}};const up=e=>{let{label:t,id:n}=e,r=i(e,tp);return(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{htmlFor:n,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,Zm.jsx)("input",u(u({id:n},r),{},{className:"block w-full border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-emerald-500 focus:border-emerald-500"}))]})},dp=e=>{let{label:t,id:n}=e,r=i(e,np);return(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{htmlFor:n,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,Zm.jsx)("textarea",u(u({id:n},r),{},{className:"block w-full border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-emerald-500 focus:border-emerald-500"}))]})},hp=e=>{let{icon:t,text:n,active:r,onClick:s,textClassName:i=""}=e;return(0,Zm.jsxs)("button",{onClick:s,className:"flex items-center justify-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200 ".concat(r?"bg-emerald-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100"),children:[(0,Zm.jsx)("span",{className:"w-6 h-6",children:t}),(0,Zm.jsx)("span",{className:"font-semibold text-base ".concat(i),children:n})]})},fp=e=>{let{customers:t,transactions:n,workerExpenses:s,factoryOverhead:i,pomaceRevenues:a,tinPurchases:o,plasticPurchases:l,onOpenNewTransactionModal:c,navigateToCustomerDetails:u}=e;const[d,h]=(0,r.useState)(5),f=n.reduce((e,t)=>e+Number(t.oliveKg||0),0),m=n.reduce((e,t)=>e+Number(t.oilLitre||0),0),p=n.reduce((e,t)=>e+Number(t.paymentReceived||0),0),g=n.reduce((e,t)=>e+Number(t.totalCost||0),0),y=n.reduce((e,t)=>e+Number(t.paymentLoss||0),0),v=g-p-y,b=(s.reduce((e,t)=>e+Number(t.amount||0),0),i.reduce((e,t)=>e+Number(t.amount||0),0),a.reduce((e,t)=>e+Number(t.totalRevenue||0),0),n.reduce((e,t)=>e+Number(t.oliveKg||0)*Number(t.pricePerKg||0),0)),x=n.reduce((e,t)=>{var n,r,s,i,a,o;return e+Number((null===(n=t.tinCounts)||void 0===n?void 0:n.s16)||0)*Number((null===(r=t.tinPrices)||void 0===r?void 0:r.s16)||0)+Number((null===(s=t.tinCounts)||void 0===s?void 0:s.s10)||0)*Number((null===(i=t.tinPrices)||void 0===i?void 0:i.s10)||0)+Number((null===(a=t.tinCounts)||void 0===a?void 0:a.s5)||0)*Number((null===(o=t.tinPrices)||void 0===o?void 0:o.s5)||0)},0),w=n.reduce((e,t)=>{var n,r,s,i,a,o;return e+Number((null===(n=t.plasticCounts)||void 0===n?void 0:n.s10)||0)*Number((null===(r=t.plasticPrices)||void 0===r?void 0:r.s10)||0)+Number((null===(s=t.plasticCounts)||void 0===s?void 0:s.s5)||0)*Number((null===(i=t.plasticPrices)||void 0===i?void 0:i.s5)||0)+Number((null===(a=t.plasticCounts)||void 0===a?void 0:a.s2)||0)*Number((null===(o=t.plasticPrices)||void 0===o?void 0:o.s2)||0)},0),N=n.reduce((e,t)=>e+(Number(t.oliveKg)||0)*(Number(t.pricePerKg)||0),0),k=n.reduce((e,t)=>e+Number(t.oliveKg||0),0),S=n.reduce((e,t)=>e+Number(t.oilLitre||0),0),E=k>0&&S>0?(k/S).toFixed(2):"N/A",_=[...n].sort((e,t)=>new Date(t.date)-new Date(e.date)),O="all"===d?_:_.slice(0,Number(d)),L=e=>{var n;return(null===(n=t.find(t=>t.id===e))||void 0===n?void 0:n.name)||"Bilinmeyen M\xfc\u015fteri"},M=function(e){let{transactions:t,workerExpenses:n,factoryOverhead:r,pomaceRevenues:s,tinPurchases:i,plasticPurchases:a}=e;const o=t.reduce((e,t)=>e+Number(t.totalCost||0),0),l=s.reduce((e,t)=>e+Number(t.totalRevenue||0),0),c=t.reduce((e,t)=>e+Number(t.paymentLoss||0),0),u=n.reduce((e,t)=>e+Number(t.amount||0),0),d=r.reduce((e,t)=>e+Number(t.amount||0),0),h=i.reduce((e,t)=>e+Number(t.totalCost||0),0),f=a.reduce((e,t)=>e+Number(t.totalCost||0),0);function m(e,t){let n={s16:0,s10:0,s5:0},r={s16:0,s10:0,s5:0};e.forEach(e=>{n.s16+=Number(e.s16||0),n.s10+=Number(e.s10||0),n.s5+=Number(e.s5||0),r.s16+=Number(e.s16||0)*Number(e.tinPrice||0),r.s10+=Number(e.s10||0)*Number(e.tinPrice||0),r.s5+=Number(e.s5||0)*Number(e.tinPrice||0)});const s={s16:n.s16>0?r.s16/n.s16:0,s10:n.s10>0?r.s10/n.s10:0,s5:n.s5>0?r.s5/n.s5:0};let i={s16:0,s10:0,s5:0};t.forEach(e=>{var t,n,r;i.s16+=Number((null===(t=e.tinCounts)||void 0===t?void 0:t.s16)||0),i.s10+=Number((null===(n=e.tinCounts)||void 0===n?void 0:n.s10)||0),i.s5+=Number((null===(r=e.tinCounts)||void 0===r?void 0:r.s5)||0)});let a={s16:n.s16-i.s16,s10:n.s10-i.s10,s5:n.s5-i.s5};return{s16:{maliyet_kalan:a.s16*s.s16},s10:{maliyet_kalan:a.s10*s.s10},s5:{maliyet_kalan:a.s5*s.s5}}}function p(e,t){let n={s10:0,s5:0,s2:0},r={s10:0,s5:0,s2:0};e.forEach(e=>{n.s10+=Number(e.s10||0),n.s5+=Number(e.s5||0),n.s2+=Number(e.s2||0),r.s10+=Number(e.s10||0)*Number(e.plasticPrice||0),r.s5+=Number(e.s5||0)*Number(e.plasticPrice||0),r.s2+=Number(e.s2||0)*Number(e.plasticPrice||0)});const s={s10:n.s10>0?r.s10/n.s10:0,s5:n.s5>0?r.s5/n.s5:0,s2:n.s2>0?r.s2/n.s2:0};let i={s10:0,s5:0,s2:0};t.forEach(e=>{var t,n,r;i.s10+=Number((null===(t=e.plasticCounts)||void 0===t?void 0:t.s10)||0),i.s5+=Number((null===(n=e.plasticCounts)||void 0===n?void 0:n.s5)||0),i.s2+=Number((null===(r=e.plasticCounts)||void 0===r?void 0:r.s2)||0)});let a={s10:n.s10-i.s10,s5:n.s5-i.s5,s2:n.s2-i.s2};return{s10:{maliyet_kalan:a.s10*s.s10},s5:{maliyet_kalan:a.s5*s.s5},s2:{maliyet_kalan:a.s2*s.s2}}}const g=m(i||[],t),y=p(a||[],t),v=Object.values(g).reduce((e,t)=>e+(t.maliyet_kalan||0),0),b=Object.values(y).reduce((e,t)=>e+(t.maliyet_kalan||0),0),x=u+d+h+f,w=o+l-c+v+b,N=w-x;return{totalFactoryIncome:w,totalFactoryExpenses:x,netFactoryBalance:N,totalWorkerExpenses:u,totalFactoryOverhead:d,totalPomaceRevenues:l,totalBilledAmount:o,totalPaymentLoss:c,toplamTenekeKalanMaliyet:v,toplamBidonKalanMaliyet:b,totalTinPurchaseCost:h,totalPlasticPurchaseCost:f}}({transactions:n,workerExpenses:s,factoryOverhead:i,pomaceRevenues:a,tinPurchases:o,plasticPurchases:l});return(0,Zm.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,Zm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Zm.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Ana Ekran"}),(0,Zm.jsxs)("button",{onClick:()=>c(null),className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 shadow-md transition-colors",children:[(0,Zm.jsx)(T,{className:"w-5 h-5"}),(0,Zm.jsx)("span",{children:"\u0130\u015flem Ekle"})]})]}),(0,Zm.jsxs)("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-2",children:[(0,Zm.jsx)(Dp,{title:"Toplam \u0130\u015flenen Zeytin",value:ap(f,"kg"),icon:(0,Zm.jsx)(I,{className:"text-[#556B2F] text-xl"})}),(0,Zm.jsx)(Dp,{title:"Toplam \xc7\u0131kan Ya\u011f",value:ap(m,"L"),icon:(0,Zm.jsx)(j,{className:"text-[#556B2F] text-xl"})}),(0,Zm.jsx)(Dp,{title:"Genel Zeytin/Ya\u011f Oran\u0131",value:E,icon:(0,Zm.jsx)(P,{className:"text-purple-600"})}),(0,Zm.jsx)(Dp,{title:"Zeytin \xc7ekim \xdccreti",value:ap(N,"\u20ba"),icon:(0,Zm.jsx)(A,{className:"text-emerald-600"})}),(0,Zm.jsx)(Dp,{title:"Toplam Has\u0131lat",value:ap(g-y,"\u20ba"),icon:(0,Zm.jsx)(C,{className:"w-6 h-6 text-emerald-600"}),iconColorClass:"text-blue-600",children:(0,Zm.jsxs)("div",{className:"text-sm text-gray-600",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"5px"},children:[(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("span",{className:"font-semibold",children:"Zeytin S\u0131k\u0131m\u0131:"})," ",ap(b,"\u20ba")]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("span",{className:"font-semibold",children:"Teneke Sat\u0131\u015f\u0131:"})," ",ap(x,"\u20ba")]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("span",{className:"font-semibold",children:"Bidon Sat\u0131\u015f\u0131:"})," ",ap(w,"\u20ba")]})]})}),(0,Zm.jsx)(Dp,{title:"Al\u0131nan \xd6deme",value:ap(p,"\u20ba"),icon:(0,Zm.jsx)(C,{className:"text-[#556B2F] text-xl"}),iconColorClass:"text-green-600"}),(0,Zm.jsx)(Dp,{title:"Bekleyen \xd6demeler",value:ap(v,"\u20ba"),icon:(0,Zm.jsx)(D,{className:"text-[#556B2F] text-xl"}),iconColorClass:"text-red-600"}),(0,Zm.jsx)(Dp,{title:"\xd6deme Firesi",value:ap(y,"\u20ba"),icon:(0,Zm.jsx)(A,{className:"text-orange-600"})})]}),(0,Zm.jsx)("div",{className:"mt-8",children:(0,Zm.jsx)(mp,{summary:M})}),(0,Zm.jsxs)("div",{className:"flex items-center justify-between mt-8 mb-2",children:[(0,Zm.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Son \u0130\u015flemler"}),(0,Zm.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"border rounded px-2 py-1",children:[(0,Zm.jsx)("option",{value:5,children:"Son 5"}),(0,Zm.jsx)("option",{value:10,children:"Son 10"}),(0,Zm.jsx)("option",{value:20,children:"Son 20"}),(0,Zm.jsx)("option",{value:"all",children:"T\xfcm\xfc"})]})]}),(0,Zm.jsx)("div",{className:"overflow-x-auto",children:(0,Zm.jsxs)("table",{className:"min-w-full bg-white rounded-lg shadow divide-y divide-gray-200",children:[(0,Zm.jsx)("thead",{className:"bg-gray-50",children:(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Tarih"}),(0,Zm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"M\xfc\u015fteri"}),(0,Zm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"A\xe7\u0131klama"}),(0,Zm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Tutar"}),(0,Zm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Al\u0131nan"}),(0,Zm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Bakiye"}),(0,Zm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"\u0130\u015flemler"})]})}),(0,Zm.jsx)("tbody",{className:"divide-y divide-gray-100",children:O.map(e=>(0,Zm.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.date).toLocaleDateString()}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Zm.jsx)("button",{onClick:()=>u("customerDetails",{id:e.customerId,name:L(e.customerId)}),className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold transition-colors hover:bg-blue-200",children:L(e.customerId)})}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.description?"".concat(e.description," (").concat(ap(e.oliveKg)," kg zeytin)"):"".concat(ap(e.oliveKg)," kg zeytin")}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ap(e.totalCost,"\u20ba")}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-emerald-600",children:ap(e.paymentReceived,"\u20ba")}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:ap((e.totalCost||0)-(e.paymentReceived||0)-(e.paymentLoss||0),"\u20ba")}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Zm.jsx)("button",{onClick:()=>c(e),className:"p-2 bg-gray-200 text-gray-600 rounded-full hover:bg-gray-300 hover:text-gray-800 transition-colors",title:"\u0130\u015flemi D\xfczenle",children:(0,Zm.jsx)(R,{className:"w-5 h-5"})})})]},e.id))})]})})]})},mp=e=>{let{summary:t}=e;if(!t)return(0,Zm.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md col-span-full text-center text-gray-500",children:"Finansal \xf6zet hesaplan\u0131yor..."});const{totalFactoryIncome:n,totalFactoryExpenses:r,netFactoryBalance:s,totalWorkerExpenses:i,totalFactoryOverhead:a,totalPomaceRevenues:o,totalBilledAmount:l,totalPaymentLoss:c,toplamTenekeKalanMaliyet:u,toplamBidonKalanMaliyet:d,totalTinPurchaseCost:h,totalPlasticPurchaseCost:f}=t;return(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md col-span-full",children:[(0,Zm.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",style:{fontSize:"26px",textAlign:"center"},children:"Fabrika Toplam Gelir Gider \xd6zeti"}),(0,Zm.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,Zm.jsxs)("div",{className:"bg-emerald-50 p-4 rounded-lg flex flex-col items-center justify-center",children:[(0,Zm.jsx)(C,{className:"w-8 h-8 text-emerald-600 mb-2"}),(0,Zm.jsx)("p",{className:"text-lg font-medium text-gray-700",style:{fontSize:"22px",color:"#212121"},children:"Toplam Gelir"}),(0,Zm.jsx)("p",{className:"text-2xl font-bold text-emerald-800",children:ap(n,"\u20ba")}),(0,Zm.jsxs)("div",{className:"text-sm text-gray-600 mt-2 text-center",children:[(0,Zm.jsxs)("p",{children:["Toplam Has\u0131lat: ",ap(l,"\u20ba")]}),(0,Zm.jsxs)("p",{children:["Pirina Geliri: ",ap(o,"\u20ba")]}),(0,Zm.jsxs)("p",{children:["\xd6deme Firesi: -",ap(c,"\u20ba")]}),(0,Zm.jsxs)("p",{children:["Kalan Teneke Stok De\u011feri: ",ap(u,"\u20ba")]}),(0,Zm.jsxs)("p",{children:["Kalan Bidon Stok De\u011feri: ",ap(d,"\u20ba")]})]})]}),(0,Zm.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg flex flex-col items-center justify-center",children:[(0,Zm.jsx)(O,{className:"w-8 h-8 text-red-600 mb-2"}),(0,Zm.jsx)("p",{className:"text-lg font-medium text-gray-700",style:{fontSize:"22px",color:"#212121"},children:"Toplam Gider"}),(0,Zm.jsx)("p",{className:"text-2xl font-bold text-red-800",children:ap(r,"\u20ba")}),(0,Zm.jsxs)("div",{className:"text-sm text-gray-600 mt-2",children:[(0,Zm.jsxs)("p",{children:["\u0130\u015f\xe7i Giderleri: ",ap(i,"\u20ba")]}),(0,Zm.jsxs)("p",{children:["Muhtelif Giderler: ",ap(a,"\u20ba")]}),(0,Zm.jsxs)("p",{children:["Teneke Al\u0131mlar\u0131: ",ap(h,"\u20ba")]}),(0,Zm.jsxs)("p",{children:["Bidon Al\u0131mlar\u0131: ",ap(f,"\u20ba")]})]})]}),(0,Zm.jsxs)("div",{className:"p-4 rounded-lg flex flex-col items-center justify-center ".concat(s>=0?"bg-blue-50":"bg-orange-50"),children:[(0,Zm.jsx)(k,{className:"w-8 h-8 mb-2 ".concat(s>=0?"text-blue-600":"text-orange-600")}),(0,Zm.jsx)("p",{className:"text-lg font-medium text-gray-700",style:{fontSize:"22px",color:"#212121"},children:"Net Kar-Zarar"}),(0,Zm.jsx)("p",{className:"text-2xl font-bold ".concat(s>=0?"text-blue-800":"text-orange-800"),children:ap(s,"\u20ba")})]})]})]})},pp=e=>{let{customers:t,transactions:n,navigateToCustomerDetails:s,onOpenNewTransactionModal:i,onCollectPayment:a,onDeleteSelected:o}=e;const[l,c]=(0,r.useState)(""),[d,h]=(0,r.useState)("all"),[f,m]=(0,r.useState)({isOpen:!1,customer:null}),[p,g]=(0,r.useState)([]),y=t.map(e=>{const t=n.filter(t=>t.customerId===e.id),r=t.reduce((e,t)=>e+Number(t.totalCost||0),0),s=t.reduce((e,t)=>e+Number(t.paymentReceived||0),0),i=t.reduce((e,t)=>e+Number(t.paymentLoss||0),0);return u(u({},e),{},{remainingBalance:r-s-i})}),v=y.sort((e,t)=>e.name.localeCompare(t.name,"tr",{sensitivity:"base"})).filter(e=>e.name.toLowerCase().includes(l.toLowerCase())).filter(e=>"debtors"===d?e.remainingBalance>0:"non-debtors"!==d||e.remainingBalance<=0),b=v.map(e=>e.id),x=b.length>0&&b.every(e=>p.includes(e));return(0,Zm.jsxs)("div",{className:"space-y-8",children:[(0,Zm.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[(0,Zm.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"M\xfc\u015fterilerimiz"}),(0,Zm.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 w-full md:w-auto",children:[(0,Zm.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,Zm.jsx)(L,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,Zm.jsx)("input",{type:"text",placeholder:"M\xfc\u015fteri Ara...",value:l,onChange:e=>c(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500 w-full"})]}),(0,Zm.jsxs)("div",{className:"flex space-x-2",children:[(0,Zm.jsx)("button",{onClick:()=>h("all"),className:"px-4 py-2 text-sm font-semibold rounded-lg transition-colors ".concat("all"===d?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"T\xfcm\xfc"}),(0,Zm.jsx)("button",{onClick:()=>h("debtors"),className:"px-4 py-2 text-sm font-semibold rounded-lg transition-colors ".concat("debtors"===d?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Bor\xe7lu Olanlar"}),(0,Zm.jsx)("button",{onClick:()=>h("non-debtors"),className:"px-4 py-2 text-sm font-semibold rounded-lg transition-colors ".concat("non-debtors"===d?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Borcu Olmayanlar"}),p.length>0&&(0,Zm.jsxs)("button",{onClick:()=>o(p),className:"px-4 py-2 text-sm font-semibold rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors",children:["Se\xe7ilen (",p.length,") M\xfc\u015fteriyi Sil"]})]})]})]}),0===v.length?(0,Zm.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md text-center text-gray-500",children:(0,Zm.jsx)("p",{children:"Araman\u0131zla e\u015fle\u015fen m\xfc\u015fteri bulunamad\u0131."})}):(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Zm.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"T\xfcm M\xfc\u015fteriler"}),(0,Zm.jsx)("div",{className:"overflow-x-auto",children:(0,Zm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Zm.jsx)("thead",{className:"bg-gray-50 customer-table-header",children:(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("th",{className:"px-2 py-3 text-center",children:(0,Zm.jsx)("input",{type:"checkbox",checked:x,onChange:e=>{e.target.checked?g(b):g([])}})}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"M\xfc\u015fteri Ad\u0131"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kalan Bakiye"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0130\u015flemler"})]})}),(0,Zm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(e=>(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{className:"px-2 py-4 text-center",children:(0,Zm.jsx)("input",{type:"checkbox",checked:p.includes(e.id),onChange:()=>{return t=e.id,void g(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t}})}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(0,Zm.jsx)("button",{onClick:()=>s("customerDetails",e),className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold transition-colors hover:bg-blue-200",children:e.name})}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold ".concat(e.remainingBalance>0?"text-red-600":"text-emerald-600"),children:ap(e.remainingBalance,"\u20ba")}),(0,Zm.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,Zm.jsx)("button",{onClick:()=>m({isOpen:!0,customer:e}),className:"px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors shadow-sm mr-2",title:"Tahsilat Yap",children:"Tahsilat Yap"}),(0,Zm.jsx)("button",{onClick:()=>i({customerId:e.id,customerName:e.name}),className:"px-4 py-2 text-sm bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors shadow-sm mr-2",title:"\u0130\u015flem Ekle",children:"\u0130\u015flem Ekle"}),(0,Zm.jsx)("button",{onClick:()=>s("customerDetails",e),className:"p-2 bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300 hover:text-gray-800 transition-colors",title:"M\xfc\u015fteri Detaylar\u0131n\u0131 G\xf6r\xfcnt\xfcle",children:(0,Zm.jsx)(O,{className:"w-5 h-5"})})]})]},e.id))})]})})]}),f.isOpen&&(0,Zm.jsx)(Pp,{customer:f.customer,onClose:()=>m({isOpen:!1,customer:null}),onSavePayment:(e,t,n)=>{a(e,t,n),m({isOpen:!1,customer:null})}})]})},gp=e=>{let{customers:t,transactions:n,onOpenNewTransactionModal:s,onEditTransaction:i,onDeleteTransaction:a,onDeleteCustomer:o,navigateToCustomerDetails:l}=e;const[c,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[g,y]=(0,r.useState)(null),v=t.map(e=>{const t=n.filter(t=>t.customerId===e.id),r=t.reduce((e,t)=>e+Number(t.totalCost||0),0),s=t.reduce((e,t)=>e+Number(t.paymentReceived||0),0),i=t.reduce((e,t)=>e+Number(t.paymentLoss||0),0),a=t.reduce((e,t)=>e+Number(t.oliveKg||0),0);return u(u({},e),{},{totalBilled:r,totalPaid:s,totalOlive:a,remainingBalance:r-s-i,transactions:t.sort((e,t)=>new Date(t.date)-new Date(e.date))})}),b=v.filter(e=>{const t=e.name.toLowerCase().includes(c.toLowerCase()),n=e.transactions.some(e=>{const t=new Date(e.date),n=h?new Date(h):null,r=m?new Date(m):null;return(!n||t>=n)&&(!r||t<=r)});return t&&(0===e.transactions.length||n)});return(0,Zm.jsxs)("div",{className:"space-y-8",children:[(0,Zm.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Kay\u0131tlar"}),(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0 md:space-x-4",children:[(0,Zm.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full md:w-auto",children:[(0,Zm.jsxs)("div",{className:"relative w-full sm:w-auto",children:[(0,Zm.jsx)(L,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,Zm.jsx)("input",{type:"text",placeholder:"M\xfc\u015fteri Ara...",value:c,onChange:e=>d(e.target.value),className:"pl-10 pr-4 py-2 border rounded-lg w-full"})]}),(0,Zm.jsxs)("div",{className:"relative w-full sm:w-auto",children:[(0,Zm.jsx)(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,Zm.jsx)("input",{type:"date",value:h,onChange:e=>f(e.target.value),className:"pl-10 pr-4 py-2 border rounded-lg w-full"})]}),(0,Zm.jsxs)("div",{className:"relative w-full sm:w-auto",children:[(0,Zm.jsx)(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,Zm.jsx)("input",{type:"date",value:m,onChange:e=>p(e.target.value),className:"pl-10 pr-4 py-2 border rounded-lg w-full"})]})]}),(0,Zm.jsxs)("div",{className:"flex space-x-2 w-full md:w-auto justify-end",children:[(0,Zm.jsxs)("button",{onClick:()=>{let e=["M\xfc\u015fteri Ad\u0131","\u0130\u015flem Tarihi","Zeytin (kg)","Ya\u011f (L)","Ya\u011f Oran\u0131","Kg Ba\u015f\u0131na \xdccret (\u20ba)","Teneke Kap Say\u0131s\u0131","Teneke Kap Fiyat\u0131 (\u20ba)","Plastik Kap Say\u0131s\u0131","Plastik Kap Fiyat\u0131 (\u20ba)","Toplam \xdccret (\u20ba)","Al\u0131nan \xd6deme (\u20ba)","Kalan Bakiye (\u20ba)"].join(";")+"\n";b.forEach(t=>{t.transactions.forEach(n=>{const r=['"'.concat(t.name,'"'),new Date(n.date).toLocaleDateString(),n.oliveKg||0,n.oilLitre||0,op(n.oliveKg,n.oilLitre),n.pricePerKg||0,n.tinCount||0,n.tinPrice||0,n.plasticCount||0,n.plasticPrice||0,n.totalCost||0,n.paymentReceived||0,(n.totalCost||0)-(n.paymentReceived||0)];e+=r.join(";")+"\n"})});const t=new Blob(["\ufeff".concat(e)],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),r=URL.createObjectURL(t);n.setAttribute("href",r),n.setAttribute("download","zeytinyagi_kayitlar_".concat((new Date).toLocaleDateString(),".csv")),document.body.appendChild(n),n.click(),document.body.removeChild(n)},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-md",children:[(0,Zm.jsx)(E,{className:"w-5 h-5"}),(0,Zm.jsx)("span",{children:"D\u0131\u015fa Aktar"})]}),(0,Zm.jsxs)("button",{onClick:()=>s(null),className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 shadow-md",children:[(0,Zm.jsx)(T,{className:"w-5 h-5"}),(0,Zm.jsx)("span",{children:"\u0130\u015flem Ekle"})]})]})]}),(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Zm.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"M\xfc\u015fteri Kay\u0131tlar\u0131"}),0===b.length?(0,Zm.jsx)("p",{className:"text-gray-500",children:"Filtrelerinize uygun m\xfc\u015fteri bulunamad\u0131."}):(0,Zm.jsx)("div",{className:"overflow-x-auto",children:(0,Zm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Zm.jsx)("thead",{className:"bg-gray-50",children:(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"M\xfc\u015fteri Ad\u0131"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Toplam Zeytin (kg)"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Toplam \xdccret"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Al\u0131nan \xd6deme"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kalan Bakiye"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\u0130\u015flemler"}),(0,Zm.jsx)("th",{className:"px-6 py-3"})]})}),(0,Zm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(e=>(0,Zm.jsxs)(r.Fragment,{children:[(0,Zm.jsxs)("tr",{className:"hover:bg-gray-50 customer-table-row",children:[(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Zm.jsx)("button",{onClick:()=>l("customerDetails",e),className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold transition-colors hover:bg-blue-200",children:e.name})}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm customer-table-cell",children:ap(e.totalOlive)}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm customer-table-cell",children:ap(e.totalBilled,"\u20ba")}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm customer-table-cell payment-green",children:ap(e.totalPaid,"\u20ba")}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm customer-table-cell balance-red",children:ap(e.remainingBalance,"\u20ba")}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm customer-table-cell",children:(0,Zm.jsxs)("button",{onClick:()=>y(g===e.id?null:e.id),className:"see-transactions-btn text-blue-900",children:[g===e.id?"Daralt":"\u0130\u015flemleri G\xf6r"," (",e.transactions.length,")"]})}),(0,Zm.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium customer-table-cell",children:[(0,Zm.jsx)("button",{onClick:()=>s({customerId:e.id,customerName:e.name}),className:"px-2 py-1 text-xs bg-emerald-600 text-white rounded-md hover:bg-emerald-700 shadow-sm mr-2",children:"\u0130\u015flem Ekle"}),(0,Zm.jsx)("button",{onClick:()=>l("customerDetails",e),className:"p-2 bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300 hover:text-gray-800 transition-colors",children:(0,Zm.jsx)(R,{className:"w-5 h-5"})})]})]}),g===e.id&&e.transactions.length>0&&(0,Zm.jsx)("tr",{className:"bg-gray-50",children:(0,Zm.jsx)("td",{colSpan:"7",className:"p-0",children:(0,Zm.jsxs)("div",{className:"px-6 py-4",children:[(0,Zm.jsx)("h4",{className:"text-md font-semibold text-gray-700 mb-2",children:"\u0130\u015flem Detaylar\u0131:"}),(0,Zm.jsx)("div",{className:"overflow-x-auto",children:(0,Zm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border rounded-lg",children:[(0,Zm.jsx)("thead",{className:"bg-gray-100",children:(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase",children:"Tarih"}),(0,Zm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase",children:"A\xe7\u0131klama"}),(0,Zm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase",children:"\xdccret"}),(0,Zm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase",children:"Al\u0131nan \xd6deme"}),(0,Zm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase",children:"Bakiye"}),(0,Zm.jsx)("th",{className:"px-4 py-2"})]})}),(0,Zm.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:e.transactions.map(e=>{const t=(e.totalCost||0)-(e.paymentReceived||0)-(e.paymentLoss||0),n=e.description?"".concat(e.description," (").concat(ap(e.oliveKg)," kg zeytin)"):"".concat(ap(e.oliveKg)," kg zeytin");return(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:new Date(e.date).toLocaleDateString()}),(0,Zm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:n}),(0,Zm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:ap(e.totalCost,"\u20ba")}),(0,Zm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:ap(e.paymentReceived,"\u20ba")}),(0,Zm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm ".concat(t>0?"text-red-600":"text-emerald-600"),children:ap(t,"\u20ba")}),(0,Zm.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-right text-sm font-medium",children:[(0,Zm.jsx)("button",{onClick:()=>i(e),className:"p-2 bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300 hover:text-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:"Ara Tahsilat"===e.description,children:(0,Zm.jsx)(R,{className:"w-4 h-4"})}),(0,Zm.jsx)("button",{onClick:()=>a(e.id),className:"text-red-600 p-1 rounded-full hover:bg-red-50 ml-1",children:(0,Zm.jsx)(F,{className:"w-4 h-4"})})]})]},e.id)})})]})})]})})})]},e.id))})]})})]})]})},yp=e=>{let{customer:t,transactions:n,onEditTransaction:s,onDeleteTransaction:i,onBack:a,onDeleteCustomer:o}=e;const l=(0,r.useRef)();if(!t)return(0,Zm.jsxs)("div",{className:"text-center py-8",children:[(0,Zm.jsx)("p",{className:"text-gray-600",children:"M\xfc\u015fteri se\xe7ilmedi."}),(0,Zm.jsx)("button",{onClick:a,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Geri D\xf6n"})]});const c=n.reduce((e,t)=>e+Number(t.oliveKg||0),0),u=n.reduce((e,t)=>e+Number(t.oilLitre||0),0),d=n.reduce((e,t)=>e+Number(t.totalCost||0),0),h=n.reduce((e,t)=>e+Number(t.paymentReceived||0),0),f=n.reduce((e,t)=>e+Number(t.paymentLoss||0),0),m=d-h-f,p=n.reduce((e,t)=>{var n,r,s;return e+(Number(null===(n=t.tinCounts)||void 0===n?void 0:n.s16)||0)+(Number(null===(r=t.tinCounts)||void 0===r?void 0:r.s10)||0)+(Number(null===(s=t.tinCounts)||void 0===s?void 0:s.s5)||0)},0),g=n.reduce((e,t)=>{var n,r,s;return e+(Number(null===(n=t.plasticCounts)||void 0===n?void 0:n.s10)||0)+(Number(null===(r=t.plasticCounts)||void 0===r?void 0:r.s5)||0)+(Number(null===(s=t.plasticCounts)||void 0===s?void 0:s.s2)||0)},0),y=op(c,u);return(0,Zm.jsxs)("div",{className:"space-y-8",children:[(0,Zm.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Zm.jsxs)("h1",{className:"text-3xl font-bold text-gray-800",children:["M\xfc\u015fteri Detaylar\u0131: ",t.name]}),(0,Zm.jsxs)("div",{className:"flex gap-2",children:[(0,Zm.jsx)("button",{onClick:a,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 shadow-sm",children:"Geri D\xf6n"}),(0,Zm.jsx)("button",{onClick:()=>{if(l.current){const e=window.open("","_blank");e.document.write("<html><head><title>M\xfc\u015fteri Detaylar\u0131</title>"),e.document.write("\n        <style>\n          @media print { @page { size: A5; margin: 10mm; } }\n          body { font-family: Arial, sans-serif; margin: 0; padding: 0; }\n          .print-header { text-align: center; font-size: 1.6rem; font-weight: bold; margin-bottom: 8px; letter-spacing: 1px; }\n          .print-section { margin-bottom: 8px; }\n          .print-table { width: 100%; border-collapse: collapse; font-size: 0.95rem; }\n          .print-table th, .print-table td { border: 1px solid #bbb; padding: 4px 6px; text-align: left; }\n          .print-table th { background: #f3f3f3; }\n          .print-summary { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 8px; }\n          .print-summary-item { flex: 1 1 40%; min-width: 120px; margin-bottom: 2px; }\n          .print-label { font-weight: bold; }\n          .print-value { margin-left: 4px; }\n          .print-border { border:2px dashed #333; border-radius:12px; padding:18px; max-width:650px; margin:0 auto; }\n        </style>\n      "),e.document.write("</head><body>"),e.document.write('<div class="print-border">'),e.document.write('<div class="print-header">D\xdcLD\xdcL ZEYT\u0130NYA\u011eI FABR\u0130KASI</div>'),e.document.write('<div class="print-section print-summary">'),e.document.write('<div class="print-summary-item"><span class="print-label">M\xfc\u015fteri:</span><span class="print-value">'.concat(t.name,"</span></div>")),e.document.write('<div class="print-summary-item"><span class="print-label">Toplam \u0130\u015flem:</span><span class="print-value">'.concat(n.length,"</span></div>")),e.document.write('<div class="print-summary-item"><span class="print-label">\u0130\u015flenen Zeytin:</span><span class="print-value">'.concat(ap(c,"kg"),"</span></div>")),e.document.write('<div class="print-summary-item"><span class="print-label">\xdcretilen Ya\u011f:</span><span class="print-value">'.concat(ap(u,"L"),"</span></div>")),e.document.write('<div class="print-summary-item"><span class="print-label">Ya\u011f Oran\u0131:</span><span class="print-value">'.concat(c>0&&u>0?(c/u).toFixed(2):"-","</span></div>")),e.document.write('<div class="print-summary-item"><span class="print-label">Toplam \xdccret:</span><span class="print-value">'.concat(ap(d,"\u20ba"),"</span></div>")),e.document.write('<div class="print-summary-item"><span class="print-label">Al\u0131nan \xd6deme:</span><span class="print-value">'.concat(ap(h,"\u20ba"),"</span></div>")),e.document.write('<div class="print-summary-item"><span class="print-label">Kalan Bakiye:</span><span class="print-value">'.concat(ap(m,"\u20ba"),"</span></div>")),e.document.write('<div class="print-summary-item"><span class="print-label">Kullan\u0131lan Kaplar:</span><span class="print-value">Teneke: '.concat(p,", Bidon: ").concat(g,"</span></div>")),e.document.write("</div>"),e.document.write('<div class="print-section"><div class="print-label" style="margin-bottom:4px;">\u0130\u015flem Ge\xe7mi\u015fi</div>'),e.document.write('<table class="print-table"><thead><tr><th>Tarih</th><th>A\xe7\u0131klama</th><th>\xdccret</th><th>Al\u0131nan</th><th>Bakiye</th></tr></thead><tbody>'),n.forEach(t=>{const n=(t.totalCost||0)-(t.paymentReceived||0)-(t.paymentLoss||0),r=t.description?"".concat(t.description," (").concat(ap(t.oliveKg)," kg zeytin)"):"".concat(ap(t.oliveKg)," kg zeytin");e.document.write("<tr><td>".concat(new Date(t.date).toLocaleDateString(),"</td><td>").concat(r,"</td><td>").concat(ap(t.totalCost,"\u20ba"),"</td><td>").concat(ap(t.paymentReceived,"\u20ba"),"</td><td>").concat(ap(n,"\u20ba"),"</td></tr>"))}),e.document.write("</tbody></table></div>"),e.document.write("</div>"),e.document.write("</body></html>"),e.document.close(),setTimeout(()=>{e.print(),e.close()},300)}},className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 shadow-sm transition-colors",children:"Yazd\u0131r"}),(0,Zm.jsxs)("button",{onClick:()=>o(t.id,t.name),className:"px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 shadow-sm transition-colors",children:[(0,Zm.jsx)(F,{className:"inline-block w-5 h-5 mr-2"}),"Bu M\xfc\u015fteriyi Sil"]})]})]}),(0,Zm.jsxs)("div",{ref:l,children:[(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,Zm.jsx)(Dp,{title:"Toplam \u0130\u015flem Say\u0131s\u0131",value:n.length,icon:(0,Zm.jsx)(b,{className:"w-6 h-6 text-blue-600"})}),(0,Zm.jsx)(Dp,{title:"\u0130\u015flenen Zeytin",value:ap(c,"kg"),icon:(0,Zm.jsx)(O,{className:"w-6 h-6 text-emerald-600"})}),(0,Zm.jsx)(Dp,{title:"\xdcretilen Ya\u011f",value:ap(u,"L"),icon:(0,Zm.jsx)(j,{className:"w-6 h-6 text-blue-600"})}),(0,Zm.jsx)(Dp,{title:"Ortalama Ya\u011f Oran\u0131",value:y,icon:(0,Zm.jsx)(P,{className:"w-6 h-6 text-purple-600"})}),(0,Zm.jsx)(Dp,{title:"Toplam \xdccret",value:ap(d,"\u20ba"),icon:(0,Zm.jsx)(C,{className:"w-6 h-6 text-emerald-600"})}),(0,Zm.jsx)(Dp,{title:"Kullan\u0131lan Kaplar",value:"Teneke: ".concat(p,", Bidon: ").concat(g),icon:(0,Zm.jsx)(S,{className:"w-6 h-6 text-orange-600"})}),(0,Zm.jsx)(Dp,{title:"Al\u0131nan \xd6deme",value:ap(h,"\u20ba"),icon:(0,Zm.jsx)(C,{className:"w-6 h-6 text-blue-600"})}),(0,Zm.jsx)(Dp,{title:"\xd6deme Firesi",value:ap(f,"\u20ba"),icon:(0,Zm.jsx)(F,{className:"w-6 h-6 text-orange-600"})}),(0,Zm.jsx)(Dp,{title:"Kalan Bakiye",value:ap(m,"\u20ba"),icon:(0,Zm.jsx)(O,{className:"w-6 h-6 text-red-600"})})]}),(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Zm.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"\u0130\u015flem Ge\xe7mi\u015fi"}),0===n.length?(0,Zm.jsx)("p",{className:"text-gray-500",children:"Bu m\xfc\u015fteriye ait hen\xfcz bir i\u015flem bulunmamaktad\u0131r."}):(0,Zm.jsx)("div",{className:"overflow-x-auto",children:(0,Zm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Zm.jsx)("thead",{className:"bg-gray-50",children:(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tarih"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"A\xe7\u0131klama"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\xdccret"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Al\u0131nan \xd6deme"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Bakiye"}),(0,Zm.jsx)("th",{className:"px-6 py-3"})]})}),(0,Zm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>{const t=(e.totalCost||0)-(e.paymentReceived||0)-(e.paymentLoss||0),n=e.description?"".concat(e.description," (").concat(ap(e.oliveKg)," kg zeytin)"):"".concat(ap(e.oliveKg)," kg zeytin");return(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:new Date(e.date).toLocaleDateString()}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:n}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ap(e.totalCost,"\u20ba")}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ap(e.paymentReceived,"\u20ba")}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm ".concat(t>0?"text-red-600":"text-emerald-600"),children:ap(t,"\u20ba")}),(0,Zm.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,Zm.jsx)("button",{onClick:()=>s(e),className:"p-2 bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300 hover:text-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:"Ara Tahsilat"===e.description,children:(0,Zm.jsx)(R,{className:"w-4 h-4"})}),(0,Zm.jsx)("button",{onClick:()=>i(e.id),className:"text-red-600 p-1 rounded-full hover:bg-red-50 ml-1",children:(0,Zm.jsx)(F,{className:"w-4 h-4"})})]})]},e.id)})})]})})]})]})]})},vp=e=>{let{transactions:t,tinPurchases:n,plasticPurchases:r}=e;const s=t.reduce((e,t)=>{const n=new Date(t.date),r="".concat(n.getFullYear(),"-").concat((n.getMonth()+1).toString().padStart(2,"0"));return e[r]||(e[r]={totalOlive:0,totalOil:0,transactionCount:0}),e[r].totalOlive+=Number(t.oliveKg||0),e[r].totalOil+=Number(t.oilLitre||0),Number(t.oliveKg||0)>0&&e[r].transactionCount++,e},{}),i=Object.keys(s).map(e=>{const t=s[e],n=t.totalOlive>0&&t.totalOil>0?t.totalOlive/t.totalOil:0;return u(u({monthYear:e},t),{},{avgRatio:n})}).sort((e,t)=>new Date(e.monthYear)-new Date(t.monthYear)),a=t.reduce((e,t)=>{var n,r,s,i,a,o;return e+Number((null===(n=t.tinCounts)||void 0===n?void 0:n.s16)||0)*Number((null===(r=t.tinPrices)||void 0===r?void 0:r.s16)||0)+Number((null===(s=t.tinCounts)||void 0===s?void 0:s.s10)||0)*Number((null===(i=t.tinPrices)||void 0===i?void 0:i.s10)||0)+Number((null===(a=t.tinCounts)||void 0===a?void 0:a.s5)||0)*Number((null===(o=t.tinPrices)||void 0===o?void 0:o.s5)||0)},0),o=n.reduce((e,t)=>e+Number(t.totalCost||0),0),l=a-o,c=t.reduce((e,t)=>{var n,r,s,i,a,o;return e+Number((null===(n=t.plasticCounts)||void 0===n?void 0:n.s10)||0)*Number((null===(r=t.plasticPrices)||void 0===r?void 0:r.s10)||0)+Number((null===(s=t.plasticCounts)||void 0===s?void 0:s.s5)||0)*Number((null===(i=t.plasticPrices)||void 0===i?void 0:i.s5)||0)+Number((null===(a=t.plasticCounts)||void 0===a?void 0:a.s2)||0)*Number((null===(o=t.plasticPrices)||void 0===o?void 0:o.s2)||0)},0),d=r.reduce((e,t)=>e+Number(t.totalCost||0),0),h=c-d,f=t.reduce((e,t)=>e+Number(t.oliveKg||0),0),m=t.reduce((e,t)=>e+Number(t.oilLitre||0),0),p=f>0&&m>0?(f/m).toFixed(2):"N/A",g=function(e){const t={s16:{toplam_adet:0,toplam_maliyet:0,ortalama_birim_fiyat:0},s10:{toplam_adet:0,toplam_maliyet:0,ortalama_birim_fiyat:0},s5:{toplam_adet:0,toplam_maliyet:0,ortalama_birim_fiyat:0}};return e.forEach(e=>{const n=Number(e.s16)||0,r=Number(e.s10)||0,s=Number(e.s5)||0,i=Number(e.tinPrice)||0;t.s16.toplam_adet+=n,t.s10.toplam_adet+=r,t.s5.toplam_adet+=s,t.s16.toplam_maliyet+=n*i,t.s10.toplam_maliyet+=r*i,t.s5.toplam_maliyet+=s*i}),["s16","s10","s5"].forEach(e=>{t[e].ortalama_birim_fiyat=t[e].toplam_adet>0?t[e].toplam_maliyet/t[e].toplam_adet:0}),t}(n);!function(e,t){const n={s16:0,s10:0,s5:0},r={s16:0,s10:0,s5:0};e.forEach(e=>{const t=Number(e.s16)||0,s=Number(e.s10)||0,i=Number(e.s5)||0,a=Number(e.tinPrice)||0;n.s16+=t,n.s10+=s,n.s5+=i,r.s16+=t*a,r.s10+=s*a,r.s5+=i*a});const s=n.s16>0?r.s16/n.s16:0,i=n.s10>0?r.s10/n.s10:0,a=n.s5>0?r.s5/n.s5:0,o={s16:0,s10:0,s5:0},l={s16:0,s10:0,s5:0};t.forEach(e=>{var t,n,r,s,i,a,c,u,d;o.s16+=Number((null===(t=e.tinCounts)||void 0===t?void 0:t.s16)||0),o.s10+=Number((null===(n=e.tinCounts)||void 0===n?void 0:n.s10)||0),o.s5+=Number((null===(r=e.tinCounts)||void 0===r?void 0:r.s5)||0),l.s16+=Number((null===(s=e.tinCounts)||void 0===s?void 0:s.s16)||0)*Number((null===(i=e.tinPrices)||void 0===i?void 0:i.s16)||0),l.s10+=Number((null===(a=e.tinCounts)||void 0===a?void 0:a.s10)||0)*Number((null===(c=e.tinPrices)||void 0===c?void 0:c.s10)||0),l.s5+=Number((null===(u=e.tinCounts)||void 0===u?void 0:u.s5)||0)*Number((null===(d=e.tinPrices)||void 0===d?void 0:d.s5)||0)});const c={s16:o.s16*s,s10:o.s10*i,s5:o.s5*a},d={s16:l.s16-c.s16,s10:l.s10-c.s10,s5:l.s5-c.s5},h=l.s16+l.s10+l.s5,f=c.s16+c.s10+c.s5,m=d.s16+d.s10+d.s5;u(u({},o),{},{gelir:l.s16,smm:c.s16,netKar:d.s16}),u(u({},o),{},{gelir:l.s10,smm:c.s10,netKar:d.s10}),u(u({},o),{},{gelir:l.s5,smm:c.s5,netKar:d.s5})}(n,t);return(0,Zm.jsxs)("div",{className:"space-y-8",children:[(0,Zm.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"\u0130statistikler"}),(0,Zm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Zm.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,Zm.jsx)(S,{className:"w-6 h-6 mr-2 text-orange-500"}),"Teneke Kar/Zarar Durumu"]}),(0,Zm.jsxs)("div",{className:"space-y-2",children:[(0,Zm.jsxs)("p",{className:"flex justify-between",children:[(0,Zm.jsx)("span",{children:"Toplam Sat\u0131\u015f Geliri:"})," ",(0,Zm.jsx)("span",{className:"font-semibold",children:ap(a,"\u20ba")})]}),(0,Zm.jsxs)("p",{className:"flex justify-between",children:[(0,Zm.jsx)("span",{children:"Toplam Al\u0131m Maliyeti:"})," ",(0,Zm.jsx)("span",{className:"font-semibold",children:ap(o,"\u20ba")})]}),(0,Zm.jsxs)("p",{className:"flex justify-between border-t pt-2 mt-2 ".concat(l>=0?"text-green-600":"text-red-600"),children:[(0,Zm.jsx)("span",{children:"Net Kar/Zarar:"})," ",(0,Zm.jsx)("span",{className:"font-bold",children:ap(l,"\u20ba")})]})]})]}),(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Zm.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,Zm.jsx)(S,{className:"w-6 h-6 mr-2 text-teal-500"}),"Bidon Kar/Zarar Durumu"]}),(0,Zm.jsxs)("div",{className:"space-y-2",children:[(0,Zm.jsxs)("p",{className:"flex justify-between",children:[(0,Zm.jsx)("span",{children:"Toplam Sat\u0131\u015f Geliri:"})," ",(0,Zm.jsx)("span",{className:"font-semibold",children:ap(c,"\u20ba")})]}),(0,Zm.jsxs)("p",{className:"flex justify-between",children:[(0,Zm.jsx)("span",{children:"Toplam Al\u0131m Maliyeti:"})," ",(0,Zm.jsx)("span",{className:"font-semibold",children:ap(d,"\u20ba")})]}),(0,Zm.jsxs)("p",{className:"flex justify-between border-t pt-2 mt-2 ".concat(h>=0?"text-green-600":"text-red-600"),children:[(0,Zm.jsx)("span",{children:"Net Kar/Zarar:"})," ",(0,Zm.jsx)("span",{className:"font-bold",children:ap(h,"\u20ba")})]})]})]})]}),(0,Zm.jsx)(Dp,{title:"Genel Zeytin/Ya\u011f Oran\u0131",value:p,icon:(0,Zm.jsx)(P,{className:"w-6 h-6 text-purple-600"})}),(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Zm.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Detayl\u0131 Teneke Al\u0131m Analizi"}),(0,Zm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("h3",{className:"text-lg font-bold text-blue-700 mb-2",children:"16'l\u0131k Teneke Detaylar\u0131"}),(0,Zm.jsxs)("p",{children:["Toplam Al\u0131nan Adet: ",(0,Zm.jsx)("span",{className:"font-semibold",children:ap(g.s16.toplam_adet)})]}),(0,Zm.jsxs)("p",{children:["Toplam \xd6denen Tutar: ",(0,Zm.jsx)("span",{className:"font-semibold",children:ap(g.s16.toplam_maliyet,"\u20ba")})]}),(0,Zm.jsxs)("p",{children:["Ortalama Birim Fiyat: ",(0,Zm.jsx)("span",{className:"font-semibold",children:ap(g.s16.ortalama_birim_fiyat,"\u20ba")})]})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("h3",{className:"text-lg font-bold text-blue-700 mb-2",children:"10'luk Teneke Detaylar\u0131"}),(0,Zm.jsxs)("p",{children:["Toplam Al\u0131nan Adet: ",(0,Zm.jsx)("span",{className:"font-semibold",children:ap(g.s10.toplam_adet)})]}),(0,Zm.jsxs)("p",{children:["Toplam \xd6denen Tutar: ",(0,Zm.jsx)("span",{className:"font-semibold",children:ap(g.s10.toplam_maliyet,"\u20ba")})]}),(0,Zm.jsxs)("p",{children:["Ortalama Birim Fiyat: ",(0,Zm.jsx)("span",{className:"font-semibold",children:ap(g.s10.ortalama_birim_fiyat,"\u20ba")})]})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("h3",{className:"text-lg font-bold text-blue-700 mb-2",children:"5'lik Teneke Detaylar\u0131"}),(0,Zm.jsxs)("p",{children:["Toplam Al\u0131nan Adet: ",(0,Zm.jsx)("span",{className:"font-semibold",children:ap(g.s5.toplam_adet)})]}),(0,Zm.jsxs)("p",{children:["Toplam \xd6denen Tutar: ",(0,Zm.jsx)("span",{className:"font-semibold",children:ap(g.s5.toplam_maliyet,"\u20ba")})]}),(0,Zm.jsxs)("p",{children:["Ortalama Birim Fiyat: ",(0,Zm.jsx)("span",{className:"font-semibold",children:ap(g.s5.ortalama_birim_fiyat,"\u20ba")})]})]})]})]}),(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Zm.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Ayl\u0131k \u0130\u015flem \xd6zeti"}),0===i.length?(0,Zm.jsx)("p",{className:"text-gray-500",children:"Hen\xfcz ayl\u0131k istatistik bulunmamaktad\u0131r."}):(0,Zm.jsx)("div",{className:"overflow-x-auto",children:(0,Zm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Zm.jsx)("thead",{className:"bg-gray-50",children:(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ay/Y\u0131l"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\u0130\u015flem Say\u0131s\u0131"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Toplam Zeytin (kg)"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Toplam Ya\u011f (L)"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ort. Zeytin/Ya\u011f Oran\u0131"})]})}),(0,Zm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(e=>(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.monthYear}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.transactionCount}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ap(e.totalOlive)}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ap(e.totalOil)}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.avgRatio.toFixed(2)})]},e.monthYear))})]})})]})]})},bp=e=>{let{oilPurchases:t,oilSales:n,onSaveOilPurchase:s,onSaveOilSale:i,onDeleteItem:a,defaultPrices:o}=e;const[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null),[g,y]=(0,r.useState)(0),[v,b]=(0,r.useState)(0),[x,w]=(0,r.useState)(0),[N,k]=(0,r.useState)(0),[E,_]=(0,r.useState)("");(0,r.useEffect)(()=>{const e=t.reduce((e,t)=>e+Number(t.tinCount||0),0),r=n.reduce((e,t)=>e+Number(t.tinCount||0),0),s=t.reduce((e,t)=>e+Number(t.totalCost||0),0),i=n.reduce((e,t)=>e+Number(t.totalRevenue||0),0),a=e-r,o=i-s+a*Number(E||0);y(a),b(o),w(s),k(i)},[t,n,E]);const I=function(){d(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),c(!0)},j=function(){p(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),f(!0)},P=()=>{c(!1),d(null),f(!1),p(null)},D=[...t].sort((e,t)=>new Date(t.date)-new Date(e.date)),O=[...n].sort((e,t)=>new Date(t.date)-new Date(e.date));return(0,Zm.jsxs)("div",{className:"space-y-8",children:[(0,Zm.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Zeytinya\u011f\u0131 Al\u0131m/Sat\u0131m"}),(0,Zm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Zm.jsx)(Dp,{title:"Toplam Al\u0131m Maliyeti",value:ap(x,"\u20ba"),icon:(0,Zm.jsx)(C,{}),iconColorClass:"text-red-600"}),(0,Zm.jsx)(Dp,{title:"Toplam Sat\u0131\u015f Geliri",value:ap(N,"\u20ba"),icon:(0,Zm.jsx)(C,{}),iconColorClass:"text-green-600"}),(0,Zm.jsx)(Dp,{title:"Kalan Net Teneke Sto\u011fu",value:ap(g,"adet"),icon:(0,Zm.jsx)(S,{}),iconColorClass:"text-blue-600"}),(0,Zm.jsx)(Dp,{title:"Net K\xe2r/Zarar",value:ap(v,"\u20ba"),icon:(0,Zm.jsx)(A,{}),iconColorClass:v>=0?"text-green-600":"text-red-600"})]}),(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-lg mx-auto",children:[(0,Zm.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Kalan Stok De\u011ferlemesi"}),(0,Zm.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Kalan teneke sto\u011funun adedini, girece\u011finiz fiyatla \xe7arparak net k\xe2r/zarar hesab\u0131na otomatik olarak ekler."}),(0,Zm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Zm.jsx)("label",{htmlFor:"manualStockPrice",className:"text-sm font-medium text-gray-700",children:"Teneke Birim Fiyat\u0131 (\u20ba):"}),(0,Zm.jsx)("input",{type:"number",id:"manualStockPrice",value:E,onChange:e=>_(e.target.value),className:"flex-1 p-2 border rounded-md shadow-sm",placeholder:"\xd6rn: 250"})]})]}),(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Zm.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Zm.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Sat\u0131\u015flar"}),(0,Zm.jsxs)("button",{onClick:()=>j(),className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 shadow-md",children:[(0,Zm.jsx)(T,{className:"w-5 h-5"}),(0,Zm.jsx)("span",{children:"Sat\u0131\u015f Ekle"})]})]}),0===n.length?(0,Zm.jsx)("p",{className:"text-gray-500",children:"Hen\xfcz zeytinya\u011f\u0131 sat\u0131\u015f\u0131 yap\u0131lmam\u0131\u015ft\u0131r."}):(0,Zm.jsx)("div",{className:"overflow-x-auto",children:(0,Zm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Zm.jsx)("thead",{className:"bg-gray-50",children:(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tarih"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"M\xfc\u015fteri"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Teneke Say\u0131s\u0131"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Teneke Fiyat\u0131 (\u20ba)"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sat\u0131\u015f Geliri (\u20ba)"}),(0,Zm.jsx)("th",{className:"px-6 py-3"})]})}),(0,Zm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(e=>(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:new Date(e.date).toLocaleDateString()}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.customerName}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ap(e.tinCount)}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ap(e.tinPrice,"\u20ba")}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ap(e.totalRevenue,"\u20ba")}),(0,Zm.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,Zm.jsx)("button",{onClick:()=>j(e),className:"p-2 bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300 hover:text-gray-800 transition-colors",children:(0,Zm.jsx)(R,{className:"w-5 h-5"})}),(0,Zm.jsx)("button",{onClick:()=>a("oilSales",e.id),className:"ml-2 p-2 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:(0,Zm.jsx)(F,{className:"w-5 h-5"})})]})]},e.id))})]})})]}),(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Zm.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Zm.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Al\u0131mlar"}),(0,Zm.jsxs)("button",{onClick:()=>I(),className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 shadow-md",children:[(0,Zm.jsx)(T,{className:"w-5 h-5"}),(0,Zm.jsx)("span",{children:"Al\u0131m Ekle"})]})]}),0===t.length?(0,Zm.jsx)("p",{className:"text-gray-500",children:"Hen\xfcz zeytinya\u011f\u0131 al\u0131m\u0131 yap\u0131lmam\u0131\u015ft\u0131r."}):(0,Zm.jsx)("div",{className:"overflow-x-auto",children:(0,Zm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Zm.jsx)("thead",{className:"bg-gray-50",children:(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tarih"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Firma/\u015eah\u0131s"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Teneke Say\u0131s\u0131"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Teneke Fiyat\u0131 (\u20ba)"}),(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Al\u0131m Maliyeti (\u20ba)"}),(0,Zm.jsx)("th",{className:"px-6 py-3"})]})}),(0,Zm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:new Date(e.date).toLocaleDateString()}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.supplierName}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ap(e.tinCount)}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ap(e.tinPrice,"\u20ba")}),(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ap(e.totalCost,"\u20ba")}),(0,Zm.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,Zm.jsx)("button",{onClick:()=>I(e),className:"p-2 bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300 hover:text-gray-800 transition-colors",children:(0,Zm.jsx)(R,{className:"w-5 h-5"})}),(0,Zm.jsx)("button",{onClick:()=>a("oilPurchases",e.id),className:"ml-2 p-2 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:(0,Zm.jsx)(F,{className:"w-5 h-5"})})]})]},e.id))})]})})]}),l&&(0,Zm.jsx)(xp,{onClose:P,onSave:s,editingPurchase:u}),h&&(0,Zm.jsx)(wp,{onClose:P,onSave:i,editingSale:m})]})},xp=e=>{let{onClose:t,onSave:n,editingPurchase:s}=e;const[i,a]=(0,r.useState)({date:new Date,supplierName:"",tinCount:"",tinPrice:""});(0,r.useEffect)(()=>{if(s){const e=new Date(s.date);a(u(u({},s),{},{date:isNaN(e.getTime())?new Date:e}))}},[s]);const o=e=>{const{name:t,value:n}=e.target;a(e=>u(u({},e),{},{[t]:n}))},l=lp(Number(i.tinCount)*Number(i.tinPrice));return(0,Zm.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,Zm.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-xl p-6",children:[(0,Zm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:s?"Zeytinya\u011f\u0131 Al\u0131m\u0131n\u0131 D\xfczenle":"Yeni Zeytinya\u011f\u0131 Al\u0131m\u0131 Ekle"}),(0,Zm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(u(u({},i),{},{totalCost:l,id:null===s||void 0===s?void 0:s.id})),t()},className:"space-y-4",children:[(0,Zm.jsx)(up,{label:"Tarih",id:"date",type:"date",name:"date",value:cp(i.date),onChange:o,required:!0}),(0,Zm.jsx)(up,{label:"Firma/\u015eah\u0131s Ad\u0131",id:"supplierName",type:"text",name:"supplierName",value:i.supplierName,onChange:o,required:!0}),(0,Zm.jsx)(up,{label:"Teneke Say\u0131s\u0131",id:"tinCount",type:"number",name:"tinCount",value:i.tinCount,onChange:o,required:!0}),(0,Zm.jsx)(up,{label:"Teneke Fiyat\u0131 (\u20ba)",id:"tinPrice",type:"number",name:"tinPrice",value:i.tinPrice,onChange:o,required:!0}),(0,Zm.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,Zm.jsx)("label",{children:"Hesaplanan Al\u0131m Maliyeti"}),(0,Zm.jsx)("p",{className:"font-bold",children:ap(l,"\u20ba")})]}),(0,Zm.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Zm.jsx)("button",{type:"button",onClick:t,className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 transition-colors shadow-sm",children:"\u0130ptal"}),(0,Zm.jsx)("button",{type:"submit",className:"px-6 py-2 bg-emerald-600 text-white rounded",children:"Kaydet"})]})]})]})})},wp=e=>{let{onClose:t,onSave:n,editingSale:s}=e;const[i,a]=(0,r.useState)({date:new Date,customerName:"",tinCount:"",tinPrice:""});(0,r.useEffect)(()=>{if(s){const e=new Date(s.date);a(u(u({},s),{},{date:isNaN(e.getTime())?new Date:e}))}},[s]);const o=e=>{const{name:t,value:n}=e.target;a(e=>u(u({},e),{},{[t]:n}))},l=lp(Number(i.tinCount)*Number(i.tinPrice));return(0,Zm.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,Zm.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-xl p-6",children:[(0,Zm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:s?"Zeytinya\u011f\u0131 Sat\u0131\u015f\u0131n\u0131 D\xfczenle":"Yeni Zeytinya\u011f\u0131 Sat\u0131\u015f\u0131 Ekle"}),(0,Zm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(u(u({},i),{},{totalRevenue:l,id:null===s||void 0===s?void 0:s.id})),t()},className:"space-y-4",children:[(0,Zm.jsx)(up,{label:"Tarih",id:"date",type:"date",name:"date",value:cp(i.date),onChange:o,required:!0}),(0,Zm.jsx)(up,{label:"M\xfc\u015fteri Ad\u0131",id:"customerName",type:"text",name:"customerName",value:i.customerName,onChange:o,required:!0}),(0,Zm.jsx)(up,{label:"Teneke Say\u0131s\u0131",id:"tinCount",type:"number",name:"tinCount",value:i.tinCount,onChange:o,required:!0}),(0,Zm.jsx)(up,{label:"Teneke Fiyat\u0131 (\u20ba)",id:"tinPrice",type:"number",name:"tinPrice",value:i.tinPrice,onChange:o,required:!0}),(0,Zm.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,Zm.jsx)("label",{children:"Hesaplanan Sat\u0131\u015f Geliri"}),(0,Zm.jsx)("p",{className:"font-bold",children:ap(l,"\u20ba")})]}),(0,Zm.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Zm.jsx)("button",{type:"button",onClick:t,className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 transition-colors shadow-sm",children:"\u0130ptal"}),(0,Zm.jsx)("button",{type:"submit",className:"px-6 py-2 bg-emerald-600 text-white rounded",children:"Kaydet"})]})]})]})})},Np=e=>{var t,n,s,i,a,o,l,c,d,h,f,m,p,g,y,v,b,x,w,N,k,S,E,_;let{onClose:C,onSave:T,customers:I,editingTransaction:j,defaultPrices:P,onSaveDefaultPrices:A}=e;const[D,R]=(0,r.useState)(""),[O,L]=(0,r.useState)(null),[M,F]=(0,r.useState)(!1),[z,B]=(0,r.useState)(!1),[K,q]=(0,r.useState)(!1),[H,W]=(0,r.useState)(P),[G,Q]=(0,r.useState)(""),[Y,X]=(0,r.useState)({date:new Date,oliveKg:"",pricePerKg:P.pricePerKg,oilLitre:"",tinCounts:{s16:"",s10:"",s5:""},tinPrices:{s16:P.tinPrices.s16,s10:P.tinPrices.s10,s5:P.tinPrices.s5},plasticCounts:{s10:"",s5:"",s2:""},plasticPrices:{s10:P.plasticPrices.s10,s5:P.plasticPrices.s5,s2:P.plasticPrices.s2},paymentReceived:"",paymentLoss:"",description:""}),J=(0,r.useRef)(null),$=(0,r.useRef)();(0,r.useEffect)(()=>{const e={s16:"",s10:"",s5:""},t={s10:"",s5:"",s2:""},n=u({},P.tinPrices),r=u({},P.plasticPrices);if(j){const s=new Date(j.date);X({date:isNaN(s.getTime())?new Date:s,oliveKg:j.oliveKg||"",pricePerKg:j.pricePerKg||P.pricePerKg,oilLitre:j.oilLitre||"",tinCounts:u(u({},e),j.tinCounts),tinPrices:u(u({},n),j.tinPrices),plasticCounts:u(u({},t),j.plasticCounts),plasticPrices:u(u({},r),j.plasticPrices),paymentReceived:j.paymentReceived||"",paymentLoss:j.paymentLoss||"",description:j.description||""}),R(j.customerName||""),L({id:j.customerId,name:j.customerName})}else X({date:new Date,oliveKg:"",pricePerKg:P.pricePerKg,oilLitre:"",tinCounts:e,tinPrices:n,plasticCounts:t,plasticPrices:r,paymentReceived:"",paymentLoss:"",description:""}),R(""),L(null)},[j,P]),(0,r.useEffect)(()=>{W(P)},[P]),(0,r.useEffect)(()=>{const e=e=>{J.current&&!J.current.contains(e.target)&&F(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const Z=e=>{const{name:t,value:n}=e.target;X(e=>u(u({},e),{},{[t]:n}))},ee=(e,t,n)=>{X(r=>u(u({},r),{},{[e]:u(u({},r[e]),{},{[t]:n})}))},te=(e,t,n)=>{W(r=>u(u({},r),{},{[e]:u(u({},r[e]),{},{[t]:Number(n)||0})}))},ne=I.filter(e=>e.name.toLowerCase().includes(D.toLowerCase())),re=Number(Y.oliveKg)*Number(Y.pricePerKg),se=Number(Y.tinCounts.s16)*Number(Y.tinPrices.s16)+Number(Y.tinCounts.s10)*Number(Y.tinPrices.s10)+Number(Y.tinCounts.s5)*Number(Y.tinPrices.s5),ie=Number(Y.plasticCounts.s10)*Number(Y.plasticPrices.s10)+Number(Y.plasticCounts.s5)*Number(Y.plasticPrices.s5)+Number(Y.plasticCounts.s2)*Number(Y.plasticPrices.s2),ae=lp(re+se+ie),oe=Number(Y.oliveKg)>0?Number(Y.oilLitre)/Number(Y.oliveKg):0,le=lp(ae-Number(Y.paymentReceived)-Number(Y.paymentLoss));return(0,Zm.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-600 bg-opacity-75",children:(0,Zm.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto p-0 md:p-0 relative",children:[(0,Zm.jsx)("div",{className:"sticky top-0 z-10 bg-white rounded-t-2xl px-8 pt-8 pb-4 border-b",children:(0,Zm.jsx)("h2",{className:"text-3xl font-bold text-[#556B2F] mb-2",children:j?"\u0130\u015flemi D\xfczenle":"Yeni \u0130\u015flem Ekle"})}),G&&(0,Zm.jsx)("div",{className:"bg-red-100 text-red-700 px-4 py-2 rounded mb-2 text-center font-semibold",children:G}),(0,Zm.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!D)return void alert("L\xfctfen m\xfc\u015fteri ad\u0131 giriniz.");B(!0),Q("");const t=u(u({},Y),{},{customerName:D,customerId:(null===O||void 0===O?void 0:O.id)||null,totalCost:ae,oilRatio:oe,remainingBalance:le,id:null===j||void 0===j?void 0:j.id});try{await T(t)}catch(n){Q((null===n||void 0===n?void 0:n.message)||"Kay\u0131t s\u0131ras\u0131nda bir hata olu\u015ftu.")}finally{B(!1)}},className:"grid grid-cols-1 gap-8 px-8 pb-8 pt-4",style:{minWidth:340},children:[(0,Zm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[(0,Zm.jsxs)("div",{className:"col-span-1",children:[(0,Zm.jsxs)("button",{type:"button",onClick:()=>q(!K),className:"w-full flex justify-between items-center p-3 bg-gray-50 hover:bg-gray-100 rounded-lg border font-semibold text-gray-700 mb-2",children:[(0,Zm.jsx)("span",{children:"Varsay\u0131lan Fiyatlar\u0131 Ayarla"}),K?(0,Zm.jsx)(V,{className:"w-5 h-5 text-gray-600"}):(0,Zm.jsx)(U,{className:"w-5 h-5 text-gray-600"})]}),K&&(0,Zm.jsxs)("div",{className:"p-4 space-y-4 border rounded-lg bg-gray-50 mb-2",children:[(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Kg Ba\u015f\u0131na \xdccret (\u20ba)"}),(0,Zm.jsx)("input",{type:"number",name:"pricePerKg",value:H.pricePerKg,onChange:e=>{const{name:t,value:n}=e.target;W(e=>u(u({},e),{},{[t]:Number(n)||0}))},className:"block w-full border-gray-300 rounded-md shadow-sm py-2 px-3"})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Teneke Fiyatlar\u0131 (\u20ba)"}),(0,Zm.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-1",children:[(0,Zm.jsx)("input",{type:"number",value:H.tinPrices.s16,onChange:e=>te("tinPrices","s16",e.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm py-2 px-3",placeholder:"16'l\u0131k"}),(0,Zm.jsx)("input",{type:"number",value:H.tinPrices.s10,onChange:e=>te("tinPrices","s10",e.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm py-2 px-3",placeholder:"10'luk"}),(0,Zm.jsx)("input",{type:"number",value:H.tinPrices.s5,onChange:e=>te("tinPrices","s5",e.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm py-2 px-3",placeholder:"5'lik"})]})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Bidon Fiyatlar\u0131 (\u20ba)"}),(0,Zm.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-1",children:[(0,Zm.jsx)("input",{type:"number",value:H.plasticPrices.s10,onChange:e=>te("plasticPrices","s10",e.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm py-2 px-3",placeholder:"10'luk"}),(0,Zm.jsx)("input",{type:"number",value:H.plasticPrices.s5,onChange:e=>te("plasticPrices","s5",e.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm py-2 px-3",placeholder:"5'lik"}),(0,Zm.jsx)("input",{type:"number",value:H.plasticPrices.s2,onChange:e=>te("plasticPrices","s2",e.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm py-2 px-3",placeholder:"2'lik"})]})]}),(0,Zm.jsx)("div",{className:"flex justify-end",children:(0,Zm.jsx)("button",{type:"button",onClick:()=>{A(H)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 shadow-sm",children:"Kaydet"})})]})]}),(0,Zm.jsxs)("div",{className:"col-span-1",ref:J,children:[(0,Zm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xfc\u015fteri Ad\u0131 Soyad\u0131"}),(0,Zm.jsx)("input",{type:"text",value:D,onChange:e=>{R(e.target.value),L(null),F(!0)},onFocus:()=>F(!0),className:"block w-full border rounded-md shadow-sm py-2 px-3",placeholder:"M\xfc\u015fteri ad\u0131 girin veya se\xe7in",required:!0}),M&&D&&(0,Zm.jsx)("ul",{className:"absolute z-10 w-full bg-white border rounded-md shadow-lg max-h-48 overflow-y-auto mt-1",children:ne.length>0?ne.map(e=>(0,Zm.jsx)("li",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100",onClick:()=>{return L(t=e),R(t.name),void F(!1);var t},children:e.name},e.id)):(0,Zm.jsx)("li",{className:"px-4 py-2 text-gray-500",children:"Yeni m\xfc\u015fteri olu\u015fturulacak."})})]}),(0,Zm.jsxs)("div",{className:"col-span-1",children:[(0,Zm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"A\xe7\u0131klama"}),(0,Zm.jsx)("textarea",{name:"description",value:Y.description,onChange:Z,className:"block w-full border rounded-md shadow-sm py-2 px-3",placeholder:"\u0130\u015flemle ilgili notlar..."})]})]}),(0,Zm.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0130\u015flem Tarihi"}),(0,Zm.jsx)("input",{type:"date",name:"date",value:cp(Y.date),onChange:e=>{const t=e.target.value;X(e=>u(u({},e),{},{date:t?new Date(t+"T00:00:00"):new Date}))},className:"block w-full border rounded-md shadow-sm py-2 px-3",required:!0})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zeytin Miktar\u0131 (kg)"}),(0,Zm.jsx)("input",{type:"number",name:"oliveKg",value:Y.oliveKg,onChange:Z,className:"block w-full border rounded-md shadow-sm py-2 px-3",min:"0",step:"any",placeholder:"\xd6rn: 150.5"})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kg Ba\u015f\u0131na \xdccret (\u20ba)"}),(0,Zm.jsx)("input",{type:"number",name:"pricePerKg",value:Y.pricePerKg,onChange:Z,className:"block w-full border rounded-md shadow-sm py-2 px-3",min:"0",step:"any"})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\xc7\u0131kan Ya\u011f (litre)"}),(0,Zm.jsx)("input",{type:"number",name:"oilLitre",value:Y.oilLitre,onChange:Z,className:"block w-full border rounded-md shadow-sm py-2 px-3",min:"0",step:"any",placeholder:"\xd6rn: 30.2"})]})]}),(0,Zm.jsxs)("div",{className:"border-t pt-4",children:[(0,Zm.jsx)("h3",{className:"text-lg font-semibold text-[#556B2F] mb-2",children:"Tenekeler"}),(0,Zm.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"16'l\u0131k Say\u0131s\u0131"}),(0,Zm.jsx)("input",{type:"number",value:Y.tinCounts.s16,onChange:e=>ee("tinCounts","s16",e.target.value),className:"block w-full border rounded-md shadow-sm py-2 px-3"})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"10'luk Say\u0131s\u0131"}),(0,Zm.jsx)("input",{type:"number",value:Y.tinCounts.s10,onChange:e=>ee("tinCounts","s10",e.target.value),className:"block w-full border rounded-md shadow-sm py-2 px-3"})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"5'lik Say\u0131s\u0131"}),(0,Zm.jsx)("input",{type:"number",value:Y.tinCounts.s5,onChange:e=>ee("tinCounts","s5",e.target.value),className:"block w-full border rounded-md shadow-sm py-2 px-3"})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"16'l\u0131k Fiyat\u0131 (\u20ba)"}),(0,Zm.jsx)("input",{type:"number",value:Y.tinPrices.s16,onChange:e=>ee("tinPrices","s16",e.target.value),className:"block w-full border rounded-md shadow-sm py-2 px-3"})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"10'luk Fiyat\u0131 (\u20ba)"}),(0,Zm.jsx)("input",{type:"number",value:Y.tinPrices.s10,onChange:e=>ee("tinPrices","s10",e.target.value),className:"block w-full border rounded-md shadow-sm py-2 px-3"})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"5'lik Fiyat\u0131 (\u20ba)"}),(0,Zm.jsx)("input",{type:"number",value:Y.tinPrices.s5,onChange:e=>ee("tinPrices","s5",e.target.value),className:"block w-full border rounded-md shadow-sm py-2 px-3"})]})]})]}),(0,Zm.jsxs)("div",{className:"border-t pt-4",children:[(0,Zm.jsx)("h3",{className:"text-lg font-semibold text-[#556B2F] mb-2",children:"Bidonlar"}),(0,Zm.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"10'luk Say\u0131s\u0131"}),(0,Zm.jsx)("input",{type:"number",value:Y.plasticCounts.s10,onChange:e=>ee("plasticCounts","s10",e.target.value),className:"block w-full border rounded-md shadow-sm py-2 px-3"})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"5'lik Say\u0131s\u0131"}),(0,Zm.jsx)("input",{type:"number",value:Y.plasticCounts.s5,onChange:e=>ee("plasticCounts","s5",e.target.value),className:"block w-full border rounded-md shadow-sm py-2 px-3"})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"2'lik Say\u0131s\u0131"}),(0,Zm.jsx)("input",{type:"number",value:Y.plasticCounts.s2,onChange:e=>ee("plasticCounts","s2",e.target.value),className:"block w-full border rounded-md shadow-sm py-2 px-3"})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"10'luk Fiyat\u0131 (\u20ba)"}),(0,Zm.jsx)("input",{type:"number",value:Y.plasticPrices.s10,onChange:e=>ee("plasticPrices","s10",e.target.value),className:"block w-full border rounded-md shadow-sm py-2 px-3"})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"5'lik Fiyat\u0131 (\u20ba)"}),(0,Zm.jsx)("input",{type:"number",value:Y.plasticPrices.s5,onChange:e=>ee("plasticPrices","s5",e.target.value),className:"block w-full border rounded-md shadow-sm py-2 px-3"})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"2'lik Fiyat\u0131 (\u20ba)"}),(0,Zm.jsx)("input",{type:"number",value:Y.plasticPrices.s2,onChange:e=>ee("plasticPrices","s2",e.target.value),className:"block w-full border rounded-md shadow-sm py-2 px-3"})]})]})]}),(0,Zm.jsxs)("div",{className:"border-t pt-4",children:[(0,Zm.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Al\u0131nan \xd6deme (\u20ba)"}),(0,Zm.jsx)("input",{type:"number",name:"paymentReceived",value:Y.paymentReceived,onChange:Z,className:"block w-full border rounded-md shadow-sm py-2 px-3",min:"0",step:"any",placeholder:"0"})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\xd6deme Firesi (\u20ba)"}),(0,Zm.jsx)("input",{type:"number",name:"paymentLoss",value:Y.paymentLoss,onChange:Z,className:"block w-full border rounded-md shadow-sm py-2 px-3",min:"0",step:"any",placeholder:"0"})]})]}),(0,Zm.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md text-center mt-4",children:[(0,Zm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Ya\u011f Oran\u0131"}),(0,Zm.jsx)("p",{className:"text-lg font-bold text-gray-900",children:op(Y.oliveKg,Y.oilLitre)})]}),(0,Zm.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[(0,Zm.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-500",children:"Zeytin S\u0131k\u0131m \xdccreti"}),(0,Zm.jsx)("p",{className:"text-lg font-bold text-gray-800",children:ap(re,"\u20ba")})]}),(0,Zm.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-500",children:"Toplam Teneke Fiyat\u0131"}),(0,Zm.jsx)("p",{className:"text-lg font-bold text-gray-800",children:ap(se,"\u20ba")})]}),(0,Zm.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-gray-500",children:"Toplam Bidon Fiyat\u0131"}),(0,Zm.jsx)("p",{className:"text-lg font-bold text-gray-800",children:ap(ie,"\u20ba")})]})]}),(0,Zm.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[(0,Zm.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md border border-blue-200",children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-blue-700",children:"Genel Toplam"}),(0,Zm.jsx)("p",{className:"text-xl font-bold text-blue-800",children:ap(ae,"\u20ba")})]}),(0,Zm.jsxs)("div",{className:"bg-emerald-50 p-3 rounded-md border border-emerald-200",children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-emerald-700",children:"Al\u0131nan \xd6deme"}),(0,Zm.jsx)("p",{className:"text-xl font-bold text-emerald-800",children:ap(Y.paymentReceived,"\u20ba")})]}),(0,Zm.jsxs)("div",{className:"bg-red-50 p-3 rounded-md border border-red-200",children:[(0,Zm.jsx)("label",{className:"block text-xs font-medium text-red-700",children:"Kalan Bakiye"}),(0,Zm.jsx)("p",{className:"text-xl font-bold text-red-800",children:ap(le,"\u20ba")})]})]})]}),(0,Zm.jsxs)("div",{className:"col-span-full flex justify-end space-x-3 mt-6",children:[(0,Zm.jsx)("button",{type:"button",onClick:C,className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 transition-colors shadow-sm",children:"\u0130ptal"}),(0,Zm.jsx)("button",{type:"submit",className:"px-6 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 shadow-md disabled:opacity-50",disabled:z,children:z?"Kaydediliyor...":"Kaydet"}),(0,Zm.jsx)("button",{type:"button",onClick:()=>{const e=$.current;if(e){const t=window.open("","_blank");t.document.write("<html><head><title>\u0130\u015flem Fi\u015fi</title></head><body>"),t.document.write(e.innerHTML),t.document.write("</body></html>"),t.document.close(),setTimeout(()=>{t.print(),t.close()},250)}},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 shadow-md",children:"Yazd\u0131r"})]})]}),(0,Zm.jsx)("div",{style:{display:"none"},children:(0,Zm.jsx)(Rp,{ref:$,transactionData:u(u({},Y),{},{customerName:D,totalCost:(Number(Y.oliveKg)||0)*(Number(Y.pricePerKg)||0)+Number((null===(t=Y.tinCounts)||void 0===t?void 0:t.s16)||0)*Number((null===(n=Y.tinPrices)||void 0===n?void 0:n.s16)||0)+Number((null===(s=Y.tinCounts)||void 0===s?void 0:s.s10)||0)*Number((null===(i=Y.tinPrices)||void 0===i?void 0:i.s10)||0)+Number((null===(a=Y.tinCounts)||void 0===a?void 0:a.s5)||0)*Number((null===(o=Y.tinPrices)||void 0===o?void 0:o.s5)||0)+Number((null===(l=Y.plasticCounts)||void 0===l?void 0:l.s10)||0)*Number((null===(c=Y.plasticPrices)||void 0===c?void 0:c.s10)||0)+Number((null===(d=Y.plasticCounts)||void 0===d?void 0:d.s5)||0)*Number((null===(h=Y.plasticPrices)||void 0===h?void 0:h.s5)||0)+Number((null===(f=Y.plasticCounts)||void 0===f?void 0:f.s2)||0)*Number((null===(m=Y.plasticPrices)||void 0===m?void 0:m.s2)||0),remainingBalance:lp((Number(Y.oliveKg)||0)*(Number(Y.pricePerKg)||0)+Number((null===(p=Y.tinCounts)||void 0===p?void 0:p.s16)||0)*Number((null===(g=Y.tinPrices)||void 0===g?void 0:g.s16)||0)+Number((null===(y=Y.tinCounts)||void 0===y?void 0:y.s10)||0)*Number((null===(v=Y.tinPrices)||void 0===v?void 0:v.s10)||0)+Number((null===(b=Y.tinCounts)||void 0===b?void 0:b.s5)||0)*Number((null===(x=Y.tinPrices)||void 0===x?void 0:x.s5)||0)+Number((null===(w=Y.plasticCounts)||void 0===w?void 0:w.s10)||0)*Number((null===(N=Y.plasticPrices)||void 0===N?void 0:N.s10)||0)+Number((null===(k=Y.plasticCounts)||void 0===k?void 0:k.s5)||0)*Number((null===(S=Y.plasticPrices)||void 0===S?void 0:S.s5)||0)+Number((null===(E=Y.plasticCounts)||void 0===E?void 0:E.s2)||0)*Number((null===(_=Y.plasticPrices)||void 0===_?void 0:_.s2)||0)-Number(Y.paymentReceived||0)-Number(Y.paymentLoss||0))})})})]})})},kp=e=>{let{message:t,onConfirm:n,onCancel:r,isLoading:s}=e;return(0,Zm.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,Zm.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm p-6 relative",children:[(0,Zm.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Onay Gerekli"}),(0,Zm.jsx)("p",{className:"text-gray-700 mb-6",children:t}),(0,Zm.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Zm.jsx)("button",{onClick:r,className:"px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-50 shadow-sm",disabled:s,children:"\u0130ptal"}),(0,Zm.jsx)("button",{onClick:n,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 shadow-md disabled:opacity-50 disabled:cursor-wait",disabled:s,children:s?"Siliniyor...":"Onayla"})]})]})})},Sp=e=>{let{workerExpenses:t,factoryOverhead:n,pomaceRevenues:s,tinPurchases:i,plasticPurchases:a,onSaveWorkerExpense:o,onSaveFactoryOverhead:l,onSavePomaceRevenue:c,onSaveTinPurchase:u,onSavePlasticPurchase:d,onDeleteItem:h}=e;const[f,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[y,v]=(0,r.useState)(!1),[b,x]=(0,r.useState)(null),[w,N]=(0,r.useState)(!1),[k,S]=(0,r.useState)(null),[E,_]=(0,r.useState)(!1),[C,T]=(0,r.useState)(null),[I,j]=(0,r.useState)(!1),[P,A]=(0,r.useState)(null),D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"worker"===e&&(g(t),m(!0)),"overhead"===e&&(x(t),v(!0)),"pomace"===e&&(S(t),N(!0)),"tin"===e&&(T(t),_(!0)),"plastic"===e&&(A(t),j(!0))},R=()=>{m(!1),g(null),v(!1),x(null),N(!1),S(null),_(!1),T(null),j(!1),A(null)},O=async(e,t)=>{"worker"===e&&await o(t),"overhead"===e&&await l(t),"pomace"===e&&await c(t),"tin"===e&&await u(t),"plastic"===e&&await d(t),R()};return(0,Zm.jsxs)("div",{className:"space-y-8",children:[(0,Zm.jsx)("h1",{className:"text-2xl font-bold text-gray-700 mb-4",children:"Giderler ve Di\u011fer Gelirler"}),(0,Zm.jsx)(Ep,{title:"\u0130\u015f\xe7i Harcamalar\u0131",data:t,onAddItem:()=>D("worker"),onEditItem:e=>D("worker",e),onDeleteItem:e=>h("workerExpenses",e),columns:["Tarih","\u0130\u015f\xe7i Ad\u0131","\xc7al\u0131\u015ft\u0131\u011f\u0131 G\xfcn","Verilen \xdccret (\u20ba)","A\xe7\u0131klama"],fields:["date","workerName","daysWorked","amount","description"]}),(0,Zm.jsx)(Ep,{title:"Muhtelif Giderler",data:n,onAddItem:()=>D("overhead"),onEditItem:e=>D("overhead",e),onDeleteItem:e=>h("factoryOverhead",e),columns:["Tarih","A\xe7\u0131klama","Gider Tutar\u0131 (\u20ba)"],fields:["date","description","amount"]}),(0,Zm.jsx)(Ep,{title:"Teneke Al\u0131mlar\u0131",data:i,onAddItem:()=>D("tin"),onEditItem:e=>D("tin",e),onDeleteItem:e=>h("tinPurchases",e),columns:["Tarih","16'l\u0131k","10'luk","5'lik","Toplam Maliyet","A\xe7\u0131klama"],fields:["date","s16","s10","s5","totalCost","description"]}),(0,Zm.jsx)(Ep,{title:"Bidon Al\u0131mlar\u0131",data:a,onAddItem:()=>D("plastic"),onEditItem:e=>D("plastic",e),onDeleteItem:e=>h("plasticPurchases",e),columns:["Tarih","10'luk","5'lik","2'lik","Toplam Maliyet","A\xe7\u0131klama"],fields:["date","s10","s5","s2","totalCost","description"]}),(0,Zm.jsx)(Ep,{title:"Pirina Geliri",data:s,onAddItem:()=>D("pomace"),onEditItem:e=>D("pomace",e),onDeleteItem:e=>h("pomaceRevenues",e),columns:["Tarih","T\u0131r Say\u0131s\u0131","Toplam Y\xfck (kg)","Kg Ba\u015f\u0131na \xdccret (\u20ba)","Toplam Gelir (\u20ba)","A\xe7\u0131klama"],fields:["date","truckCount","loadKg","pricePerKg","totalRevenue","description"]}),f&&(0,Zm.jsx)(_p,{onClose:R,onSave:e=>O("worker",e),editingExpense:p}),y&&(0,Zm.jsx)(Cp,{onClose:R,onSave:e=>O("overhead",e),editingExpense:b}),w&&(0,Zm.jsx)(Tp,{onClose:R,onSave:e=>O("pomace",e),editingRevenue:k}),E&&(0,Zm.jsx)(Ip,{onClose:R,onSave:e=>O("tin",e),editingPurchase:C}),I&&(0,Zm.jsx)(jp,{onClose:R,onSave:e=>O("plastic",e),editingPurchase:P})]})},Ep=e=>{let{title:t,data:n,onAddItem:s,onEditItem:i,onDeleteItem:a,columns:o,fields:l}=e;const[c,u]=(0,r.useState)(5),d=n.sort((e,t)=>new Date(t.date)-new Date(e.date)),h="all"===c?d:d.slice(0,Number(c));return(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Zm.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Zm.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:t}),(0,Zm.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Zm.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"border rounded px-3 py-2 text-sm focus:ring-emerald-500 focus:border-emerald-500",children:[(0,Zm.jsx)("option",{value:5,children:"Son 5"}),(0,Zm.jsx)("option",{value:10,children:"Son 10"}),(0,Zm.jsx)("option",{value:25,children:"Son 25"}),(0,Zm.jsx)("option",{value:"all",children:"T\xfcm\xfc"})]}),(0,Zm.jsxs)("button",{onClick:s,className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 shadow-md",children:[(0,Zm.jsx)(T,{className:"w-5 h-5"}),(0,Zm.jsxs)("span",{children:[t.replace("lar\u0131","").replace("ler","")," Ekle"]})]})]})]}),0===n.length?(0,Zm.jsx)("p",{className:"text-gray-500",children:"Hen\xfcz kay\u0131t bulunmamaktad\u0131r."}):(0,Zm.jsx)("div",{className:"overflow-x-auto",children:(0,Zm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Zm.jsx)("thead",{className:"bg-gray-50",children:(0,Zm.jsxs)("tr",{children:[o.map(e=>(0,Zm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:e},e)),(0,Zm.jsx)("th",{className:"px-6 py-3"})]})}),(0,Zm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(e=>(0,Zm.jsxs)("tr",{children:[l.map(t=>(0,Zm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:"date"===t?new Date(e[t]).toLocaleDateString():"number"===typeof e[t]?ap(e[t],t.toLowerCase().includes("fiyat")||t.toLowerCase().includes("maliyet")||t.toLowerCase().includes("gelir")||t.toLowerCase().includes("\xfccret")||t.toLowerCase().includes("tutar")?"\u20ba":""):e[t]||"N/A"},t)),(0,Zm.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,Zm.jsx)("button",{onClick:()=>i(e),className:"p-2 bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300 hover:text-gray-800 transition-colors",children:(0,Zm.jsx)(R,{className:"w-5 h-5"})}),(0,Zm.jsx)("button",{onClick:()=>a(e.id),className:"ml-2 p-2 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:(0,Zm.jsx)(F,{className:"w-5 h-5"})})]})]},e.id))})]})})]})},_p=e=>{let{onClose:t,onSave:n,editingExpense:s}=e;const[i,a]=(0,r.useState)({date:new Date,description:"",amount:"",workerName:"",daysWorked:""});(0,r.useEffect)(()=>{if(s){const e=new Date(s.date);a(u(u({},s),{},{date:isNaN(e.getTime())?new Date:e}))}},[s]);const o=e=>{const{name:t,value:n}=e.target;a(e=>u(u({},e),{},{[t]:n}))};return(0,Zm.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,Zm.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-xl p-6",children:[(0,Zm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:s?"\u0130\u015f\xe7i Harcamas\u0131n\u0131 D\xfczenle":"Yeni \u0130\u015f\xe7i Harcamas\u0131 Ekle"}),(0,Zm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(u(u({},i),{},{id:null===s||void 0===s?void 0:s.id}))},className:"space-y-4",children:[(0,Zm.jsx)(up,{label:"Tarih",id:"date",type:"date",name:"date",value:cp(i.date),onChange:o,required:!0}),(0,Zm.jsx)(up,{label:"\u0130\u015f\xe7i Ad\u0131",id:"workerName",type:"text",name:"workerName",value:i.workerName,onChange:o,required:!0}),(0,Zm.jsx)(up,{label:"\xc7al\u0131\u015ft\u0131\u011f\u0131 G\xfcn Say\u0131s\u0131",id:"daysWorked",type:"number",name:"daysWorked",value:i.daysWorked,onChange:o}),(0,Zm.jsx)(up,{label:"Verilen \xdccret (\u20ba)",id:"amount",type:"number",name:"amount",value:i.amount,onChange:o,required:!0}),(0,Zm.jsx)(dp,{label:"A\xe7\u0131klama",id:"description",name:"description",value:i.description,onChange:o})," ",(0,Zm.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Zm.jsx)("button",{type:"button",onClick:t,className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 transition-colors shadow-sm",children:"\u0130ptal"}),(0,Zm.jsx)("button",{type:"submit",className:"px-6 py-2 bg-emerald-600 text-white rounded",children:"Kaydet"})]})]})]})})},Cp=e=>{let{onClose:t,onSave:n,editingExpense:s}=e;const[i,a]=(0,r.useState)({date:new Date,description:"",amount:""});(0,r.useEffect)(()=>{if(s){const e=new Date(s.date);a(u(u({},s),{},{date:isNaN(e.getTime())?new Date:e}))}},[s]);const o=e=>{const{name:t,value:n}=e.target;a(e=>u(u({},e),{},{[t]:n}))};return(0,Zm.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,Zm.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-xl p-6",children:[(0,Zm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:s?"Muhtelif Gideri D\xfczenle":"Yeni Muhtelif Gider Ekle"}),(0,Zm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(u(u({},i),{},{id:null===s||void 0===s?void 0:s.id}))},className:"space-y-4",children:[" ",(0,Zm.jsx)("div",{className:"space-x-2 mb-2",children:["Elektrik","Su","Yemek","Yak\u0131t"].map(e=>(0,Zm.jsx)("button",{type:"button",onClick:()=>{return t=e,void a(e=>u(u({},e),{},{description:e.description?"".concat(e.description,", ").concat(t):t}));var t},className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 border border-gray-300 rounded-full hover:bg-gray-200 transition-colors",children:e},e))}),(0,Zm.jsx)(up,{label:"Tarih",id:"date",type:"date",name:"date",value:cp(i.date),onChange:o,required:!0}),(0,Zm.jsx)(dp,{label:"A\xe7\u0131klama",id:"description",name:"description",value:i.description,onChange:o,required:!0,rows:"3"}),(0,Zm.jsx)(up,{label:"Gider Tutar\u0131 (\u20ba)",id:"amount",type:"number",name:"amount",value:i.amount,onChange:o,required:!0}),(0,Zm.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Zm.jsx)("button",{type:"button",onClick:t,className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 transition-colors shadow-sm",children:"\u0130ptal"}),(0,Zm.jsx)("button",{type:"submit",className:"px-6 py-2 bg-emerald-600 text-white rounded",children:"Kaydet"})]})]})]})})},Tp=e=>{let{onClose:t,onSave:n,editingRevenue:s}=e;const[i,a]=(0,r.useState)({date:new Date,truckCount:"",loadKg:"",pricePerKg:"",description:""});(0,r.useEffect)(()=>{if(s){const e=new Date(s.date);a(u(u({},s),{},{date:isNaN(e.getTime())?new Date:e}))}},[s]);const o=e=>{const{name:t,value:n}=e.target;a(e=>u(u({},e),{},{[t]:n}))},l=lp(Number(i.loadKg)*Number(i.pricePerKg));return(0,Zm.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,Zm.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-xl p-6",children:[(0,Zm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:s?"Pirina Gelirini D\xfczenle":"Yeni Pirina Geliri Ekle"}),(0,Zm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(u(u({},i),{},{totalRevenue:l,id:null===s||void 0===s?void 0:s.id}))},className:"space-y-4",children:[(0,Zm.jsx)(up,{label:"Tarih",id:"date",type:"date",name:"date",value:cp(i.date),onChange:o,required:!0}),(0,Zm.jsx)(up,{label:"Giden T\u0131r Say\u0131s\u0131",id:"truckCount",type:"number",name:"truckCount",value:i.truckCount,onChange:o,required:!0}),(0,Zm.jsx)(up,{label:"Toplam Y\xfck (kg)",id:"loadKg",type:"number",name:"loadKg",value:i.loadKg,onChange:o,required:!0}),(0,Zm.jsx)(up,{label:"Kg Ba\u015f\u0131na \xdccret (\u20ba)",id:"pricePerKg",type:"number",name:"pricePerKg",value:i.pricePerKg,onChange:o,required:!0}),(0,Zm.jsx)(dp,{label:"A\xe7\u0131klama (\xf6rn: Firma Ad\u0131)",id:"description",name:"description",value:i.description,onChange:o}),(0,Zm.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,Zm.jsx)("label",{children:"Hesaplanan Toplam Gelir"}),(0,Zm.jsx)("p",{className:"font-bold",children:ap(l,"\u20ba")})]}),(0,Zm.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Zm.jsx)("button",{type:"button",onClick:t,className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 transition-colors shadow-sm",children:"\u0130ptal"}),(0,Zm.jsx)("button",{type:"submit",className:"px-6 py-2 bg-emerald-600 text-white rounded",children:"Kaydet"})]})]})]})})},Ip=e=>{let{onClose:t,onSave:n,editingPurchase:s}=e;const[i,a]=(0,r.useState)({date:new Date,description:"",s16:"",s10:"",s5:"",tinPrice:""});(0,r.useEffect)(()=>{if(s){const e=new Date(s.date);a(u(u({},s),{},{date:isNaN(e.getTime())?new Date:e}))}},[s]);const o=e=>{const{name:t,value:n}=e.target;a(e=>u(u({},e),{},{[t]:n}))},l=(Number(i.s16)||0)+(Number(i.s10)||0)+(Number(i.s5)||0),c=lp(l*Number(i.tinPrice));return(0,Zm.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,Zm.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-xl p-6",children:[(0,Zm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:s?"Teneke Al\u0131m\u0131n\u0131 D\xfczenle":"Yeni Teneke Al\u0131m\u0131 Ekle"}),(0,Zm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(u(u({},i),{},{totalCost:c,id:null===s||void 0===s?void 0:s.id}))},className:"space-y-4",children:[(0,Zm.jsx)(up,{label:"Tarih",id:"date",type:"date",name:"date",value:cp(i.date),onChange:o,required:!0}),(0,Zm.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Zm.jsx)(up,{label:"16'l\u0131k Say\u0131s\u0131",id:"s16",type:"number",name:"s16",value:i.s16,onChange:o}),(0,Zm.jsx)(up,{label:"10'luk Say\u0131s\u0131",id:"s10",type:"number",name:"s10",value:i.s10,onChange:o}),(0,Zm.jsx)(up,{label:"5'lik Say\u0131s\u0131",id:"s5",type:"number",name:"s5",value:i.s5,onChange:o})]}),(0,Zm.jsx)(up,{label:"Birim Fiyat (\u20ba)",id:"tinPrice",type:"number",name:"tinPrice",value:i.tinPrice,onChange:o,required:!0}),(0,Zm.jsx)(dp,{label:"A\xe7\u0131klama (\xf6rn: Sat\u0131c\u0131 Firma)",id:"description",name:"description",value:i.description,onChange:o}),(0,Zm.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,Zm.jsx)("label",{children:"Hesaplanan Toplam Maliyet"}),(0,Zm.jsx)("p",{className:"font-bold",children:ap(c,"\u20ba")})]}),(0,Zm.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Zm.jsx)("button",{type:"button",onClick:t,className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 transition-colors shadow-sm",children:"\u0130ptal"}),(0,Zm.jsx)("button",{type:"submit",className:"px-6 py-2 bg-emerald-600 text-white rounded",children:"Kaydet"})]})]})]})})},jp=e=>{let{onClose:t,onSave:n,editingPurchase:s}=e;const[i,a]=(0,r.useState)({date:new Date,description:"",s10:"",s5:"",s2:"",plasticPrice:""});(0,r.useEffect)(()=>{if(s){const e=new Date(s.date);a(u(u({},s),{},{date:isNaN(e.getTime())?new Date:e}))}},[s]);const o=e=>{const{name:t,value:n}=e.target;a(e=>u(u({},e),{},{[t]:n}))},l=(Number(i.s10)||0)+(Number(i.s5)||0)+(Number(i.s2)||0),c=lp(l*Number(i.plasticPrice));return(0,Zm.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,Zm.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-xl p-6",children:[(0,Zm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:s?"Bidon Al\u0131m\u0131n\u0131 D\xfczenle":"Yeni Bidon Al\u0131m\u0131 Ekle"}),(0,Zm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(u(u({},i),{},{totalCost:c,id:null===s||void 0===s?void 0:s.id}))},className:"space-y-4",children:[(0,Zm.jsx)(up,{label:"Tarih",id:"date",type:"date",name:"date",value:cp(i.date),onChange:o,required:!0}),(0,Zm.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Zm.jsx)(up,{label:"10'luk Say\u0131s\u0131",id:"s10",type:"number",name:"s10",value:i.s10,onChange:o}),(0,Zm.jsx)(up,{label:"5'lik Say\u0131s\u0131",id:"s5",type:"number",name:"s5",value:i.s5,onChange:o}),(0,Zm.jsx)(up,{label:"2'lik Say\u0131s\u0131",id:"s2",type:"number",name:"s2",value:i.s2,onChange:o})]}),(0,Zm.jsx)(up,{label:"Birim Fiyat (\u20ba)",id:"plasticPrice",type:"number",name:"plasticPrice",value:i.plasticPrice,onChange:o,required:!0}),(0,Zm.jsx)(dp,{label:"A\xe7\u0131klama (\xf6rn: Sat\u0131c\u0131 Firma)",id:"description",name:"description",value:i.description,onChange:o}),(0,Zm.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,Zm.jsx)("label",{children:"Hesaplanan Toplam Maliyet"}),(0,Zm.jsx)("p",{className:"font-bold",children:ap(c,"\u20ba")})]}),(0,Zm.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Zm.jsx)("button",{type:"button",onClick:t,className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 transition-colors shadow-sm",children:"\u0130ptal"}),(0,Zm.jsx)("button",{type:"submit",className:"px-6 py-2 bg-emerald-600 text-white rounded",children:"Kaydet"})]})]})]})})},Pp=e=>{let{customer:t,onClose:n,onSavePayment:s}=e;const[i,a]=(0,r.useState)("");return(0,Zm.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,Zm.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[(0,Zm.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Tahsilat Yap"}),(0,Zm.jsxs)("p",{className:"mb-4",children:["M\xfc\u015fteri: ",(0,Zm.jsx)("span",{className:"font-semibold",children:t.name})]}),(0,Zm.jsxs)("p",{className:"mb-4",children:["Mevcut Bakiye: ",(0,Zm.jsx)("span",{className:"font-semibold",children:ap(t.remainingBalance,"\u20ba")})]}),(0,Zm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),Number(i)>0&&alert("L\xfctfen ge\xe7erli bir tutar girin."),Number(i)>0&&s(t.id,t.name,i)},className:"space-y-4",children:[(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("label",{htmlFor:"paymentAmount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tahsil Edilen Tutar (\u20ba)"}),(0,Zm.jsx)("input",{type:"number",id:"paymentAmount",value:i,onChange:e=>a(e.target.value),placeholder:"Tutar girin",className:"w-full border rounded p-2",required:!0,autoFocus:!0})]}),(0,Zm.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Zm.jsx)("button",{type:"button",onClick:n,className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 transition-colors shadow-sm",children:"\u0130ptal"}),(0,Zm.jsx)("button",{type:"submit",className:"px-6 py-2 bg-green-600 text-white rounded",children:"Tahsil Et"})]})]})]})})},Ap=e=>{let{tinPurchases:t,plasticPurchases:n,transactions:r}=e;const s={tin:{s16:{purchased:0,used:0},s10:{purchased:0,used:0},s5:{purchased:0,used:0}},plastic:{s10:{purchased:0,used:0},s5:{purchased:0,used:0},s2:{purchased:0,used:0}}};t.forEach(e=>{s.tin.s16.purchased+=Number(e.s16||0),s.tin.s10.purchased+=Number(e.s10||0),s.tin.s5.purchased+=Number(e.s5||0)}),n.forEach(e=>{s.plastic.s10.purchased+=Number(e.s10||0),s.plastic.s5.purchased+=Number(e.s5||0),s.plastic.s2.purchased+=Number(e.s2||0)}),r.forEach(e=>{var t,n,r,i,a,o;s.tin.s16.used+=Number((null===(t=e.tinCounts)||void 0===t?void 0:t.s16)||0),s.tin.s10.used+=Number((null===(n=e.tinCounts)||void 0===n?void 0:n.s10)||0),s.tin.s5.used+=Number((null===(r=e.tinCounts)||void 0===r?void 0:r.s5)||0),s.plastic.s10.used+=Number((null===(i=e.plasticCounts)||void 0===i?void 0:i.s10)||0),s.plastic.s5.used+=Number((null===(a=e.plasticCounts)||void 0===a?void 0:a.s5)||0),s.plastic.s2.used+=Number((null===(o=e.plasticCounts)||void 0===o?void 0:o.s2)||0)});const i=function(e,t){let n={s16:0,s10:0,s5:0},r={s16:0,s10:0,s5:0};e.forEach(e=>{n.s16+=Number(e.s16||0),n.s10+=Number(e.s10||0),n.s5+=Number(e.s5||0),r.s16+=Number(e.s16||0)*Number(e.tinPrice||0),r.s10+=Number(e.s10||0)*Number(e.tinPrice||0),r.s5+=Number(e.s5||0)*Number(e.tinPrice||0)});const s=n.s16>0?r.s16/n.s16:0,i=n.s10>0?r.s10/n.s10:0,a=n.s5>0?r.s5/n.s5:0;let o={s16:0,s10:0,s5:0};t.forEach(e=>{var t,n,r;o.s16+=Number((null===(t=e.tinCounts)||void 0===t?void 0:t.s16)||0),o.s10+=Number((null===(n=e.tinCounts)||void 0===n?void 0:n.s10)||0),o.s5+=Number((null===(r=e.tinCounts)||void 0===r?void 0:r.s5)||0)});let l=n.s16-o.s16,c=n.s10-o.s10,u=n.s5-o.s5;return{s16:{maliyet_alinan:n.s16*s,maliyet_kullanilan:o.s16*s,maliyet_kalan:l*s},s10:{maliyet_alinan:n.s10*i,maliyet_kullanilan:o.s10*i,maliyet_kalan:c*i},s5:{maliyet_alinan:n.s5*a,maliyet_kullanilan:o.s5*a,maliyet_kalan:u*a}}}(t,r);const a=function(e,t){let n={s10:0,s5:0,s2:0},r={s10:0,s5:0,s2:0};e.forEach(e=>{n.s10+=Number(e.s10||0),n.s5+=Number(e.s5||0),n.s2+=Number(e.s2||0),r.s10+=Number(e.s10||0)*Number(e.plasticPrice||0),r.s5+=Number(e.s5||0)*Number(e.plasticPrice||0),r.s2+=Number(e.s2||0)*Number(e.plasticPrice||0)});const s=n.s10>0?r.s10/n.s10:0,i=n.s5>0?r.s5/n.s5:0,a=n.s2>0?r.s2/n.s2:0;let o={s10:0,s5:0,s2:0};t.forEach(e=>{var t,n,r;o.s10+=Number((null===(t=e.plasticCounts)||void 0===t?void 0:t.s10)||0),o.s5+=Number((null===(n=e.plasticCounts)||void 0===n?void 0:n.s5)||0),o.s2+=Number((null===(r=e.plasticCounts)||void 0===r?void 0:r.s2)||0)});let l=n.s10-o.s10,c=n.s5-o.s5,u=n.s2-o.s2;return{s10:{maliyet_alinan:n.s10*s,maliyet_kullanilan:o.s10*s,maliyet_kalan:l*s},s5:{maliyet_alinan:n.s5*i,maliyet_kullanilan:o.s5*i,maliyet_kalan:c*i},s2:{maliyet_alinan:n.s2*a,maliyet_kullanilan:o.s2*a,maliyet_kalan:u*a}}}(n,r),o=Object.values(i).reduce((e,t)=>e+(t.maliyet_kalan||0),0),l=Object.values(a).reduce((e,t)=>e+(t.maliyet_kalan||0),0);return(0,Zm.jsxs)("div",{className:"space-y-8",children:[(0,Zm.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Stok Durumu"}),(0,Zm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Zm.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,Zm.jsx)(S,{className:"w-6 h-6 mr-2 text-orange-500"}),"Teneke Stok Durumu"]}),(0,Zm.jsx)("div",{className:"space-y-6 mt-4",children:Object.keys(s.tin).map(e=>(0,Zm.jsxs)("div",{children:[(0,Zm.jsxs)("h3",{className:"text-lg font-semibold text-gray-600 border-b pb-2 mb-2",children:[e.replace("s",""),"'luk Teneke"]}),(0,Zm.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("p",{className:"text-sm text-gray-500",children:"Al\u0131nan"}),(0,Zm.jsx)("p",{className:"text-2xl font-bold",children:ap(s.tin[e].purchased)}),(0,Zm.jsx)("p",{style:{fontSize:"0.95rem",color:"#555",marginTop:2},children:ap(i[e].maliyet_alinan,"\u20ba")})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("p",{className:"text-sm text-gray-500",children:"Kullan\u0131lan"}),(0,Zm.jsx)("p",{className:"text-2xl font-bold",children:ap(s.tin[e].used)}),(0,Zm.jsx)("p",{style:{fontSize:"0.95rem",color:"#555",marginTop:2},children:ap(i[e].maliyet_kullanilan,"\u20ba")})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("p",{className:"text-sm text-gray-500",children:"Kalan"}),(0,Zm.jsx)("p",{className:"text-2xl font-bold text-green-600",children:ap(s.tin[e].purchased-s.tin[e].used)}),(0,Zm.jsx)("p",{style:{fontSize:"0.95rem",color:"#555",marginTop:2},children:ap(i[e].maliyet_kalan,"\u20ba")})]})]})]},e))}),(0,Zm.jsxs)("div",{className:"mt-8 bg-orange-50 border border-orange-200 rounded-lg p-4 flex flex-col items-center",children:[(0,Zm.jsx)("span",{className:"text-base font-semibold text-orange-700 mb-1",children:"Toplam Kalan Teneke Stok De\u011feri"}),(0,Zm.jsx)("span",{className:"text-2xl font-bold text-orange-900",children:ap(o,"\u20ba")})]})]}),(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Zm.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,Zm.jsx)(S,{className:"w-6 h-6 mr-2 text-teal-500"}),"Bidon Stok Durumu"]}),(0,Zm.jsx)("div",{className:"space-y-6 mt-4",children:Object.keys(s.plastic).map(e=>(0,Zm.jsxs)("div",{children:[(0,Zm.jsxs)("h3",{className:"text-lg font-semibold text-gray-600 border-b pb-2 mb-2",children:[e.replace("s",""),"'luk Bidon"]}),(0,Zm.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("p",{className:"text-sm text-gray-500",children:"Al\u0131nan"}),(0,Zm.jsx)("p",{className:"text-2xl font-bold",children:ap(s.plastic[e].purchased)}),(0,Zm.jsx)("p",{style:{fontSize:"0.95rem",color:"#555",marginTop:2},children:ap(a[e].maliyet_alinan,"\u20ba")})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("p",{className:"text-sm text-gray-500",children:"Kullan\u0131lan"}),(0,Zm.jsx)("p",{className:"text-2xl font-bold",children:ap(s.plastic[e].used)}),(0,Zm.jsx)("p",{style:{fontSize:"0.95rem",color:"#555",marginTop:2},children:ap(a[e].maliyet_kullanilan,"\u20ba")})]}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("p",{className:"text-sm text-gray-500",children:"Kalan"}),(0,Zm.jsx)("p",{className:"text-2xl font-bold text-green-600",children:ap(s.plastic[e].purchased-s.plastic[e].used)}),(0,Zm.jsx)("p",{style:{fontSize:"0.95rem",color:"#555",marginTop:2},children:ap(a[e].maliyet_kalan,"\u20ba")})]})]})]},e))}),(0,Zm.jsxs)("div",{className:"mt-8 bg-teal-50 border border-teal-200 rounded-lg p-4 flex flex-col items-center",children:[(0,Zm.jsx)("span",{className:"text-base font-semibold text-teal-700 mb-1",children:"Toplam Kalan Bidon Stok De\u011feri"}),(0,Zm.jsx)("span",{className:"text-2xl font-bold text-teal-900",children:ap(l,"\u20ba")})]})]})]})]})},Dp=e=>{let{title:t,value:n,icon:r,children:s,iconColorClass:i="text-gray-600"}=e;return(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col justify-between min-h-[120px] transition-transform hover:scale-105",children:[(0,Zm.jsx)("div",{children:(0,Zm.jsxs)("div",{className:"flex items-center",children:[(0,Zm.jsx)("div",{className:"p-3 rounded-full bg-gray-100 mr-4 text-2xl ".concat(i),children:r}),(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("p",{className:"text-sm text-gray-600 font-semibold",children:t}),(0,Zm.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}),s&&(0,Zm.jsx)("div",{className:"mt-4 border-t pt-2 text-sm text-gray-500 space-y-1",children:s})]})};const Rp=r.forwardRef((e,t)=>{var n,r,s,i,a,o,l,c,u,d,h,f,m,p,g,y,v,b;let{transactionData:x}=e;const w=(Number(x.oliveKg)||0)*(Number(x.pricePerKg)||0),N=Number((null===(n=x.tinCounts)||void 0===n?void 0:n.s16)||0)*Number((null===(r=x.tinPrices)||void 0===r?void 0:r.s16)||0)+Number((null===(s=x.tinCounts)||void 0===s?void 0:s.s10)||0)*Number((null===(i=x.tinPrices)||void 0===i?void 0:i.s10)||0)+Number((null===(a=x.tinCounts)||void 0===a?void 0:a.s5)||0)*Number((null===(o=x.tinPrices)||void 0===o?void 0:o.s5)||0),k=Number((null===(l=x.plasticCounts)||void 0===l?void 0:l.s10)||0)*Number((null===(c=x.plasticPrices)||void 0===c?void 0:c.s10)||0)+Number((null===(u=x.plasticCounts)||void 0===u?void 0:u.s5)||0)*Number((null===(d=x.plasticPrices)||void 0===d?void 0:d.s5)||0)+Number((null===(h=x.plasticCounts)||void 0===h?void 0:h.s2)||0)*Number((null===(f=x.plasticPrices)||void 0===f?void 0:f.s2)||0),S=w+N+k,E=S-(Number(x.paymentReceived)||0)-(Number(x.paymentLoss)||0);return(0,Zm.jsx)("div",{ref:t,style:{width:"100%",minHeight:"100%",fontFamily:"Arial, sans-serif",padding:24},children:(0,Zm.jsxs)("div",{style:{border:"2px dashed #333",borderRadius:12,padding:24,maxWidth:520,margin:"0 auto",background:"#fff"},children:[(0,Zm.jsx)("h2",{style:{textAlign:"center",fontWeight:700,fontSize:22,marginBottom:8},children:"D\xdcLD\xdcL ZEYT\u0130NYA\u011eI FABR\u0130KASI"}),(0,Zm.jsx)("h3",{style:{textAlign:"center",fontWeight:600,fontSize:18,marginBottom:16},children:"\u0130\u015flem Fi\u015fi / Makbuz"}),(0,Zm.jsx)("table",{style:{width:"100%",marginBottom:12,fontSize:15},children:(0,Zm.jsxs)("tbody",{children:[(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{children:(0,Zm.jsx)("b",{children:"M\xfc\u015fteri:"})}),(0,Zm.jsx)("td",{children:x.customerName})]}),(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{children:(0,Zm.jsx)("b",{children:"Tarih:"})}),(0,Zm.jsx)("td",{children:x.date?new Date(x.date).toLocaleDateString():""})]}),(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{children:(0,Zm.jsx)("b",{children:"A\xe7\u0131klama:"})}),(0,Zm.jsx)("td",{children:x.description?"".concat(x.description," (").concat(ap(x.oliveKg)," kg zeytin)"):"".concat(ap(x.oliveKg)," kg zeytin")})]})]})}),(0,Zm.jsx)("hr",{style:{margin:"12px 0"}}),(0,Zm.jsx)("table",{style:{width:"100%",fontSize:15,marginBottom:12},children:(0,Zm.jsxs)("tbody",{children:[(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{children:"Zeytin (kg):"}),(0,Zm.jsx)("td",{children:x.oliveKg})]}),(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{children:"\xc7\u0131kan Ya\u011f (L):"}),(0,Zm.jsx)("td",{children:x.oilLitre})]}),(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{children:"Kg Ba\u015f\u0131na \xdccret (\u20ba):"}),(0,Zm.jsx)("td",{children:x.pricePerKg})]}),(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{children:"Ya\u011f Oran\u0131:"}),(0,Zm.jsx)("td",{children:Number(x.oliveKg)>0&&Number(x.oilLitre)>0?(Number(x.oliveKg)/Number(x.oilLitre)).toFixed(2):"-"})]}),(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{children:"Teneke (16/10/5):"}),(0,Zm.jsxs)("td",{children:[(null===(m=x.tinCounts)||void 0===m?void 0:m.s16)||0," / ",(null===(p=x.tinCounts)||void 0===p?void 0:p.s10)||0," / ",(null===(g=x.tinCounts)||void 0===g?void 0:g.s5)||0]})]}),(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{children:"Bidon (10/5/2):"}),(0,Zm.jsxs)("td",{children:[(null===(y=x.plasticCounts)||void 0===y?void 0:y.s10)||0," / ",(null===(v=x.plasticCounts)||void 0===v?void 0:v.s5)||0," / ",(null===(b=x.plasticCounts)||void 0===b?void 0:b.s2)||0]})]})]})}),(0,Zm.jsx)("hr",{style:{margin:"12px 0"}}),(0,Zm.jsx)("table",{style:{width:"100%",fontSize:15,marginBottom:12},children:(0,Zm.jsxs)("tbody",{children:[(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{children:"Zeytin S\u0131k\u0131m \xdccreti:"}),(0,Zm.jsxs)("td",{children:[w.toLocaleString("tr-TR",{maximumFractionDigits:2})," \u20ba"]})]}),(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{children:"Teneke Fiyat\u0131:"}),(0,Zm.jsxs)("td",{children:[N.toLocaleString("tr-TR",{maximumFractionDigits:2})," \u20ba"]})]}),(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{children:"Bidon Fiyat\u0131:"}),(0,Zm.jsxs)("td",{children:[k.toLocaleString("tr-TR",{maximumFractionDigits:2})," \u20ba"]})]}),(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{children:(0,Zm.jsx)("b",{children:"Genel Toplam:"})}),(0,Zm.jsx)("td",{children:(0,Zm.jsxs)("b",{children:[S.toLocaleString("tr-TR",{maximumFractionDigits:2})," \u20ba"]})})]}),(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{children:"Al\u0131nan \xd6deme:"}),(0,Zm.jsxs)("td",{children:[(Number(x.paymentReceived)||0).toLocaleString("tr-TR",{maximumFractionDigits:2})," \u20ba"]})]}),(0,Zm.jsxs)("tr",{children:[(0,Zm.jsx)("td",{children:(0,Zm.jsx)("b",{children:"Kalan Bakiye:"})}),(0,Zm.jsx)("td",{children:(0,Zm.jsxs)("b",{children:[E.toLocaleString("tr-TR",{maximumFractionDigits:2})," \u20ba"]})})]})]})}),(0,Zm.jsx)("hr",{style:{margin:"12px 0"}})]})})}),Op=e=>{let{customers:t,transactions:n,workerExpenses:r,factoryOverhead:s,pomaceRevenues:i,tinPurchases:a,plasticPurchases:o,oilPurchases:l,oilSales:c}=e;const u=n.reduce((e,t)=>e+Number(t.oliveKg||0),0),d=n.reduce((e,t)=>e+Number(t.oilLitre||0),0);n.reduce((e,t)=>e+Number(t.totalCost||0),0),n.reduce((e,t)=>e+Number(t.paymentReceived||0),0),n.reduce((e,t)=>e+Number(t.paymentLoss||0),0),r.reduce((e,t)=>e+Number(t.amount||0),0),s.reduce((e,t)=>e+Number(t.amount||0),0),i.reduce((e,t)=>e+Number(t.totalRevenue||0),0),a.reduce((e,t)=>e+Number(t.totalCost||0),0),o.reduce((e,t)=>e+Number(t.totalCost||0),0),l.reduce((e,t)=>e+Number(t.tinCount||0),0),c.reduce((e,t)=>e+Number(t.tinCount||0),0),l.reduce((e,t)=>e+Number(t.totalCost||0),0),c.reduce((e,t)=>e+Number(t.totalRevenue||0),0),u>0&&d>0&&(u/d).toFixed(2);return(0,Zm.jsxs)("div",{className:"space-y-8",children:[(0,Zm.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Veri Yedekleme"}),(0,Zm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Zm.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Metin Dosyas\u0131 (.txt) Olarak \u0130ndir"}),(0,Zm.jsx)("p",{className:"text-gray-600 mb-6",children:"Programdaki t\xfcm verileri i\xe7eren, kolayca okunabilir bir yedek dosyas\u0131 olu\u015fturur ve indirir."}),(0,Zm.jsxs)("button",{onClick:async()=>{try{const n=await readUserData(),r=n.transactions.reduce((e,t)=>e+Number(t.oliveKg||0),0),s=n.transactions.reduce((e,t)=>e+Number(t.oilLitre||0),0),i=n.transactions.reduce((e,t)=>e+Number(t.totalCost||0),0),a=n.transactions.reduce((e,t)=>e+Number(t.paymentReceived||0),0),o=n.transactions.reduce((e,t)=>e+Number(t.paymentLoss||0),0),l=i-a-o,c=n.workerExpenses.reduce((e,t)=>e+Number(t.amount||0),0),u=n.factoryOverhead.reduce((e,t)=>e+Number(t.amount||0),0),d=n.pomaceRevenues.reduce((e,t)=>e+Number(t.totalRevenue||0),0),h=n.tinPurchases.reduce((e,t)=>e+Number(t.totalCost||0),0),f=n.plasticPurchases.reduce((e,t)=>e+Number(t.totalCost||0),0),m=c+u+h+f;r>0&&s>0&&(r/s).toFixed(2),n.oilPurchases.reduce((e,t)=>e+Number(t.tinCount||0),0),n.oilSales.reduce((e,t)=>e+Number(t.tinCount||0),0),n.oilPurchases.reduce((e,t)=>e+Number(t.totalCost||0),0),n.oilSales.reduce((e,t)=>e+Number(t.totalRevenue||0),0);function p(e,t){let n={s16:0,s10:0,s5:0},r={s16:0,s10:0,s5:0};e.forEach(e=>{n.s16+=Number(e.s16||0),n.s10+=Number(e.s10||0),n.s5+=Number(e.s5||0),r.s16+=Number(e.s16||0)*Number(e.tinPrice||0),r.s10+=Number(e.s10||0)*Number(e.tinPrice||0),r.s5+=Number(e.s5||0)*Number(e.tinPrice||0)});const s=n.s16>0?r.s16/n.s16:0,i=n.s10>0?r.s10/n.s10:0,a=n.s5>0?r.s5/n.s5:0;let o={s16:0,s10:0,s5:0};return t.forEach(e=>{var t,n,r;o.s16+=Number((null===(t=e.tinCounts)||void 0===t?void 0:t.s16)||0),o.s10+=Number((null===(n=e.tinCounts)||void 0===n?void 0:n.s10)||0),o.s5+=Number((null===(r=e.tinCounts)||void 0===r?void 0:r.s5)||0)}),{s16:{maliyet_kalan:(n.s16-o.s16)*s},s10:{maliyet_kalan:(n.s10-o.s10)*i},s5:{maliyet_kalan:(n.s5-o.s5)*a}}}function g(e,t){let n={s10:0,s5:0,s2:0},r={s10:0,s5:0,s2:0};e.forEach(e=>{n.s10+=Number(e.s10||0),n.s5+=Number(e.s5||0),n.s2+=Number(e.s2||0),r.s10+=Number(e.s10||0)*Number(e.plasticPrice||0),r.s5+=Number(e.s5||0)*Number(e.plasticPrice||0),r.s2+=Number(e.s2||0)*Number(e.plasticPrice||0)});const s=n.s10>0?r.s10/n.s10:0,i=n.s5>0?r.s5/n.s5:0,a=n.s2>0?r.s2/n.s2:0;let o={s10:0,s5:0,s2:0};return t.forEach(e=>{var t,n,r;o.s10+=Number((null===(t=e.plasticCounts)||void 0===t?void 0:t.s10)||0),o.s5+=Number((null===(n=e.plasticCounts)||void 0===n?void 0:n.s5)||0),o.s2+=Number((null===(r=e.plasticCounts)||void 0===r?void 0:r.s2)||0)}),{s10:{maliyet_kalan:(n.s10-o.s10)*s},s5:{maliyet_kalan:(n.s5-o.s5)*i},s2:{maliyet_kalan:(n.s2-o.s2)*a}}}const y=p(n.tinPurchases||[],n.transactions||[]),v=g(n.plasticPurchases||[],n.transactions||[]),b=Object.values(y).reduce((e,t)=>e+(t.maliyet_kalan||0),0),x=Object.values(v).reduce((e,t)=>e+(t.maliyet_kalan||0),0);let w="D\xdcLD\xdcL ZEYT\u0130NYA\u011eI FABR\u0130KASI - YEDEK DOSYASI\n";w+="Yedekleme Tarihi: ".concat((new Date).toLocaleString("tr-TR"),"\n"),w+="==================================================\n\n";const N=i-o+d+b+x;w+="==================================================\n",w+="--- FABR\u0130KA GENEL \xd6ZET\u0130 ---\n",w+="Toplam Gelir: ".concat(ap(N,"\u20ba"),"\n"),w+="Toplam Gider: ".concat(ap(m,"\u20ba"),"\n"),w+="Net K\xe2r/Zarar: ".concat(ap(N-m,"\u20ba"),"\n"),w+="Kalan Teneke Stok De\u011feri: ".concat(ap(b,"\u20ba"),"\n"),w+="Kalan Bidon Stok De\u011feri: ".concat(ap(x,"\u20ba"),"\n"),w+="\n";const k=n.transactions.reduce((e,t)=>e+Number(t.oliveKg||0)*Number(t.pricePerKg||0),0),S=n.transactions.reduce((e,t)=>{var n,r,s,i,a,o;return e+Number((null===(n=t.tinCounts)||void 0===n?void 0:n.s16)||0)*Number((null===(r=t.tinPrices)||void 0===r?void 0:r.s16)||0)+Number((null===(s=t.tinCounts)||void 0===s?void 0:s.s10)||0)*Number((null===(i=t.tinPrices)||void 0===i?void 0:i.s10)||0)+Number((null===(a=t.tinCounts)||void 0===a?void 0:a.s5)||0)*Number((null===(o=t.tinPrices)||void 0===o?void 0:o.s5)||0)},0),E=n.transactions.reduce((e,t)=>{var n,r,s,i,a,o;return e+Number((null===(n=t.plasticCounts)||void 0===n?void 0:n.s10)||0)*Number((null===(r=t.plasticPrices)||void 0===r?void 0:r.s10)||0)+Number((null===(s=t.plasticCounts)||void 0===s?void 0:s.s5)||0)*Number((null===(i=t.plasticPrices)||void 0===i?void 0:i.s5)||0)+Number((null===(a=t.plasticCounts)||void 0===a?void 0:a.s2)||0)*Number((null===(o=t.plasticPrices)||void 0===o?void 0:o.s2)||0)},0),_=k+S+E;w+="==================================================\n",w+="--- ZEYT\u0130N \xc7EK\u0130M \xdcCRETLER\u0130 ---\n",w+="Zeytin S\u0131k\u0131m\u0131 Has\u0131lat\u0131: ".concat(ap(k,"\u20ba"),"\n"),w+="Teneke Sat\u0131\u015f\u0131 Has\u0131lat\u0131: ".concat(ap(S,"\u20ba"),"\n"),w+="Bidon Sat\u0131\u015f\u0131 Has\u0131lat\u0131: ".concat(ap(E,"\u20ba"),"\n"),w+="Toplam Has\u0131lat: ".concat(ap(_-o,"\u20ba"),"\n"),w+="Toplam Al\u0131nan \xd6deme: ".concat(ap(a,"\u20ba"),"\n"),w+="Bekleyen \xd6demeler: ".concat(ap(l,"\u20ba"),"\n"),w+="\xd6deme Firesi: ".concat(ap(o,"\u20ba"),"\n"),w+="\n";const C=n.oilPurchases.reduce((e,t)=>e+Number(t.totalCost||0),0),T=n.oilSales.reduce((e,t)=>e+Number(t.totalRevenue||0),0),I=n.oilPurchases.reduce((e,t)=>e+Number(t.tinCount||0),0),j=n.oilSales.reduce((e,t)=>e+Number(t.tinCount||0),0),P=I-j,A=T-C;function D(e,t){let n={s16:0,s10:0,s5:0},r={s16:0,s10:0,s5:0};return e.forEach(e=>{n.s16+=Number(e.s16||0),n.s10+=Number(e.s10||0),n.s5+=Number(e.s5||0)}),t.forEach(e=>{var t,n,s;r.s16+=Number((null===(t=e.tinCounts)||void 0===t?void 0:t.s16)||0),r.s10+=Number((null===(n=e.tinCounts)||void 0===n?void 0:n.s10)||0),r.s5+=Number((null===(s=e.tinCounts)||void 0===s?void 0:s.s5)||0)}),{s16:n.s16-r.s16,s10:n.s10-r.s10,s5:n.s5-r.s5}}function R(e,t){let n={s10:0,s5:0,s2:0},r={s10:0,s5:0,s2:0};return e.forEach(e=>{n.s10+=Number(e.s10||0),n.s5+=Number(e.s5||0),n.s2+=Number(e.s2||0)}),t.forEach(e=>{var t,n,s;r.s10+=Number((null===(t=e.plasticCounts)||void 0===t?void 0:t.s10)||0),r.s5+=Number((null===(n=e.plasticCounts)||void 0===n?void 0:n.s5)||0),r.s2+=Number((null===(s=e.plasticCounts)||void 0===s?void 0:s.s2)||0)}),{s10:n.s10-r.s10,s5:n.s5-r.s5,s2:n.s2-r.s2}}w+="==================================================\n",w+="--- ZEYT\u0130NYA\u011eI ALIM/SATIM \xd6ZET\u0130 ---\n",w+="Toplam Al\u0131m Maliyeti: ".concat(ap(C,"\u20ba"),"\n"),w+="Toplam Sat\u0131\u015f Geliri: ".concat(ap(T,"\u20ba"),"\n"),w+="Kalan Net Teneke Sto\u011fu: ".concat(ap(P,"adet"),"\n"),w+="Net K\xe2r/Zarar: ".concat(ap(A,"\u20ba"),"\n"),w+="\n",w+="==================================================\n",w+="--- ZEYT\u0130NYA\u011eI ALIMLARI (".concat(n.oilPurchases.length," adet) ---\n"),n.oilPurchases.forEach(e=>{w+="Tarih: ".concat(new Date(e.date).toLocaleDateString("tr-TR"),", Firma: ").concat(e.supplierName,", Teneke Say\u0131s\u0131: ").concat(e.tinCount,", Teneke Fiyat\u0131: ").concat(ap(e.tinPrice,"\u20ba"),", Toplam Maliyet: ").concat(ap(e.totalCost,"\u20ba"),"\n")}),w+="\n",w+="==================================================\n",w+="--- ZEYT\u0130NYA\u011eI SATI\u015eLARI (".concat(n.oilSales.length," adet) ---\n"),n.oilSales.forEach(e=>{w+="Tarih: ".concat(new Date(e.date).toLocaleDateString("tr-TR"),", M\xfc\u015fteri: ").concat(e.customerName,", Teneke Say\u0131s\u0131: ").concat(e.tinCount,", Teneke Fiyat\u0131: ").concat(ap(e.tinPrice,"\u20ba"),", Toplam Gelir: ").concat(ap(e.totalRevenue,"\u20ba"),"\n")}),w+="\n",w+="==================================================\n",w+="--- \u0130\u015e\xc7\u0130 G\u0130DERLER\u0130 (".concat(n.workerExpenses.length," adet) ---\n"),n.workerExpenses.forEach(e=>{w+="Tarih: ".concat(new Date(e.date).toLocaleDateString("tr-TR"),", \u0130sim: ").concat(e.workerName,", \xc7al\u0131\u015ft\u0131\u011f\u0131 G\xfcn: ").concat(e.daysWorked,", Tutar: ").concat(ap(e.amount,"\u20ba"),", A\xe7\u0131klama: ").concat(e.description,"\n")}),w+="\n",w+="==================================================\n",w+="--- MUHTEL\u0130F G\u0130DERLER (".concat(n.factoryOverhead.length," adet) ---\n"),n.factoryOverhead.forEach(e=>{w+="Tarih: ".concat(new Date(e.date).toLocaleDateString("tr-TR"),", A\xe7\u0131klama: ").concat(e.description,", Tutar: ").concat(ap(e.amount,"\u20ba"),"\n")}),w+="\n",w+="==================================================\n",w+="--- TENEKE ALIMLARI (".concat(n.tinPurchases.length," adet) ---\n"),n.tinPurchases.forEach(e=>{w+="Tarih: ".concat(new Date(e.date).toLocaleDateString("tr-TR"),", 16'l\u0131k: ").concat(e.s16||0,", 10'luk: ").concat(e.s10||0,", 5'lik: ").concat(e.s5||0,", Birim Fiyat: ").concat(ap(e.tinPrice,"\u20ba"),", Toplam Maliyet: ").concat(ap(e.totalCost,"\u20ba"),", A\xe7\u0131klama: ").concat(e.description,"\n")}),w+="\n",w+="==================================================\n",w+="--- B\u0130DON ALIMLARI (".concat(n.plasticPurchases.length," adet) ---\n"),n.plasticPurchases.forEach(e=>{w+="Tarih: ".concat(new Date(e.date).toLocaleDateString("tr-TR"),", 10'luk: ").concat(e.s10||0,", 5'lik: ").concat(e.s5||0,", 2'lik: ").concat(e.s2||0,", Birim Fiyat: ").concat(ap(e.plasticPrice,"\u20ba"),", Toplam Maliyet: ").concat(ap(e.totalCost,"\u20ba"),", A\xe7\u0131klama: ").concat(e.description,"\n")}),w+="\n",w+="==================================================\n",w+="--- P\u0130R\u0130NA GEL\u0130RLER\u0130 (".concat(n.pomaceRevenues.length," adet) ---\n"),n.pomaceRevenues.forEach(e=>{w+="Tarih: ".concat(new Date(e.date).toLocaleDateString("tr-TR"),", A\xe7\u0131klama: ").concat(e.description,", T\u0131r Say\u0131s\u0131: ").concat(e.truckCount,", Y\xfck: ").concat(e.loadKg," kg, Kg Fiyat\u0131: ").concat(e.pricePerKg," \u20ba, Toplam Gelir: ").concat(ap(e.totalRevenue,"\u20ba"),"\n")}),w+="\n",w+="==================================================\n",w+="--- TENEKE/B\u0130DON STOKLARI ---\n";const O=D(n.tinPurchases||[],n.transactions||[]),L=R(n.plasticPurchases||[],n.transactions||[]);w+="Kalan Teneke Stoklar\u0131:\n",w+="  16'l\u0131k: ".concat(O.s16," adet\n"),w+="  10'luk: ".concat(O.s10," adet\n"),w+="  5'lik: ".concat(O.s5," adet\n"),w+="Kalan Bidon Stoklar\u0131:\n",w+="  10'luk: ".concat(L.s10," adet\n"),w+="  5'lik: ".concat(L.s5," adet\n"),w+="  2'lik: ".concat(L.s2," adet\n"),w+="\n",w+="==================================================\n",w+="--- M\xdc\u015eTER\u0130 KAYITLARI ---\n",t.forEach(e=>{const t=n.transactions.filter(t=>t.customerId===e.id);w+="\n*** M\xfc\u015fteri Ad\u0131: ".concat(e.name," ***\n"),w+="  > \u0130\u015flem Ge\xe7mi\u015fi:\n",t.length>0?t.forEach(e=>{const t=e.description?"".concat(e.description," (").concat(ap(e.oliveKg)," kg zeytin)"):"".concat(ap(e.oliveKg)," kg zeytin"),n=(e.totalCost||0)-(e.paymentReceived||0)-(e.paymentLoss||0);w+="    - Tarih: ".concat(new Date(e.date).toLocaleDateString(),", A\xe7\u0131klama: ").concat(t,", Tutar: ").concat(ap(e.totalCost,"\u20ba"),", Al\u0131nan: ").concat(ap(e.paymentReceived,"\u20ba"),", Kalan: ").concat(ap(n,"\u20ba"),"\n")}):w+="    (Bu m\xfc\u015fteriye ait i\u015flem bulunmamaktad\u0131r.)\n"}),w+="\n";const M=new Blob([w],{type:"text/plain;charset=utf-8;"}),F=document.createElement("a"),V=URL.createObjectURL(M);F.setAttribute("href",V),F.setAttribute("download","duldule_yedek_".concat((new Date).toISOString().split("T")[0],".txt")),document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(V)}catch(e){console.error("Yedekleme dosyas\u0131 olu\u015fturulurken hata olu\u015ftu:",e),alert("Yedekleme dosyas\u0131 olu\u015fturulurken bir hata olu\u015ftu. L\xfctfen konsolu kontrol edin.")}},className:"flex items-center justify-center space-x-2 px-6 py-3 bg-emerald-600 text-white font-semibold rounded-lg hover:bg-emerald-700 shadow-md transition-colors w-full md:w-auto",children:[(0,Zm.jsx)(E,{className:"w-5 h-5"}),(0,Zm.jsx)("span",{children:"Yedek Dosyas\u0131n\u0131 \u0130ndir (.txt)"})]})]})]})};let Lp=null;try{"undefined"!==typeof window&&window.require&&(Lp=window.require("electron").ipcRenderer)}catch(Fp){Lp=null}const Mp=function(){const[e,t]=(0,r.useState)(null),n=async()=>sp(null===e||void 0===e?void 0:e.uid),s=async t=>ip(t,null===e||void 0===e?void 0:e.uid),[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)("dashboard"),[c,d]=(0,r.useState)([]),[h,f]=(0,r.useState)([]),[m,p]=(0,r.useState)(null),[g,y]=(0,r.useState)(!1),[C,T]=(0,r.useState)(null),[I,j]=(0,r.useState)(!1),[P,A]=(0,r.useState)(null),[D,R]=(0,r.useState)(!1),[O,L]=(0,r.useState)(null),[M,F]=(0,r.useState)(""),[V,U]=(0,r.useState)(""),[z,B]=(0,r.useState)(!1),[K,q]=(0,r.useState)([]),[H,W]=(0,r.useState)([]),[G,Q]=(0,r.useState)([]),[Y,X]=(0,r.useState)([]),[J,$]=(0,r.useState)([]),[Z,ee]=(0,r.useState)([]),[te,ne]=(0,r.useState)([]),[re,se]=(0,r.useState)({pricePerKg:3,tinPrices:{s16:80,s10:70,s5:60},plasticPrices:{s10:20,s5:15,s2:10},oilPurchasePrice:200,oilSalePrice:250});if(r.useEffect(()=>{const e=function(e,t,n,r){return ye(e).onAuthStateChanged(t,n,r)}(Jm,e=>{t(e),a(!0)});return()=>e()},[]),(0,r.useEffect)(()=>{if(null===e||void 0===e||!e.uid)return;console.log("Setting up real-time listener for user:",e.uid);const t=Gm(am($m,"userData",e.uid),t=>{if(t.exists()){console.log("Real-time data update received from Firestore");const n=t.data();d(n.customers||[]),f(n.transactions||[]),q(n.workerExpenses||[]),W(n.factoryOverhead||[]),Q(n.pomaceRevenues||[]),X(n.tinPurchases||[]),$(n.plasticPurchases||[]),ee(n.oilPurchases||[]),ne(n.oilSales||[]),se(n.defaultPrices||{pricePerKg:3,tinPrices:{s16:80,s10:70,s5:60},plasticPrices:{s10:20,s5:15,s2:10},oilPurchasePrice:200,oilSalePrice:250})}else{async function r(){const t=await sp(e.uid);d(t.customers||[]),f(t.transactions||[]),q(t.workerExpenses||[]),W(t.factoryOverhead||[]),Q(t.pomaceRevenues||[]),X(t.tinPurchases||[]),$(t.plasticPurchases||[]),ee(t.oilPurchases||[]),ne(t.oilSales||[]),se(t.defaultPrices||{pricePerKg:3,tinPrices:{s16:80,s10:70,s5:60},plasticPrices:{s10:20,s5:15,s2:10},oilPurchasePrice:200,oilSalePrice:250})}console.log("No Firestore data, loading initial data"),r()}},e=>{console.error("Real-time listener error:",e)});return()=>{console.log("Cleaning up real-time listener"),t()}},[null===e||void 0===e?void 0:e.uid]),r.useEffect(()=>{let e;async function t(){console.log("Attempting automatic backup...");try{const e=await n(),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"});console.log("Backup data prepared:",t)}catch(e){console.error("Backup error:",e)}}return t(),e=setInterval(t,864e5),()=>clearInterval(e)},[]),!i)return(0,Zm.jsx)("div",{children:"Y\xfckleniyor..."});if(!e)return(0,Zm.jsx)(ep,{onLogin:()=>t(Jm.currentUser)});const ie=(e,t)=>{F(e),U(t),setTimeout(()=>{F(""),U("")},3e3)},ae=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;l(e),p("customerDetails"===e?t:null)},oe=function(){T(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),y(!0)},le=()=>{y(!1),T(null)},ce=async e=>{try{const t=await n();let r=t.workerExpenses||[];e.id?(r=r.map(t=>t.id===e.id?u(u({},t),e):t),ie("\u0130\u015f\xe7i harcamas\u0131 ba\u015far\u0131yla g\xfcncellendi!","success")):(e.id=Date.now().toString(),e.createdAt=(new Date).toISOString(),r.push(e),ie("\u0130\u015f\xe7i harcamas\u0131 ba\u015far\u0131yla eklendi!","success")),t.workerExpenses=r,await s(t),q(r)}catch(t){console.error("Error saving worker expense:",t),ie("\u0130\u015f\xe7i harcamas\u0131 kaydedilirken hata olu\u015ftu!","error")}},ue=async e=>{try{const t=await n();let r=t.factoryOverhead||[];e.id?(r=r.map(t=>t.id===e.id?u(u({},t),e):t),ie("Muhtelif gider ba\u015far\u0131yla g\xfcncellendi!","success")):(e.id=Date.now().toString(),e.createdAt=(new Date).toISOString(),r.push(e),ie("Muhtelif gider ba\u015far\u0131yla eklendi!","success")),t.factoryOverhead=r,await s(t),W(r)}catch(t){console.error("Error saving factory overhead:",t),ie("Muhtelif gider kaydedilirken hata olu\u015ftu!","error")}},de=async e=>{try{const t=await n();let r=t.pomaceRevenues||[];e.id?(r=r.map(t=>t.id===e.id?u(u({},t),e):t),ie("Pirina geliri ba\u015far\u0131yla g\xfcncellendi!","success")):(e.id=Date.now().toString(),e.createdAt=(new Date).toISOString(),r.push(e),ie("Pirina geliri ba\u015far\u0131yla eklendi!","success")),t.pomaceRevenues=r,await s(t),Q(r)}catch(t){console.error("Error saving pomace revenue:",t),ie("Pirina geliri kaydedilirken hata olu\u015ftu!","error")}},he=async e=>{try{const t=await n();let r=t.tinPurchases||[];e.id?(r=r.map(t=>t.id===e.id?u(u({},t),e):t),ie("Teneke al\u0131m\u0131 ba\u015far\u0131yla g\xfcncellendi!","success")):(e.id=Date.now().toString(),e.createdAt=(new Date).toISOString(),r.push(e),ie("Teneke al\u0131m\u0131 ba\u015far\u0131yla eklendi!","success")),t.tinPurchases=r,await s(t),X(r)}catch(t){console.error("Error saving tin purchase:",t),ie("Teneke al\u0131m\u0131 kaydedilirken hata olu\u015ftu!","error")}},fe=async e=>{try{const t=await n();let r=t.plasticPurchases||[];e.id?(r=r.map(t=>t.id===e.id?u(u({},t),e):t),ie("Bidon al\u0131m\u0131 ba\u015far\u0131yla g\xfcncellendi!","success")):(e.id=Date.now().toString(),e.createdAt=(new Date).toISOString(),r.push(e),ie("Bidon al\u0131m\u0131 ba\u015far\u0131yla eklendi!","success")),t.plasticPurchases=r,await s(t),$(r)}catch(t){console.error("Error saving plastic purchase:",t),ie("Bidon al\u0131m\u0131 kaydedilirken hata olu\u015ftu!","error")}},me=async(e,t)=>{try{const r=await n();let i=r[e]||[];switch(i=i.filter(e=>e.id!==t),r[e]=i,await s(r),e){case"transactions":f(i);break;case"workerExpenses":q(i);break;case"factoryOverhead":W(i);break;case"pomaceRevenues":Q(i);break;case"tinPurchases":X(i);break;case"plasticPurchases":$(i);break;case"oilPurchases":ee(i);break;case"oilSales":ne(i)}ie("Kay\u0131t ba\u015far\u0131yla silindi.","success")}catch(r){console.error("Error deleting item:",r),ie("Silme i\u015flemi s\u0131ras\u0131nda hata olu\u015ftu!","error")}},pe=async e=>{try{const t=await n();let r=t.customers||[],i=t.transactions||[];r=r.filter(t=>t.id!==e),i=i.filter(t=>t.customerId!==e),t.customers=r,t.transactions=i,await s(t),d(r),f(i),ie("M\xfc\u015fteri ve t\xfcm i\u015flemleri ba\u015far\u0131yla silindi.","success")}catch(t){console.error("Error deleting customer:",t),ie("M\xfc\u015fteri silme i\u015flemi s\u0131ras\u0131nda hata olu\u015ftu!","error")}};return(0,Zm.jsxs)("div",{className:"min-h-screen bg-gray-50 font-inter flex flex-col",children:[(0,Zm.jsx)("header",{className:"relative w-full bg-white shadow-md z-10",children:(0,Zm.jsx)("nav",{className:"flex items-center justify-between px-6 py-3",children:(0,Zm.jsxs)("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[(0,Zm.jsx)("h1",{className:"text-3xl font-bold text-emerald-700",children:"D\xdcLD\xdcL ZEYT\u0130NYA\u011eI FABR\u0130KASI"}),(0,Zm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Zm.jsx)(hp,{text:"Ana Sayfa",icon:(0,Zm.jsx)(v,{}),active:"dashboard"===o,onClick:()=>ae("dashboard"),textClassName:"text-sm"}),(0,Zm.jsx)(hp,{text:"Kay\u0131tlar",icon:(0,Zm.jsx)(b,{}),active:"records"===o,onClick:()=>ae("records")}),(0,Zm.jsx)(hp,{text:"M\xfc\u015fteriler",icon:(0,Zm.jsx)(x,{}),active:"customers"===o,onClick:()=>ae("customers")}),(0,Zm.jsx)(hp,{text:"Zeytinya\u011f\u0131 Al\u0131m/Sat\u0131m",icon:(0,Zm.jsx)(w,{}),active:"oilTrading"===o,onClick:()=>ae("oilTrading"),textClassName:"text-xs"}),(0,Zm.jsx)(hp,{text:"Giderler ve Di\u011fer Gelirler",icon:(0,Zm.jsx)(N,{}),active:"expenses"===o,onClick:()=>ae("expenses"),textClassName:"text-xs"}),(0,Zm.jsx)(hp,{text:"\u0130statistikler",icon:(0,Zm.jsx)(k,{}),active:"statistics"===o,onClick:()=>ae("statistics")}),(0,Zm.jsx)(hp,{text:"Sto\u011fumuz",icon:(0,Zm.jsx)(S,{}),active:"stock"===o,onClick:()=>ae("stock")}),(0,Zm.jsx)(hp,{text:"Yedekler",icon:(0,Zm.jsx)(E,{}),active:"backup"===o,onClick:()=>ae("backup")}),(0,Zm.jsxs)("button",{onClick:async()=>{try{console.log("\xc7\u0131k\u0131\u015f i\u015flemi ba\u015flat\u0131l\u0131yor..."),await function(e){return ye(e).signOut()}(Jm),t(null),d([]),f([]),q([]),W([]),Q([]),X([]),$([]),ee([]),ne([]),a(!0),console.log("\xc7\u0131k\u0131\u015f i\u015flemi tamamland\u0131")}catch(e){console.error("\xc7\u0131k\u0131\u015f hatas\u0131:",e),a(!0)}},className:"flex items-center space-x-2 px-4 py-3 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-all duration-200 shadow-lg",title:"\xc7\u0131k\u0131\u015f Yap",children:[(0,Zm.jsx)(_,{className:"w-5 h-5"}),(0,Zm.jsx)("span",{className:"font-semibold text-sm",children:"\xc7\u0131k\u0131\u015f"})]})]})]})})}),(0,Zm.jsxs)("main",{className:"flex-1 w-full max-w-7xl mx-auto py-8 px-4",children:["dashboard"===o&&(0,Zm.jsx)(fp,{customers:c,transactions:h,workerExpenses:K,factoryOverhead:H,pomaceRevenues:G,tinPurchases:Y,plasticPurchases:J,onOpenNewTransactionModal:oe,navigateToCustomerDetails:ae}),"records"===o&&(0,Zm.jsx)(gp,{customers:c,transactions:h,onOpenNewTransactionModal:oe,onEditTransaction:T,onDeleteTransaction:e=>me("transactions",e),onDeleteCustomer:me,navigateToCustomerDetails:ae}),"customers"===o&&(0,Zm.jsx)(pp,{customers:c,transactions:h,navigateToCustomerDetails:ae,onOpenNewTransactionModal:oe,onCollectPayment:async(e,t,r)=>{try{const i=await n();let a=i.transactions||[];const o={id:Date.now().toString(),customerId:e,customerName:t,date:(new Date).toISOString(),paymentReceived:Number(r),oliveKg:0,oilLitre:0,pricePerKg:0,tinCounts:{s16:0,s10:0,s5:0},tinPrices:{s16:0,s10:0,s5:0},plasticCounts:{s10:0,s5:0,s2:0},plasticPrices:{s10:0,s5:0,s2:0},totalCost:0,oilRatio:0,paymentLoss:0,remainingBalance:-Number(r),description:"Ara Tahsilat"};a.push(o),i.transactions=a,await s(i),f(a),ie("".concat(ap(r,"\u20ba")," tutar\u0131nda tahsilat ba\u015far\u0131yla kaydedildi."),"success")}catch(i){console.error("Error collecting payment:",i),ie("Tahsilat s\u0131ras\u0131nda hata olu\u015ftu!","error")}},onDeleteSelected:e=>{const t="".concat(e.length," m\xfc\u015fteriyi ve bu m\xfc\u015fterilere ait t\xfcm i\u015flemleri kal\u0131c\u0131 olarak silmek istedi\u011finizden emin misiniz?");L({type:"delete-multiple-customers",ids:e,message:t}),R(!0)}}),"oilTrading"===o&&(0,Zm.jsx)(bp,{oilPurchases:Z,oilSales:te,onSaveOilPurchase:async e=>{try{const t=await n();let r=t.oilPurchases||[];e.id?(r=r.map(t=>t.id===e.id?u(u({},t),e):t),ie("Zeytinya\u011f\u0131 al\u0131m\u0131 ba\u015far\u0131yla g\xfcncellendi!","success")):(e.id=Date.now().toString(),e.createdAt=(new Date).toISOString(),r.push(e),ie("Zeytinya\u011f\u0131 al\u0131m\u0131 ba\u015far\u0131yla eklendi!","success")),t.oilPurchases=r,await s(t),ee(r)}catch(t){console.error("Error saving oil purchase:",t),ie("Zeytinya\u011f\u0131 al\u0131m\u0131 kaydedilirken hata olu\u015ftu!","error")}},onSaveOilSale:async e=>{try{const t=await n();let r=t.oilSales||[];e.id?(r=r.map(t=>t.id===e.id?u(u({},t),e):t),ie("Zeytinya\u011f\u0131 sat\u0131\u015f\u0131 ba\u015far\u0131yla g\xfcncellendi!","success")):(e.id=Date.now().toString(),e.createdAt=(new Date).toISOString(),r.push(e),ie("Zeytinya\u011f\u0131 sat\u0131\u015f\u0131 ba\u015far\u0131yla eklendi!","success")),t.oilSales=r,await s(t),ne(r)}catch(t){console.error("Error saving oil sale:",t),ie("Zeytinya\u011f\u0131 sat\u0131\u015f\u0131 kaydedilirken hata olu\u015ftu!","error")}},onDeleteItem:me,defaultPrices:re}),"statistics"===o&&(0,Zm.jsx)(vp,{transactions:h,tinPurchases:Y,plasticPurchases:J}),"stock"===o&&(0,Zm.jsx)(Ap,{tinPurchases:Y,plasticPurchases:J,transactions:h}),"expenses"===o&&(0,Zm.jsx)(Sp,{workerExpenses:K,factoryOverhead:H,pomaceRevenues:G,tinPurchases:Y,plasticPurchases:J,onSaveWorkerExpense:ce,onSaveFactoryOverhead:ue,onSavePomaceRevenue:de,onSaveTinPurchase:he,onSavePlasticPurchase:fe,onDeleteItem:(e,t)=>me(e,t)}),"factory-expenses"===o&&(0,Zm.jsx)(Sp,{workerExpenses:K,factoryOverhead:H,pomaceRevenues:G,tinPurchases:Y,plasticPurchases:J,onSaveWorkerExpense:ce,onDeleteWorkerExpense:me,onSaveFactoryOverhead:ue,onDeleteFactoryOverhead:me,onSavePomaceRevenue:de,onDeletePomaceRevenue:me,onSaveTinPurchase:he,onDeleteTinPurchase:me,onSavePlasticPurchase:fe,onDeletePlasticPurchase:me}),"customerDetails"===o&&(0,Zm.jsx)(yp,{customer:m,transactions:h.filter(e=>e.customerId===m.id),onBack:()=>ae("records"),onEditTransaction:oe,onDeleteTransaction:e=>me("transactions",e),onDeleteCustomer:pe}),"backup"===o&&(0,Zm.jsx)(Op,{customers:c,transactions:h,workerExpenses:K,factoryOverhead:H,pomaceRevenues:G,tinPurchases:Y,plasticPurchases:J,oilPurchases:Z,oilSales:te})]}),g&&(0,Zm.jsx)(Np,{onClose:le,onSave:async e=>{try{const t=await n();let r=t.transactions||[],i=e.customerId;if(!i){const n=c.find(t=>t.name.toLowerCase()===e.customerName.toLowerCase());if(n)i=n.id;else{const n={id:Date.now().toString(),name:e.customerName,phone:"",address:"",createdAt:(new Date).toISOString()};t.customers=[...t.customers||[],n],i=n.id,d(t.customers)}}const a=u(u({},e),{},{customerId:i,customerName:e.customerName,date:e.date.toISOString(),id:e.id||Date.now().toString()});e.id?(r=r.map(t=>t.id===e.id?a:t),ie("\u0130\u015flem ba\u015far\u0131yla g\xfcncellendi!","success")):(r.push(a),ie("\u0130\u015flem ba\u015far\u0131yla eklendi!","success")),t.transactions=r,await s(t),f(r),le()}catch(t){console.error("Error saving transaction:",t),ie("\u0130\u015flem kaydedilirken hata olu\u015ftu!","error")}},customers:c,editingTransaction:C,defaultPrices:re,onSaveDefaultPrices:async t=>{try{const n=await sp(null===e||void 0===e?void 0:e.uid);n.defaultPrices=t,await ip(n,null===e||void 0===e?void 0:e.uid),se(t),ie("Varsay\u0131lan fiyatlar ba\u015far\u0131yla kaydedildi!","success")}catch(n){console.error("Error saving default prices:",n),ie("Varsay\u0131lan fiyatlar kaydedilirken hata olu\u015ftu!","error")}}}),D&&(0,Zm.jsx)(kp,{message:null===O||void 0===O?void 0:O.message,onConfirm:async()=>{if(!O)return;const{type:e,id:t,ids:n,collection:r}=O;B(!0);try{if("delete-single-item"===e)await me(r,t);else if("delete-single-customer"===e)await pe(t),ie("1 m\xfc\u015fteri ve t\xfcm i\u015flemleri ba\u015far\u0131yla silindi.","success"),ae("customers");else if("delete-multiple-customers"===e){for(const e of n)await pe(e);ie("".concat(n.length," m\xfc\u015fteri ve t\xfcm i\u015flemleri ba\u015far\u0131yla silindi."),"success"),ae("customers")}}catch(s){console.error("Silme hatas\u0131:",s),ie("Silme hatas\u0131: ".concat(s.message),"error")}finally{B(!1),R(!1),L(null)}},onCancel:()=>R(!1),isLoading:z})]})};s.createRoot(document.getElementById("root")).render((0,Zm.jsx)(r.StrictMode,{children:(0,Zm.jsx)(Mp,{})}))})();
//# sourceMappingURL=main.9df7ea27.js.map